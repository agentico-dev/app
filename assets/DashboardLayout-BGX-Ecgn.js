import{o as ue,r as c,j as e,L as M,p as he,u as me,q as A,t as $,O as pe}from"./react-vendor-TyuC8qxg.js";import{S as Q,P as fe,a as xe,b as ge}from"./popover-CnfoHWxe.js";import{c as k,u as F,a as z,T as G,b as Y,d as Z,e as V,s as O,f as je}from"./index-D5uhiMQB.js";import{B as X}from"./badge-bpxx3q91.js";import{C as ye,a as ve,b as be}from"./collapsible-FhUTsrjs.js";import{B as Ne}from"./briefcase-BBeItzUj.js";import{A as we}from"./app-window-BtmSL7uK.js";import{S as ke}from"./server-CWXdQjOI.js";import{W as Ce}from"./wrench-KjQ0gjjb.js";import{Z as Se}from"./zap-J7eR3ESZ.js";import{S as D}from"./search-BR1MFiIH.js";import{U as J}from"./user-BuEUrPAo.js";import{S as Me}from"./settings-0ZFxNfWk.js";import{C as ee}from"./chevron-down-Bdv2PV_A.js";import{C as se}from"./chevron-right-CBt-y2ls.js";import{B as _e}from"./brain-DMjsiMZP.js";import{B as S}from"./button-CrjcO5GY.js";import{I as te}from"./input-DR-AxXjG.js";import{D as re,a as ae,b as ie,c as ne,d as P,e as _}from"./dropdown-menu-y3oyQNBb.js";import{S as L}from"./skeleton-DgsA2FIA.js";import{C as oe}from"./check-CG9NCPd3.js";import{f as Ee}from"./utils-DVqAV-fM.js";import{u as ze}from"./useOrganizations-BiQcvcEU.js";import{A as U,a as W}from"./avatar-BaIhr9EP.js";import{B as Oe}from"./building-sRyiltT5.js";import{C as Ae}from"./circle-plus-BAxS78JD.js";import{M as Le,u as le,P as qe,a as Ie,b as Pe,L as Te,m as b}from"./proxy-B0qnXvvZ.js";import{C as Re}from"./chevron-left-CemVi7Q2.js";import{P as Be}from"./plug-zap-C-OQSylP.js";import"./ui-components-CAmpQbeX.js";import"./supabase-DLYUZSEu.js";import"./circle-C2I3inlC.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new s.Error().stack;r&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[r]="bc07690a-98fb-4ccc-bc8e-15df95439763",s._sentryDebugIdIdentifier="sentry-dbid-bc07690a-98fb-4ccc-bc8e-15df95439763")}catch{}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=k("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=k("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=k("ConciergeBell",[["path",{d:"M3 20a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1Z",key:"1pvr1r"}],["path",{d:"M20 16a8 8 0 1 0-16 0",key:"1pa543"}],["path",{d:"M12 4v4",key:"1bq03y"}],["path",{d:"M10 4h4",key:"1xpv9s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=k("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=k("Hotel",[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=k("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=k("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=k("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=k("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=k("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function Ye({onClose:s,collapsed:r}){const t=ue(),{user:a}=F(),o=!!a,[u,h]=c.useState(!1),x=[{title:"Dashboard",href:"/",icon:Ue},{title:"Projects",href:"/projects",icon:Ne},{title:"Applications",href:"/apps",icon:we},{title:"Servers",href:"/servers",icon:ke},{title:"AI Tools",href:"/tools",icon:Ce},{title:"Studio",href:"/studio",icon:Se,badge:"Pro"}],m=[{title:"Search",href:"/search",icon:D},{title:"Settings",href:"/settings",icon:Me,submenu:[{title:"Profile",href:"/profile",icon:J},{title:"Organizations",href:"/orgs",icon:He},{title:"Environments",href:"/settings/environments",icon:De}]}],g=[{title:"Documentation",href:"https://agentico.dev/docs/intro",icon:_e},{title:"Contact Us",href:"https://go.rebelion.la/contact-us",icon:ce},{title:"Discord",href:"https://discord.gg/jPvHkE9eKf",icon:Fe},{title:"YouTube",href:"https://www.youtube.com/playlist?list=PL7wYqDMFQYFO2COpAblqESwBmxX0Lbv-c",icon:Ge}];return e.jsx("div",{className:"flex h-full flex-col bg-sidebar text-sidebar-foreground",children:e.jsx(Q,{className:"flex-1 px-3 py-4 overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-1",children:x.map(n=>e.jsx(q,{item:n,active:t.pathname===n.href,collapsed:r},n.href))}),e.jsx("div",{className:"h-px bg-sidebar-border"}),o?e.jsxs("div",{className:"space-y-1",children:[m.map(n=>n.submenu&&n.submenu.length>0?e.jsxs(ye,{open:u,onOpenChange:h,children:[e.jsx(ve,{className:"w-full",children:e.jsx("div",{className:z("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors w-full",t.pathname.startsWith(n.href)?"bg-sidebar-accent text-sidebar-accent-foreground":"hover:bg-sidebar-accent/50 hover:text-sidebar-accent-foreground"),children:r?e.jsx(G,{children:e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx("span",{className:"flex items-center justify-center",children:e.jsx(n.icon,{className:"h-4 w-4"})})}),e.jsx(V,{side:"right",children:n.title})]})}):e.jsxs(e.Fragment,{children:[e.jsx(n.icon,{className:"h-4 w-4"}),e.jsx("span",{children:n.title}),u?e.jsx(ee,{className:"ml-auto h-4 w-4"}):e.jsx(se,{className:"ml-auto h-4 w-4"})]})})}),e.jsx(be,{className:"pl-10 space-y-1 mt-1",children:n.submenu.map(f=>e.jsx(q,{item:f,active:t.pathname===f.href,collapsed:r},f.href))})]},n.href):e.jsx(q,{item:n,active:t.pathname===n.href,collapsed:r},n.href)),e.jsx("div",{className:"h-px bg-sidebar-border"}),e.jsx("div",{className:"space-y-1",children:g.map(n=>e.jsx(q,{item:n,active:t.pathname===n.href,collapsed:r},n.href))}),e.jsx("div",{className:"border-t border-sidebar-border p-4 sticky bottom-0 bg-sidebar",children:r?e.jsx("div",{className:"text-sm font-medium",children:a.user_metadata.full_name[0]}):e.jsx("div",{className:"text-sm font-medium",children:a.user_metadata.full_name})})]}):e.jsxs("div",{className:"border-t border-sidebar-border p-4 sticky bottom-0 bg-sidebar",children:[r?e.jsx("div",{className:"text-sm font-medium",children:"G"}):e.jsx("div",{className:"text-sm font-medium",children:"Guest"}),e.jsxs("div",{className:"text-sidebar-foreground/60",children:[e.jsx(M,{to:"/login",children:"Sign in"})," for more features"]})]})]})})})}function q({item:s,active:r,collapsed:t}){return s.submenu?null:e.jsx(M,{to:s.href,className:z("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors",r?"bg-sidebar-accent text-sidebar-accent-foreground":"hover:bg-sidebar-accent/50 hover:text-sidebar-accent-foreground"),children:t?e.jsx(G,{children:e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx("span",{className:"flex items-center justify-center",children:e.jsx(s.icon,{className:"h-4 w-4"})})}),e.jsxs(V,{side:"right",children:[s.title,s.badge&&e.jsx("span",{className:"ml-2",children:s.badge})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx(s.icon,{className:"h-4 w-4"}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(X,{variant:"outline",className:"ml-auto text-xs bg-purple-100 text-purple-800 border-purple-300",children:s.badge})]})})}const Ze=async(s,r)=>{if(!s)return[];let t=O.from("notifications").select("*");r&&(t=t.eq("organization_id",r));const{data:a,error:o}=await t.order("created_at",{ascending:!1});if(o)throw o;return a},Ve=async(s,r,t)=>{if(!s)throw new Error("Authentication required");const{data:a,error:o}=await O.from("notifications").insert({user_id:s,organization_id:r,title:t.title,content:t.message||t.content,resource_type:t.resource_type||"generic",resource_id:t.resource_id||null,related_resource_id:t.related_resource_id||null,status:t.status||"unread",notification_type:t.type||t.notification_type||"info"}).select().single();if(o)throw o;return a},Xe=async(s,r)=>{if(!s)throw new Error("Authentication required");const{data:t,error:a}=await O.from("notifications").update({status:"read",updated_at:new Date().toISOString()}).eq("id",r).select().single();if(a)throw a;return t},Je=async(s,r)=>{if(!s)throw new Error("Authentication required");let t=O.from("notifications").update({status:"read",updated_at:new Date().toISOString()}).eq("status","unread");r&&(t=t.eq("organization_id",r));const{data:a,error:o}=await t.select();if(o)throw o;return a},es=async(s,r)=>{if(!s)throw new Error("Authentication required");const{error:t}=await O.from("notifications").delete().eq("id",r);if(t)throw t;return r};function ss(){const{session:s}=F(),{toast:r}=je(),t=he(),[a,o]=c.useState(null),u=!!(s!=null&&s.user);c.useEffect(()=>{const l=localStorage.getItem("selectedOrganizationId");l&&o(l)},[]);const{data:h=[],isLoading:x,error:m,refetch:g}=me({queryKey:["notifications",a],queryFn:()=>{var l;return Ze((l=s==null?void 0:s.user)==null?void 0:l.id,a)},enabled:u&&!!a}),n=A({mutationFn:l=>{var j;return Ve((j=s==null?void 0:s.user)==null?void 0:j.id,a,l)},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications",a]})},onError:l=>{r({title:"Error creating notification",description:l.message,variant:"destructive"})}}),f=A({mutationFn:l=>{var j;return Xe((j=s==null?void 0:s.user)==null?void 0:j.id,l)},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications",a]})},onError:l=>{r({title:"Error updating notification",description:l.message,variant:"destructive"})}}),i=A({mutationFn:()=>{var l;return Je((l=s==null?void 0:s.user)==null?void 0:l.id,a)},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications",a]})},onError:l=>{r({title:"Error updating notifications",description:l.message,variant:"destructive"})}}),d=A({mutationFn:l=>{var j;return es((j=s==null?void 0:s.user)==null?void 0:j.id,l)},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications",a]})},onError:l=>{r({title:"Error deleting notification",description:l.message,variant:"destructive"})}});return{notifications:h,unreadNotifications:h.filter(l=>l.status==="unread"||l.read===!1),isLoading:x,error:m,isAuthenticated:u,createNotification:n,markAsRead:f,markAllAsRead:i,deleteNotification:d,refetch:g,selectedOrgId:a}}function ts(){const[s,r]=c.useState(!1),t=$(),{notifications:a=[],unreadNotifications:o,isLoading:u,markAsRead:h,markAllAsRead:x,isAuthenticated:m}=ss(),g=(o==null?void 0:o.length)||0,n=i=>{switch(i){case"success":return e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"});case"warning":return e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500 mr-2"});case"error":return e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 mr-2"});default:return e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mr-2"})}},f=i=>{if(!i.resource_id)return;let d="";switch(i.resource_type){case"project":d=`/projects/${i.resource_id}`;break;case"application":d=`/applications/${i.resource_id}`;break;case"server":d=`/servers/${i.resource_id}`;break;case"tool":d=`/ai-tools/${i.resource_id}`;break;case"api":i.related_resource_id&&(d=`/applications/${i.related_resource_id}/apis/${i.resource_id}`);break;case"service":i.related_resource_id&&(d=`/applications/${i.related_resource_id}/services/${i.resource_id}`);break;default:console.warn(`Unknown resource type: ${i.resource_type}`);return}(i.status==="unread"||i.read===!1)&&i.id&&h.mutate(i.id),t(d),r(!1)};return c.useEffect(()=>{if(s&&g>0){const i=setTimeout(()=>{x.mutate({})},5e3);return()=>clearTimeout(i)}},[s,g,x]),m?e.jsxs(fe,{open:s,onOpenChange:r,children:[e.jsx(xe,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"icon",className:"relative",children:[e.jsx($e,{className:"h-4 w-4"}),g>0&&e.jsx(X,{className:"absolute -right-1 -top-1 h-4 w-4 rounded-full p-0 flex items-center justify-center",variant:"destructive",children:g>9?"9+":g}),e.jsx("span",{className:"sr-only",children:"Notifications"})]})}),e.jsxs(ge,{className:"w-80 p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"font-medium",children:"Notifications"}),g>0&&e.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>x.mutate({}),disabled:x.isPending,children:[e.jsx(oe,{className:"h-3 w-3 mr-1"}),"Mark all as read"]})]}),e.jsx(Q,{className:"h-80",children:u?e.jsx("div",{className:"p-4 space-y-4",children:[1,2,3].map(i=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(L,{className:"h-2 w-2 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(L,{className:"h-4 w-3/4"}),e.jsx(L,{className:"h-3 w-full"}),e.jsx(L,{className:"h-2 w-1/4"})]})]},i))}):a.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):e.jsx("div",{className:"divide-y",children:a.map(i=>{const d=i.status==="read"||i.read===!0,l=i.notification_type||i.type||"info",j=i.content||i.message;return e.jsx("div",{className:`p-4 hover:bg-muted/50 cursor-pointer transition-colors ${d?"opacity-60":""}`,onClick:()=>f(i),children:e.jsxs("div",{className:"flex",children:[n(l),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:i.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.created_at&&Ee(new Date(i.created_at),{addSuffix:!0})})]})]})},i.id)})})})]})]}):null}const rs=({onOrganizationChange:s,selectedOrgId:r,includeGlobal:t=!0,className:a})=>{const{userOrganizations:o,isLoading:u}=ze(),[h,x]=c.useState(!1),[m,g]=c.useState(""),n=$(),[f,i]=c.useState([]),[d,l]=c.useState(null);c.useEffect(()=>{const p=localStorage.getItem("selectedOrganizationId");p&&!r&&s(p)},[]),c.useEffect(()=>{if(o&&o.length>0){let p=[...o];if(t||(p=p.filter(v=>!v.is_global)),m){const v=m.toLowerCase();p=p.filter(C=>C.name.toLowerCase().includes(v)||C.description&&C.description.toLowerCase().includes(v))}if(i(p),r){const v=o.find(C=>C.id===r);v&&l(v)}else o.length>0&&(l(o[0]),s(o[0].id))}},[o,m,r,t,s]);const j=p=>{l(p),s(p.id),x(!1)},T=()=>{n("/orgs"),x(!1)},N=p=>p.split(" ").map(v=>v.charAt(0)).join("").toUpperCase().substring(0,2);return e.jsxs(re,{open:h,onOpenChange:x,children:[e.jsx(ae,{asChild:!0,children:e.jsxs(S,{variant:"outline",className:z("flex items-center justify-between w-full",a),disabled:u,children:[d?e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-6 w-6 mr-2",children:d.logo_url?e.jsx("img",{src:d.logo_url,alt:d.name}):e.jsx(W,{className:"text-xs",children:N(d.name)})}),e.jsx("span",{className:"truncate max-w-[150px]",children:d.name})]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:u?"Loading...":"Select Organization"})]}),e.jsx(ee,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(ie,{align:"start",className:"w-[300px]",children:[e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Search organizations...",className:"pl-8",value:m,onChange:p=>g(p.target.value)})]})}),e.jsx(ne,{children:"Your Organizations"}),e.jsx(P,{}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:f.length===0?e.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:"No organizations found"}):f.map(p=>e.jsxs(_,{className:"cursor-pointer flex items-center justify-between",onClick:()=>j(p),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-6 w-6 mr-2",children:p.logo_url?e.jsx("img",{src:p.logo_url,alt:p.name}):e.jsx(W,{className:"text-xs",children:N(p.name)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:p.name}),p.is_global&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"Global"})]})]}),(d==null?void 0:d.id)===p.id&&e.jsx(oe,{className:"h-4 w-4 text-primary"})]},p.id))}),e.jsx(P,{}),e.jsxs(_,{className:"cursor-pointer flex items-center gap-2",onClick:T,children:[e.jsx(Ae,{className:"h-4 w-4"}),"Create New Organization"]})]})]})};class as extends c.Component{getSnapshotBeforeUpdate(r){const t=this.props.childRef.current;if(t&&r.isPresent&&!this.props.isPresent){const a=t.offsetParent,o=a instanceof HTMLElement&&a.offsetWidth||0,u=this.props.sizeRef.current;u.height=t.offsetHeight||0,u.width=t.offsetWidth||0,u.top=t.offsetTop,u.left=t.offsetLeft,u.right=o-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function is({children:s,isPresent:r,anchorX:t}){const a=c.useId(),o=c.useRef(null),u=c.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=c.useContext(Le);return c.useInsertionEffect(()=>{const{width:x,height:m,top:g,left:n,right:f}=u.current;if(r||!o.current||!x||!m)return;const i=t==="left"?`left: ${n}`:`right: ${f}`;o.current.dataset.motionPopId=a;const d=document.createElement("style");return h&&(d.nonce=h),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${x}px !important;
            height: ${m}px !important;
            ${i}px !important;
            top: ${g}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[r]),e.jsx(as,{isPresent:r,childRef:o,sizeRef:u,children:c.cloneElement(s,{ref:o})})}const ns=({children:s,initial:r,isPresent:t,onExitComplete:a,custom:o,presenceAffectsLayout:u,mode:h,anchorX:x})=>{const m=le(os),g=c.useId(),n=c.useCallback(i=>{m.set(i,!0);for(const d of m.values())if(!d)return;a&&a()},[m,a]),f=c.useMemo(()=>({id:g,initial:r,isPresent:t,custom:o,onExitComplete:n,register:i=>(m.set(i,!1),()=>m.delete(i))}),u?[Math.random(),n]:[t,n]);return c.useMemo(()=>{m.forEach((i,d)=>m.set(d,!1))},[t]),c.useEffect(()=>{!t&&!m.size&&a&&a()},[t]),h==="popLayout"&&(s=e.jsx(is,{isPresent:t,anchorX:x,children:s})),e.jsx(qe.Provider,{value:f,children:s})};function os(){return new Map}const I=s=>s.key||"";function K(s){const r=[];return c.Children.forEach(s,t=>{c.isValidElement(t)&&r.push(t)}),r}const ls=({children:s,custom:r,initial:t=!0,onExitComplete:a,presenceAffectsLayout:o=!0,mode:u="sync",propagate:h=!1,anchorX:x="left"})=>{const[m,g]=Ie(h),n=c.useMemo(()=>K(s),[s]),f=h&&!m?[]:n.map(I),i=c.useRef(!0),d=c.useRef(n),l=le(()=>new Map),[j,T]=c.useState(n),[N,p]=c.useState(n);Pe(()=>{i.current=!1,d.current=n;for(let w=0;w<N.length;w++){const y=I(N[w]);f.includes(y)?l.delete(y):l.get(y)!==!0&&l.set(y,!1)}},[N,f.length,f.join("-")]);const v=[];if(n!==j){let w=[...n];for(let y=0;y<N.length;y++){const E=N[y],R=I(E);f.includes(R)||(w.splice(y,0,E),v.push(E))}return u==="wait"&&v.length&&(w=v),p(K(w)),T(n),null}const{forceRender:C}=c.useContext(Te);return e.jsx(e.Fragment,{children:N.map(w=>{const y=I(w),E=h&&!m?!1:n===N||f.includes(y),R=()=>{if(l.has(y))l.set(y,!0);else return;let H=!0;l.forEach(de=>{de||(H=!1)}),H&&(C==null||C(),p(d.current),h&&(g==null||g()),a&&a())};return e.jsx(ns,{isPresent:E,initial:!i.current||t?void 0:!1,custom:r,presenceAffectsLayout:o,mode:u,onExitComplete:E?void 0:R,anchorX:x,children:w},y)})})};function cs({sidebarCollapsed:s,toggleCollapse:r}){const[t,a]=c.useState("light"),{signOut:o,session:u}=F(),h=!!u.user,[x,m]=c.useState("");$();const g=()=>{const f=t==="light"?"dark":"light";a(f),document.documentElement.classList.toggle("dark",f==="dark")},n=f=>{m(f),localStorage.setItem("selectedOrganizationId",f)};return e.jsx("header",{className:"sticky top-0 z-30 backdrop-blur-sm bg-background/80 border-b border-border/40 shadow-sm",children:e.jsxs("div",{className:"flex h-16 items-center gap-4 px-4 md:px-6",children:[e.jsxs(b.div,{className:"flex items-center gap-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[e.jsxs(S,{variant:"ghost",size:"icon",onClick:r,className:"hidden md:flex hover:bg-background/80",children:[s?e.jsx(se,{className:"h-4 w-4"}):e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:s?"Expand Sidebar":"Collapse Sidebar"})]}),e.jsxs(M,{to:"/index",className:"flex items-center gap-2 font-semibold",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-primary to-accent-100 flex items-center justify-center shadow-lg",children:e.jsx("img",{src:"/favicon-32x32.png",alt:"Agentico",className:"h-6 w-6"})}),!s&&e.jsxs(b.span,{className:"bg-gradient-to-r from-primary to-accent-600 bg-clip-text text-transparent hidden sm:inline-block",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:["Agentico ",e.jsx("small",{style:{fontSize:"7px"},children:"0.3.0"})]})]})]}),e.jsxs("div",{className:"w-full flex items-center justify-between gap-2",children:[e.jsx(b.form,{className:"hidden md:flex-1 md:max-w-sm lg:max-w-md md:flex relative",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(D,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(te,{type:"search",placeholder:"Search anything...",className:"w-full bg-background/50 pl-8 md:w-[300px] lg:w-[400px] border-input/50 focus:border-primary/50 transition-all duration-200"})]})}),e.jsxs(b.div,{className:"flex flex-1 items-center justify-end gap-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,staggerChildren:.05},children:[h&&e.jsx(b.div,{className:"w-[200px] mr-2",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(rs,{selectedOrgId:x,onOrganizationChange:n,includeGlobal:!0})}),e.jsx(b.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6},children:e.jsx(S,{variant:"outline",size:"icon",className:"rounded-full hover:bg-primary/10 transition-all duration-200",children:e.jsxs("a",{href:"https://www.linkedin.com/comm/mynetwork/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=adrianescutia",target:"_blank",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Follow me on LinkedIn"})]})})}),e.jsx(b.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7},children:e.jsx(S,{variant:"outline",size:"icon",className:"rounded-full hover:bg-primary/10 transition-all duration-200",children:e.jsxs("a",{href:"https://go.rebelion.la/contact-us",target:"_blank",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Contact Us"})]})})}),e.jsx(b.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8},children:e.jsx(ts,{})}),e.jsx(b.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.9},children:e.jsxs(S,{variant:"ghost",size:"icon",onClick:g,className:"rounded-full hover:bg-primary/10 transition-all duration-200",children:[t==="light"?e.jsx(Ke,{className:"h-4 w-4"}):e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsx(b.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:1},children:e.jsxs(re,{children:[e.jsx(ae,{asChild:!0,children:e.jsxs(S,{variant:"ghost",size:"icon",className:"rounded-full border border-border/50 hover:bg-primary/10 transition-all duration-200",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"User menu"})]})}),e.jsxs(ie,{align:"end",className:"w-56 mt-1 bg-popover/80 backdrop-blur-md border-border/50",children:[e.jsx(ne,{children:"My Account"}),e.jsx(P,{}),h?e.jsxs(e.Fragment,{children:[e.jsx(_,{asChild:!0,className:"hover:bg-primary/10 transition-colors duration-200 cursor-pointer",children:e.jsx(M,{to:"/profile",children:"Profile"})}),e.jsx(_,{asChild:!0,className:"hover:bg-primary/10 transition-colors duration-200 cursor-pointer",children:e.jsx(M,{to:"/settings",children:"Settings"})}),e.jsx(_,{asChild:!0,className:"hover:bg-primary/10 transition-colors duration-200 cursor-pointer",children:e.jsx(M,{to:"/orgs",children:"Organizations"})}),e.jsx(P,{}),e.jsx(_,{onClick:()=>o(),className:"hover:bg-destructive/10 text-destructive transition-colors duration-200 cursor-pointer",children:"Log out"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{asChild:!0,className:"hover:bg-primary/10 transition-colors duration-200 cursor-pointer",children:e.jsx(M,{to:"/login",children:"Sign In"})}),e.jsx(_,{asChild:!0,className:"hover:bg-primary/10 transition-colors duration-200 cursor-pointer",children:e.jsx(M,{to:"/register",children:"Register"})})]})]})]})})]})]})]})})}const B=768;function ds(){const[s,r]=c.useState(void 0);return c.useEffect(()=>{const t=window.matchMedia(`(max-width: ${B-1}px)`),a=()=>{r(window.innerWidth<B)};return t.addEventListener("change",a),r(window.innerWidth<B),()=>t.removeEventListener("change",a)},[]),!!s}const Hs=()=>{const[s,r]=c.useState(!0),[t,a]=c.useState(!1),[o,u]=c.useState(!1),h=ds(),x=()=>r(!s),m=()=>a(!t);return e.jsxs("div",{className:"min-h-screen flex flex-col subtle-mesh",children:[e.jsx(cs,{sidebarCollapsed:t,toggleCollapse:m}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx(ls,{children:s&&e.jsx(b.div,{initial:h?{x:"-100%"}:{width:0},animate:h?{x:0}:{width:o||!t?256:64},exit:h?{x:"-100%"}:{width:0},transition:{duration:.3,ease:"easeInOut"},className:z("transition-all duration-300 ease-in-out bg-sidebar border-r border-sidebar-border h-screen fixed top-16",h?"w-full inset-0 z-40":"z-30","overflow-hidden"),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(Ye,{onClose:h?x:void 0,collapsed:!o&&t})})})}),e.jsx(b.div,{className:z("flex-1 overflow-auto transition-all duration-300","relative z-10"),style:{marginLeft:s&&!h?t&&!o?64:256:0},initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:e.jsxs("div",{className:"container py-6 px-4 md:px-6 min-h-screen",children:[h&&e.jsxs(S,{variant:"outline",size:"icon",onClick:x,className:"mb-4 md:hidden",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Toggle Menu"})]}),e.jsx(pe,{})]})})]})]})};export{Hs as DashboardLayout,Hs as default};
//# sourceMappingURL=DashboardLayout-BGX-Ecgn.js.map
