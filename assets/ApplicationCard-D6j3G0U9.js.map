{"version":3,"file":"ApplicationCard-D6j3G0U9.js","sources":["../../src/components/applications/ApplicationCard.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Link } from 'react-router';\nimport { AppWindow, CircuitBoard, Star, Tag, X } from 'lucide-react';\nimport { Application } from '@/types/application';\nimport { useTags } from '@/contexts/TagsContext';\nimport { toast } from '@/components/ui/use-toast';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\n\ninterface ApplicationCardProps {\n  application: Application;\n}\n\nexport function ApplicationCard({ application }: ApplicationCardProps) {\n  const { removeTagFromResource } = useTags();\n\n  // Fetch organization slug if needed\n  const { data: organization } = useQuery({\n    queryKey: ['organization', application.organization_id],\n    queryFn: async () => {\n      if (!application.organization_id) return null;\n      \n      const { data, error } = await supabase\n        .from('organizations')\n        .select('slug')\n        .eq('id', application.organization_id)\n        .single();\n      \n      if (error) throw error;\n      return data;\n    },\n    enabled: !!application.organization_id && !application.organization_slug,\n  });\n\n  const getStatusClassName = (status: string): string => {\n    switch (status.toLowerCase()) {\n      case 'active': return 'bg-green-500 hover:bg-green-600';\n      case 'development': return 'bg-purple-500 hover:bg-purple-600';\n      case 'maintenance': return 'bg-yellow-500 hover:bg-yellow-600';\n      case 'archived': return 'bg-red-500 hover:bg-red-600';\n      default: return 'bg-slate-500 hover:bg-slate-600';\n    }\n  };\n\n  const handleRemoveTag = async (tagName: string) => {\n    try {\n      // In a real implementation, we would use the tag's ID from the database\n      // For now, just show a toast message\n      toast({\n        title: 'Tag removed',\n        description: `Tag \"${tagName}\" was removed from ${application.name}`,\n      });\n    } catch (error) {\n      console.error('Error removing tag:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to remove tag',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  // Generate the correct URL for the application\n  const getAppUrl = () => {\n    // @fixme - This is a temporary fix. We should use the slug if available.\n    // Prefer to use slug over ID\n    // if (application.slug) {\n    //   // Use org slug if available, otherwise fall back to ID\n    //   if (application.organization_slug) {\n    //     return `/apps/${application.organization_slug}@${application.slug}`;\n    //   }\n      \n    //   if (organization?.slug) {\n    //     return `/apps/${organization.slug}@${application.slug}`;\n    //   }\n    // }\n    \n    // Fallback: Use ID\n    return `/applications/${application.id}`;\n  };\n\n  return (\n    <Card className=\"overflow-hidden transition-all hover:shadow-md\">\n      <CardHeader className=\"p-4 pb-0 flex justify-between\">\n        <div>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-lg\">{application.name}</CardTitle>\n            {application.favorite && (\n              <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400 ml-2\" />\n            )}\n          </div>\n          <CardDescription className=\"mt-1\">\n            {application.description?.length > 150\n              ? `${application.description.slice(0, 150)}...`\n              : application.description}\n          </CardDescription>\n        </div>\n      </CardHeader>\n      <CardContent className=\"p-4 pt-4\">\n        <div className=\"flex flex-wrap gap-2 mb-4\">\n          <Badge variant=\"outline\" className=\"text-xs flex items-center gap-1\">\n            <Tag className=\"h-3 w-3\" />\n            {application.category}\n          </Badge>\n          {application.tags.map((tag) => (\n            <Badge key={tag} variant=\"secondary\" className=\"text-xs flex items-center gap-1 group\">\n              {tag}\n              <button\n                onClick={() => handleRemoveTag(tag)}\n                className=\"opacity-0 group-hover:opacity-100 transition-opacity\"\n                aria-label={`Remove ${tag} tag`}\n              >\n                <X className=\"h-3 w-3\" />\n              </button>\n            </Badge>\n          ))}\n        </div>\n        <div className=\"flex justify-between text-sm\">\n          <div className=\"flex items-center\">\n            <AppWindow className=\"h-4 w-4 mr-1 text-muted-foreground\" />\n            <span>{application.endpoints_count} endpoints</span>\n          </div>\n          <div className=\"flex items-center\">\n            <CircuitBoard className=\"h-4 w-4 mr-1 text-muted-foreground\" />\n            <span>{application.tools_count} AI tools</span>\n          </div>\n        </div>\n      </CardContent>\n      <CardFooter className=\"p-4 pt-0 flex justify-between\">\n        <Badge className={`${getStatusClassName(application.status)} text-white`}>\n          {application.status.charAt(0).toUpperCase() + application.status.slice(1)}\n        </Badge>\n        <Button asChild>\n          <Link to={getAppUrl()}>View API</Link>\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n\nexport default ApplicationCard;\n"],"names":["ApplicationCard","application","removeTagFromResource","useTags","organization","useQuery","data","error","supabase","getStatusClassName","status","handleRemoveTag","tagName","toast","getAppUrl","jsxs","Card","jsx","CardHeader","CardTitle","Star","CardDescription","_a","CardContent","Badge","Tag","tag","X","AppWindow","CircuitBoard","CardFooter","Button","Link"],"mappings":"wwBAiBgB,SAAAA,EAAgB,CAAE,YAAAC,GAAqC,OAC/D,KAAA,CAAE,sBAAAC,CAAsB,EAAIC,EAAQ,EAGpC,CAAE,KAAMC,CAAa,EAAIC,EAAS,CACtC,SAAU,CAAC,eAAgBJ,EAAY,eAAe,EACtD,QAAS,SAAY,CACf,GAAA,CAACA,EAAY,gBAAwB,OAAA,KAEzC,KAAM,CAAE,KAAAK,EAAM,MAAAC,CAAA,EAAU,MAAMC,EAC3B,KAAK,eAAe,EACpB,OAAO,MAAM,EACb,GAAG,KAAMP,EAAY,eAAe,EACpC,OAAO,EAEV,GAAIM,EAAa,MAAAA,EACV,OAAAD,CACT,EACA,QAAS,CAAC,CAACL,EAAY,iBAAmB,CAACA,EAAY,iBAAA,CACxD,EAEKQ,EAAsBC,GAA2B,CAC7C,OAAAA,EAAO,YAAe,EAAA,CAC5B,IAAK,SAAiB,MAAA,kCACtB,IAAK,cAAsB,MAAA,oCAC3B,IAAK,cAAsB,MAAA,oCAC3B,IAAK,WAAmB,MAAA,8BACxB,QAAgB,MAAA,iCAAA,CAEpB,EAEMC,EAAkB,MAAOC,GAAoB,CAC7C,GAAA,CAGIC,EAAA,CACJ,MAAO,cACP,YAAa,QAAQD,CAAO,sBAAsBX,EAAY,IAAI,EAAA,CACnE,QACMM,EAAO,CACN,QAAA,MAAM,sBAAuBA,CAAK,EACpCM,EAAA,CACJ,MAAO,QACP,YAAa,uBACb,QAAS,aAAA,CACV,CAAA,CAEL,EAGMC,EAAY,IAeT,iBAAiBb,EAAY,EAAE,GAItC,OAAAc,EAAA,KAACC,EAAK,CAAA,UAAU,iDACd,SAAA,CAAAC,MAACC,EAAW,CAAA,UAAU,gCACpB,SAAAH,EAAA,KAAC,MACC,CAAA,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAE,EAAA,IAACE,EAAU,CAAA,UAAU,UAAW,SAAAlB,EAAY,KAAK,EAChDA,EAAY,UACVgB,EAAA,IAAAG,EAAA,CAAK,UAAU,8CAA+C,CAAA,CAAA,EAEnE,QACCC,EAAgB,CAAA,UAAU,OACxB,WAAAC,EAAArB,EAAY,cAAZ,YAAAqB,EAAyB,QAAS,IAC/B,GAAGrB,EAAY,YAAY,MAAM,EAAG,GAAG,CAAC,MACxCA,EAAY,WAClB,CAAA,CAAA,CAAA,CACF,CACF,CAAA,EACAc,EAAAA,KAACQ,EAAY,CAAA,UAAU,WACrB,SAAA,CAACR,EAAAA,KAAA,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAA,KAACS,EAAM,CAAA,QAAQ,UAAU,UAAU,kCACjC,SAAA,CAACP,EAAAA,IAAAQ,EAAA,CAAI,UAAU,SAAU,CAAA,EACxBxB,EAAY,QAAA,EACf,EACCA,EAAY,KAAK,IAAKyB,UACpBF,EAAgB,CAAA,QAAQ,YAAY,UAAU,wCAC5C,SAAA,CAAAE,EACDT,EAAA,IAAC,SAAA,CACC,QAAS,IAAMN,EAAgBe,CAAG,EAClC,UAAU,uDACV,aAAY,UAAUA,CAAG,OAEzB,SAAAT,EAAAA,IAACU,EAAE,CAAA,UAAU,SAAU,CAAA,CAAA,CAAA,CACzB,CAAA,EARUD,CASZ,CACD,CAAA,EACH,EACAX,EAAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACE,EAAAA,IAAAW,EAAA,CAAU,UAAU,oCAAqC,CAAA,SACzD,OAAM,CAAA,SAAA,CAAY3B,EAAA,gBAAgB,YAAA,CAAU,CAAA,CAAA,EAC/C,EACAc,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACE,EAAAA,IAAAY,EAAA,CAAa,UAAU,oCAAqC,CAAA,SAC5D,OAAM,CAAA,SAAA,CAAY5B,EAAA,YAAY,WAAA,CAAS,CAAA,CAAA,CAC1C,CAAA,CAAA,CACF,CAAA,CAAA,EACF,EACAc,EAAAA,KAACe,EAAW,CAAA,UAAU,gCACpB,SAAA,CAAAb,MAACO,GAAM,UAAW,GAAGf,EAAmBR,EAAY,MAAM,CAAC,cACxD,SAAAA,EAAY,OAAO,OAAO,CAAC,EAAE,YAAY,EAAIA,EAAY,OAAO,MAAM,CAAC,EAC1E,EACAgB,EAAAA,IAACc,EAAO,CAAA,QAAO,GACb,SAAAd,EAAA,IAACe,GAAK,GAAIlB,EAAA,EAAa,SAAA,UAAQ,CAAA,CACjC,CAAA,CAAA,CACF,CAAA,CAAA,EACF,CAEJ"}