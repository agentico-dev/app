import{m as N,t as T,r as y,w as _,j as e}from"./react-vendor-TyuC8qxg.js";import{B as h}from"./button-CrjcO5GY.js";import{I as A}from"./input-DR-AxXjG.js";import{T as E}from"./textarea-CzliNkd6.js";import{F as D,a as l,b as c,c as d,d as m,f as u,e as x}from"./form-Cq2_NWTX.js";import{S as b,a as C,b as v,c as M,d as o}from"./select-BTYSfX8Z.js";import{C as V,a as k,b as L,d as U,c as B}from"./card-DAAmTFtc.js";import{a as $,u as P}from"./useApplicationMessages-BuJ_9Qt2.js";import{g}from"./index-D5uhiMQB.js";import{A as R}from"./arrow-left-B-jkszN4.js";import"./ui-components-CAmpQbeX.js";import"./label-ppAVubx0.js";import"./chevron-down-Bdv2PV_A.js";import"./check-CG9NCPd3.js";import"./chevron-up-DyG2CS1O.js";import"./supabase-DLYUZSEu.js";import"./utils-DVqAV-fM.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new s.Error().stack;r&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[r]="0061e241-87de-4a2f-81c8-95348a59425e",s._sentryDebugIdIdentifier="sentry-dbid-0061e241-87de-4a2f-81c8-95348a59425e")}catch{}function ie(){const{applicationId:s,messageId:r}=N(),p=T(),n=!r,{data:i,isLoading:H}=$(r),{createMessage:S,updateMessage:w}=P(s),[j,f]=y.useState(!1),t=_({defaultValues:{title:"",content:"",message_type:"notification",status:"unread"}});y.useEffect(()=>{i&&!n&&t.reset({title:i.title,content:i.content,message_type:i.message_type,status:i.status})},[i,t,n]);const F=async a=>{if(s){f(!0);try{n?(await S.mutateAsync({...a,application_id:s}),g.success("Message created successfully")):r&&(await w.mutateAsync({...a,id:r}),g.success("Message updated successfully")),p(`/applications/${s}`)}catch(I){console.error("Error saving message:",I),g.error("Failed to save message")}finally{f(!1)}}};return e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx(h,{variant:"ghost",asChild:!0,children:e.jsxs("div",{onClick:()=>p(`/applications/${s}`),children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Back to Application"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n?"Create New Message":"Edit Message"}),e.jsx("p",{className:"text-muted-foreground",children:n?"Create a new message for your application":"Update the message details"})]}),e.jsxs(V,{children:[e.jsxs(k,{children:[e.jsx(L,{children:"Message Details"}),e.jsx(U,{children:"Fill in the details of your message"})]}),e.jsx(B,{children:e.jsx(D,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(F),className:"space-y-6",children:[e.jsx(l,{control:t.control,name:"title",render:({field:a})=>e.jsxs(c,{children:[e.jsx(d,{children:"Title"}),e.jsx(m,{children:e.jsx(A,{placeholder:"Enter message title",...a})}),e.jsx(u,{})]})}),e.jsx(l,{control:t.control,name:"content",render:({field:a})=>e.jsxs(c,{children:[e.jsx(d,{children:"Content"}),e.jsx(m,{children:e.jsx(E,{placeholder:"Enter message content",className:"min-h-[200px]",...a})}),e.jsx(x,{children:"The main content of your message."}),e.jsx(u,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{control:t.control,name:"message_type",render:({field:a})=>e.jsxs(c,{children:[e.jsx(d,{children:"Message Type"}),e.jsxs(b,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(m,{children:e.jsx(C,{children:e.jsx(v,{placeholder:"Select a type"})})}),e.jsxs(M,{children:[e.jsx(o,{value:"notification",children:"Notification"}),e.jsx(o,{value:"alert",children:"Alert"}),e.jsx(o,{value:"info",children:"Information"})]})]}),e.jsx(x,{children:"The type of this message."}),e.jsx(u,{})]})}),e.jsx(l,{control:t.control,name:"status",render:({field:a})=>e.jsxs(c,{children:[e.jsx(d,{children:"Status"}),e.jsxs(b,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(m,{children:e.jsx(C,{children:e.jsx(v,{placeholder:"Select a status"})})}),e.jsxs(M,{children:[e.jsx(o,{value:"unread",children:"Unread"}),e.jsx(o,{value:"read",children:"Read"})]})]}),e.jsx(x,{children:"The read status of this message."}),e.jsx(u,{})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>p(`/applications/${s}`),children:"Cancel"}),e.jsx(h,{type:"submit",disabled:j,children:j?n?"Creating...":"Updating...":n?"Create Message":"Update Message"})]})]})})})]})]})}export{ie as default};
//# sourceMappingURL=MessageFormPage-DfrMv0Rx.js.map
