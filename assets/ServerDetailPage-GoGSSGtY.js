import{j as e,m as S,t as I,r as d}from"./react-vendor-D9Z7L--9.js";import{e as A,s as m,d as l}from"./index-AU1k0GBq.js";import{R as C,a as E,D as P,b as B}from"./ResourceTabs-ZgbyuqWI.js";import{C as v}from"./circuit-board-CDaRFIRg.js";import{A as b}from"./app-window-C_29jRGv.js";import{S as R}from"./server-BMkKp4mD.js";import{T as _}from"./tag-DrRrhomQ.js";import{C as g}from"./calendar-BUdYTaMy.js";import{a as p}from"./utils-DVqAV-fM.js";import{B as f}from"./button-DyydDRsx.js";import{B as x}from"./badge-DQslapAQ.js";import"./supabase-BVXwAj-b.js";import"./ui-components-CC8ri8vc.js";import"./skeleton-BpBTDtqW.js";import"./arrow-left-CoG1BIxl.js";import"./alert-dialog-CezvzVue.js";import"./star-DSolPrZb.js";import"./card-j9p50iY2.js";import"./tabs-1TreP9X3.js";try{let r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new r.Error().stack;o&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[o]="0770fa7d-9ce3-4c80-b0fa-a04cd58ac14e",r._sentryDebugIdIdentifier="sentry-dbid-0770fa7d-9ce3-4c80-b0fa-a04cd58ac14e")}catch{}function F({server:r}){return e.jsx(C,{cards:[{title:"Resources",items:[{icon:e.jsx(v,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"AI Tools",value:0},{icon:e.jsx(b,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Applications",value:0}]},{title:"Server Details",items:[{icon:e.jsx(R,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Type:",value:r.type},{icon:e.jsx(_,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Tags:",value:r.tags.length}]},{title:"Timeline",items:[{icon:e.jsx(g,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Created:",value:r.created_at?p(new Date(r.created_at),"PPP"):"Unknown"},{icon:e.jsx(g,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Updated:",value:r.updated_at?p(new Date(r.updated_at),"PPP"):"Unknown"}]}]})}function L({server:r}){return e.jsx(E,{defaultTab:"ai-tools",tabs:[{value:"overview",label:"Overview",description:"Detailed information about this server",content:e.jsx("p",{className:"text-muted-foreground",children:r.description||"No detailed description available for this server."})},{value:"applications",label:"Applications",description:"Applications associated with this server",content:e.jsxs("div",{className:"text-center p-6",children:[e.jsx(b,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Applications"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"There are no applications associated with this server yet."}),e.jsx(f,{children:"Deploy Application"})]})},{value:"ai-tools",label:"AI Tools",description:"AI tools deployed on this server",content:e.jsxs("div",{className:"text-center p-6",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No AI Tools"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"There are no AI tools deployed on this server yet."}),e.jsx(f,{children:"Deploy AI Tool"})]})},{value:"logs",label:"Logs",description:"System logs and monitoring",content:e.jsx("div",{className:"text-center p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Log monitoring is not available for this server."})})}]})}function se(){const{id:r}=S(),o=I(),[t,h]=d.useState(null),[y,c]=d.useState(!0),{tags:w}=A();d.useEffect(()=>{(async()=>{if(r){c(!0);try{console.log("Fetching server details for ID/slug:",r);let a=m.from("servers").select("*");/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(r)?a=a.eq("id",r):a=a.eq("slug",r);const{data:i,error:n}=await a.single();if(n)throw console.error("Error fetching server details:",n),l.error(`Failed to load server: ${n.message}`),n;console.log("Fetched server details:",i),h(i)}catch(a){console.error("Error in server fetch:",a),l.error("Failed to load server details")}finally{c(!1)}}})()},[r]);const j=()=>{o(-1)},N=()=>{t&&o(`/servers/${t.slug}/edit`)},k=async()=>{if(t)try{const{error:s}=await m.from("servers").delete().eq("id",t.id);if(s)throw s;l.success("Server deleted successfully"),o("/servers")}catch(s){console.error("Error deleting server:",s),l.error(`Failed to delete server: ${s.message}`)}},T=s=>{switch(s.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"development":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"maintenance":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"deprecated":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"planning":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"inactive":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},D=()=>{var s;return(s=t.tags)==null?void 0:s.map(a=>{var i;const u=((i=w.find(n=>n.id===a))==null?void 0:i.name)||"Unknown";return e.jsx(x,{variant:"secondary",children:u},a)})};return e.jsx(P,{isLoading:y,resource:t,resourceType:"Server",onGoBack:j,renderResource:()=>e.jsxs(e.Fragment,{children:[e.jsx(B,{title:t.name,description:t.description,isFavorite:t.favorite,status:t.status,tags:[e.jsx(x,{variant:"outline",children:t.type},"type"),...D()],statusColorClass:T(t.status),onEdit:N,onDelete:k,resourceId:t.id,resourceType:"Server"}),e.jsx(F,{server:t}),e.jsx(L,{server:t})]})})}export{se as default};
//# sourceMappingURL=ServerDetailPage-GoGSSGtY.js.map
