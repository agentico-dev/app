import{r,j as e}from"./react-vendor-vQbJYzIl.js";import{C as i,a as n,b as c,d as o,c as u,e as Q}from"./card-ChR_bl_w.js";import{I as x}from"./input-XSgfOhYa.js";import{L as h}from"./label-tTPk6JAI.js";import{B as l}from"./button-BuS9drMY.js";import{T as X,a as $,b as C,c as S}from"./tabs-DZZcN9TG.js";import{c as ee,u as se,b as ae,f as re}from"./index-CF5hanbC.js";import{A as le,b as te,a as ie}from"./avatar-CAZLLb8f.js";import{A as w,b as B,a as T}from"./alert-DZZgGKs4.js";import{T as ne}from"./textarea-BcJ2PB4q.js";import{S as p}from"./separator-DwpPlEwN.js";import{u as ce,P as oe}from"./usePlans-C0fWM6Jp.js";import{C as M}from"./circle-alert-eMFbQv7Z.js";import{C as de}from"./circle-check-big-DSfI6mx0.js";import{U as me}from"./user-Dg9zCL5Z.js";import{L as ue}from"./log-out-BmTRwzyV.js";import{T as U}from"./trash-2-D0RTXsuq.js";import"./ui-components-CaI0lto7.js";import"./supabase-uFuX7l-a.js";import"./utils-CP2dCvBX.js";import"./react-query-triPzI4C.js";import"./radio-group-txcae9LA.js";import"./circle-DOMuunts.js";import"./check-BwSTKJS0.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=ee("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);function Ue(){var I;const{user:t,profile:s,signOut:Y,loading:O}=se(),{toast:d}=ae(),{plans:R,currentPlan:j,updatePlan:z,cancelSubscription:V}=ce(),[P,A]=r.useState(!1),[m,f]=r.useState(""),[F,g]=r.useState(""),[_,v]=r.useState(""),[k,N]=r.useState(""),[E,y]=r.useState(""),[L,b]=r.useState(""),[D,J]=r.useState(""),[K,q]=r.useState("profile");if(O)return e.jsx("div",{className:"container py-10",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(i,{children:[e.jsx(n,{className:"text-center",children:e.jsx(c,{children:"Loading profile..."})}),e.jsx(o,{className:"space-y-4",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-10 bg-muted rounded"}),e.jsx("div",{className:"h-10 bg-muted rounded"}),e.jsx("div",{className:"h-20 bg-muted rounded"})]})})]})})});if(!t)return e.jsx("div",{className:"container py-10",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Profile Not Available"}),e.jsx(u,{children:"You need to be logged in to view your profile."})]}),e.jsx(o,{children:e.jsx(l,{asChild:!0,children:e.jsx("a",{href:"/login",children:"Log In"})})})]})});r.useEffect(()=>{s&&(f(s.full_name||""),g(s.bio||""),v(s.job_title||""),N(s.company||""))},[s]);const H=async()=>{if(t){A(!0),b(""),y("");try{const{error:a}=await re("profiles").update({full_name:m,bio:F,job_title:_,company:k,updated_at:new Date().toISOString()}).eq("id",t.id);if(a)throw a;y("Profile updated successfully"),d({title:"Profile updated",description:"Your profile has been updated successfully."})}catch(a){console.error("Error updating profile:",a),b(a.message||"Failed to update profile"),d({title:"Error updating profile",description:a.message||"There was an error updating your profile.",variant:"destructive"})}finally{A(!1)}}},W=async a=>{try{await z.mutateAsync(a),d({title:"Plan updated",description:"Your subscription plan has been updated successfully."})}catch(G){d({title:"Error updating plan",description:G.message||"Failed to update your plan.",variant:"destructive"})}},Z=()=>{V.mutate()};return e.jsx("div",{className:"container py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Your Profile"}),e.jsxs(X,{defaultValue:K,onValueChange:q,children:[e.jsxs($,{className:"mb-6",children:[e.jsx(C,{value:"profile",children:"Profile"}),e.jsx(C,{value:"account",children:"Account"}),e.jsx(C,{value:"plan",children:"Subscription"})]}),e.jsx(S,{value:"profile",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Profile Information"}),e.jsx(u,{children:"Update your personal information and public profile."})]}),e.jsxs(o,{className:"space-y-6",children:[L&&e.jsxs(w,{variant:"destructive",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx(B,{children:"Error"}),e.jsx(T,{children:L})]}),E&&e.jsxs(w,{variant:"default",className:"bg-green-50 border-green-200",children:[e.jsx(de,{className:"h-4 w-4 text-green-500"}),e.jsx(B,{children:"Success"}),e.jsx(T,{children:E})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[e.jsx("div",{className:"flex flex-col items-center space-y-2",children:e.jsxs(le,{className:"h-24 w-24",children:[e.jsx(te,{src:((I=t.user_metadata)==null?void 0:I.avatar_url)||""}),e.jsx(ie,{className:"text-lg",children:m?m.charAt(0).toUpperCase():e.jsx(me,{})})]})}),e.jsxs("div",{className:"flex-1 space-y-4 w-full",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"fullName",children:"Full Name"}),e.jsx(x,{id:"fullName",value:m,onChange:a=>f(a.target.value),placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"bio",children:"Bio"}),e.jsx(ne,{id:"bio",value:F,onChange:a=>g(a.target.value),placeholder:"Tell us a bit about yourself",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"jobTitle",children:"Job Title"}),e.jsx(x,{id:"jobTitle",value:_,onChange:a=>v(a.target.value),placeholder:"Your position or role"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company",children:"Company / Organization"}),e.jsx(x,{id:"company",value:k,onChange:a=>N(a.target.value),placeholder:"Where you work"})]})]})]})]})]}),e.jsxs(Q,{className:"flex justify-between",children:[e.jsx(l,{variant:"outline",onClick:()=>{s&&(f(s.full_name||""),g(s.bio||""),v(s.job_title||""),N(s.company||"")),b(""),y("")},children:"Reset"}),e.jsx(l,{onClick:H,disabled:P,children:P?"Saving...":"Save Changes"})]})]})}),e.jsx(S,{value:"account",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Account Settings"}),e.jsx(u,{children:"Manage your account settings and preferences."})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Email"}),e.jsx("p",{className:"text-muted-foreground",children:t.email})]}),e.jsx(p,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Password"}),e.jsx("p",{className:"text-muted-foreground",children:"Change your account password."}),e.jsxs(l,{variant:"outline",className:"mt-2",children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Change Password"]})]}),e.jsx(p,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Logout"}),e.jsx("p",{className:"text-muted-foreground",children:"Sign out of your account."}),e.jsxs(l,{variant:"outline",className:"mt-2",onClick:Y,children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),e.jsx(p,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium text-destructive",children:"Danger Zone"}),e.jsx("p",{className:"text-muted-foreground",children:"Permanently delete your account and all associated data."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[e.jsx(x,{placeholder:"Type 'delete' to confirm",value:D,onChange:a=>J(a.target.value),className:"max-w-xs"}),e.jsxs(l,{variant:"destructive",disabled:D!=="delete",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Delete Account"]})]})]})]})]})}),e.jsx(S,{value:"plan",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Subscription Plan"}),e.jsx(u,{children:"Manage your subscription and billing."})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx(T,{children:"During the beta period, all plans are free. Choose the plan that best suits your needs."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Current Plan: ",e.jsx("span",{className:"text-primary capitalize",children:(j==null?void 0:j.name)||"Free"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Select a plan to change your subscription:"}),e.jsx(oe,{plans:R,selectedPlan:(s==null?void 0:s.plan_id)||"free",onSelectPlan:W})]}),e.jsx(p,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium text-destructive",children:"Cancel Subscription"}),e.jsx("p",{className:"text-muted-foreground",children:"Cancel your subscription and downgrade to the Free plan."}),e.jsxs(l,{variant:"outline",className:"mt-2",onClick:Z,disabled:(s==null?void 0:s.plan_id)==="free"||!(s!=null&&s.plan_id),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Cancel Subscription"]})]})]})]})})]})]})})}export{Ue as default};
