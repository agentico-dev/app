{"version":3,"file":"ProfilePage-7W72zsan.js","sources":["../../src/pages/ProfilePage.tsx"],"sourcesContent":["\nimport React, { useState } from 'react';\nimport { Outlet, useLocation } from 'react-router';\nimport { useAuth } from '@/hooks/useAuth';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useForm } from 'react-hook-form';\nimport { toast } from 'sonner';\nimport { apiTable } from '@/utils/supabaseHelpers';\nimport { supabase } from '@/integrations/supabase/client';\n\nconst ProfilePage = () => {\n  const location = useLocation();\n  const { user, profile, loading } = useAuth();\n  const [isUpdating, setIsUpdating] = useState(false);\n  \n  const { register, handleSubmit, formState: { errors } } = useForm({\n    defaultValues: {\n      full_name: profile?.full_name || user?.user_metadata?.full_name || '',\n      job_title: profile?.job_title || '',\n      company: profile?.company || '',\n      bio: profile?.bio || '',\n    }\n  });\n\n  const onSubmit = async (data) => {\n    if (!user) return;\n    \n    setIsUpdating(true);\n    try {\n      // Update user metadata in auth\n      const { error: authError } = await supabase.auth.updateUser({\n        data: { full_name: data.full_name }\n      });\n      \n      if (authError) throw authError;\n      \n      // Update profile in profiles table\n      const { error: profileError } = await apiTable('profiles')\n        .upsert({\n          id: user.id,\n          full_name: data.full_name,\n          job_title: data.job_title,\n          company: data.company,\n          bio: data.bio,\n          updated_at: new Date().toISOString()\n        });\n      \n      if (profileError) throw profileError;\n      \n      toast.success('Profile updated successfully');\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      toast.error(`Failed to update profile: ${error.message || 'Unknown error'}`);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n  \n  // Check if we're on a nested route\n  const isNestedRoute = location.pathname !== '/profile' && location.pathname !== '/settings';\n  \n  if (isNestedRoute) {\n    return <Outlet />;\n  }\n  \n  if (loading) {\n    return <div className=\"flex items-center justify-center p-8\">Loading profile...</div>;\n  }\n\n  if (!user) {\n    return (\n      <Card className=\"max-w-md mx-auto my-8\">\n        <CardHeader>\n          <CardTitle>Profile Not Available</CardTitle>\n          <CardDescription>You need to be logged in to view your profile.</CardDescription>\n        </CardHeader>\n      </Card>\n    );\n  }\n\n  const userInitials = (profile?.full_name || user.user_metadata?.full_name || user.email || '')\n    .split(' ')\n    .map(part => part[0])\n    .join('')\n    .toUpperCase();\n\n  return (\n    <div className=\"container mx-auto py-8\">\n      <Tabs defaultValue=\"profile\" className=\"w-full max-w-4xl mx-auto\">\n        <TabsList className=\"grid w-full grid-cols-2\">\n          <TabsTrigger value=\"profile\">Profile</TabsTrigger>\n          <TabsTrigger value=\"settings\">Account Settings</TabsTrigger>\n        </TabsList>\n        \n        <TabsContent value=\"profile\">\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center gap-4\">\n                <Avatar className=\"h-16 w-16\">\n                  <AvatarImage src={user.user_metadata?.avatar_url} />\n                  <AvatarFallback>{userInitials}</AvatarFallback>\n                </Avatar>\n                <div>\n                  <CardTitle>{profile?.full_name || user.user_metadata?.full_name || user.email}</CardTitle>\n                  <CardDescription>{user.email}</CardDescription>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n                <div className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"full_name\">Full Name</Label>\n                      <Input \n                        id=\"full_name\" \n                        {...register('full_name')} \n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"job_title\">Job Title</Label>\n                      <Input \n                        id=\"job_title\" \n                        {...register('job_title')} \n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"company\">Company</Label>\n                    <Input \n                      id=\"company\" \n                      {...register('company')} \n                    />\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"bio\">Bio</Label>\n                    <Input \n                      id=\"bio\" \n                      {...register('bio')} \n                    />\n                  </div>\n                </div>\n                \n                <Button type=\"submit\" disabled={isUpdating}>\n                  {isUpdating ? 'Saving...' : 'Save Changes'}\n                </Button>\n              </form>\n            </CardContent>\n          </Card>\n        </TabsContent>\n        \n        <TabsContent value=\"settings\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Account Settings</CardTitle>\n              <CardDescription>Manage your account settings and preferences.</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-lg font-medium\">Email</h3>\n                  <p className=\"text-sm text-muted-foreground\">{user.email}</p>\n                </div>\n                \n                <div>\n                  <h3 className=\"text-lg font-medium\">Change Password</h3>\n                  <p className=\"text-sm text-muted-foreground mb-4\">\n                    Update your password to improve account security.\n                  </p>\n                  <Button variant=\"outline\">Change Password</Button>\n                </div>\n                \n                <div className=\"border-t pt-6\">\n                  <h3 className=\"text-lg font-medium text-destructive\">Danger Zone</h3>\n                  <p className=\"text-sm text-muted-foreground mb-4\">\n                    Delete your account and all associated data.\n                  </p>\n                  <Button variant=\"destructive\">Delete Account</Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n      \n      <Outlet />\n    </div>\n  );\n};\n\nexport default ProfilePage;\n"],"names":["ProfilePage","location","useLocation","user","profile","loading","useAuth","isUpdating","setIsUpdating","useState","register","handleSubmit","errors","useForm","_a","onSubmit","data","authError","supabase","profileError","apiTable","toast","error","Outlet","jsx","Card","CardHeader","CardTitle","CardDescription","userInitials","_b","part","jsxs","Tabs","TabsList","TabsTrigger","TabsContent","Avatar","AvatarImage","_c","AvatarFallback","_d","CardContent","Label","Input","Button"],"mappings":"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"}