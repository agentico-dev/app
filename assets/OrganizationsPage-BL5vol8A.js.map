{"version":3,"file":"OrganizationsPage-BL5vol8A.js","sources":["../../src/components/organizations/OrganizationsList.tsx","../../src/pages/OrganizationsPage.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Link } from 'react-router';\nimport { Building, Users, Calendar } from 'lucide-react';\nimport { Organization } from '@/types/organization';\nimport { format } from 'date-fns';\nimport { Skeleton } from '@/components/ui/skeleton';\n\ninterface OrganizationsListProps {\n  organizations: Organization[];\n  isLoading: boolean;\n}\n\nexport default function OrganizationsList({ organizations, isLoading }: OrganizationsListProps) {\n  if (isLoading) {\n    return (\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n        {[1, 2, 3].map((i) => (\n          <Card key={i} className=\"overflow-hidden\">\n            <CardHeader className=\"p-4\">\n              <Skeleton className=\"h-5 w-3/4\" />\n              <Skeleton className=\"h-4 w-1/2 mt-2\" />\n            </CardHeader>\n            <CardContent className=\"p-4\">\n              <Skeleton className=\"h-4 w-full mb-2\" />\n              <Skeleton className=\"h-4 w-3/4\" />\n            </CardContent>\n            <CardFooter className=\"p-4 flex justify-between\">\n              <Skeleton className=\"h-4 w-1/4\" />\n              <Skeleton className=\"h-9 w-1/4\" />\n            </CardFooter>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  if (organizations.length === 0) {\n    return (\n      <Card className=\"p-8 flex flex-col items-center justify-center\">\n        <Building className=\"h-12 w-12 text-muted-foreground mb-4\" />\n        <h3 className=\"text-xl font-semibold mb-2\">No organizations found</h3>\n        <p className=\"text-muted-foreground text-center max-w-md mb-4\">\n          {organizations.length === 0\n            ? \"There are no organizations available yet. Create your first organization to get started.\"\n            : \"You're not a member of any organizations yet.\"}\n        </p>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n      {organizations.map((org) => (\n        <Card key={org.id} className=\"overflow-hidden\">\n          <CardHeader className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-lg\">{org.name}</CardTitle>\n              {org.role && (\n                <Badge variant=\"outline\" className=\"ml-2\">\n                  {org.role}\n                </Badge>\n              )}\n            </div>\n            <CardDescription className=\"line-clamp-2\">\n              {org.description || 'No description available'}\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"p-4 pt-0\">\n            <div className=\"flex items-center text-sm text-muted-foreground mb-2\">\n              <Calendar className=\"mr-2 h-4 w-4\" />\n              Created {format(new Date(org.created_at), 'MMM d, yyyy')}\n            </div>\n          </CardContent>\n          <CardFooter className=\"p-4 flex justify-between\">\n            <div className=\"flex items-center\">\n              <Users className=\"h-4 w-4 mr-1 text-muted-foreground\" />\n              <span className=\"text-sm\">Members</span>\n            </div>\n            <Button asChild>\n              <Link to={`/orgs/${org.slug}`}>View</Link>\n            </Button>\n          </CardFooter>\n        </Card>\n      ))}\n    </div>\n  );\n}\n","\nimport React, { useState, useEffect } from 'react';\nimport { useOrganizations } from '@/hooks/useOrganizations';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Plus, Building, Users, CreditCard, FolderKanban, Shield } from 'lucide-react';\nimport { useToast } from '@/components/ui/use-toast';\nimport { useAuth } from '@/hooks/useAuth';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport OrganizationsList from '@/components/organizations/OrganizationsList';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport OrganizationSelector from '@/components/organizations/OrganizationSelector';\n\nexport default function OrganizationsPage() {\n  const { organizations, userOrganizations, isLoading, error, isAuthenticated, createOrganization } = useOrganizations();\n  const { session } = useAuth();\n  const { toast } = useToast();\n  const [open, setOpen] = useState(false);\n  const [newOrg, setNewOrg] = useState({\n    name: '',\n    slug: '',\n    description: '',\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [selectedOrgId, setSelectedOrgId] = useState<string>('');\n\n  // Set the selected organization when user organizations load\n  useEffect(() => {\n    if (userOrganizations && userOrganizations.length > 0 && !selectedOrgId) {\n      setSelectedOrgId(userOrganizations[0].id);\n    }\n  }, [userOrganizations, selectedOrgId]);\n\n  const handleCreateOrganization = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!session.user) {\n      toast({\n        title: 'Authentication required',\n        description: 'Please sign in to create an organization.',\n        variant: 'destructive',\n      });\n      return;\n    }\n    \n    if (!newOrg.name) {\n      toast({\n        title: 'Required field missing',\n        description: 'Please provide a name for the organization.',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n    \n    try {\n      console.log('Starting organization creation...', newOrg);      \n      \n      await createOrganization.mutateAsync(newOrg);\n      \n      toast({\n        title: 'Success!',\n        description: `Organization \"${newOrg.name}\" was created successfully.`,\n      });\n      \n      // Close the dialog and reset form\n      setOpen(false);\n      setNewOrg({ name: '', slug: '', description: '' });\n    } catch (error: any) {\n      console.error('Error creating organization:', error);\n      toast({\n        title: 'Failed to create organization',\n        description: error?.message || 'An unexpected error occurred. Please try again.',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const name = e.target.value;\n    setNewOrg({\n      ...newOrg,\n      name,\n      slug: name.toLowerCase().replace(/\\s+/g, '-'),\n    });\n  };\n\n  return (\n    <div className=\"container py-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">Organizations</h1>\n          <p className=\"text-muted-foreground\">Manage your organizations, teams and projects.</p>\n        </div>\n        <Dialog \n          open={open} \n          onOpenChange={(isOpen) => {\n            // Reset the form when dialog is closed\n            if (!isOpen) {\n              setNewOrg({ name: '', slug: '', description: '' });\n            }\n            setOpen(isOpen);\n          }}\n        >\n          <DialogTrigger asChild>\n            <Button disabled={!isAuthenticated}>\n              <Plus className=\"mr-2 h-4 w-4\" />\n              New Organization\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create new organization</DialogTitle>\n              <DialogDescription>\n                Add a new organization to manage teams, projects, and billing.\n              </DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleCreateOrganization}>\n              <div className=\"grid gap-4 py-4\">\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"name\">Name</Label>\n                  <Input\n                    id=\"name\"\n                    value={newOrg.name}\n                    onChange={handleNameChange}\n                    placeholder=\"Acme Inc.\"\n                    required\n                  />\n                </div>\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"slug\">Slug</Label>\n                  <Input\n                    id=\"slug\"\n                    value={newOrg.slug}\n                    onChange={(e) => setNewOrg({ ...newOrg, slug: e.target.value })}\n                    placeholder=\"acme-inc\"\n                  />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Used in URLs: app.agentico.dev/org/{newOrg.slug || 'your-slug'}\n                  </p>\n                </div>\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"description\">Description</Label>\n                  <Textarea\n                    id=\"description\"\n                    value={newOrg.description}\n                    onChange={(e) => setNewOrg({ ...newOrg, description: e.target.value })}\n                    placeholder=\"A short description of your organization\"\n                  />\n                </div>\n              </div>\n              <DialogFooter>\n                <Button type=\"submit\" disabled={isSubmitting || createOrganization.isPending}>\n                  {isSubmitting || createOrganization.isPending ? 'Creating...' : 'Create Organization'}\n                </Button>\n              </DialogFooter>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {!isAuthenticated && (\n        <Alert variant=\"default\" className=\"bg-amber-50 border-amber-200\">\n          <Shield className=\"h-4 w-4 text-amber-500\" />\n          <AlertTitle>Limited Access Mode</AlertTitle>\n          <AlertDescription>\n            You're browsing in read-only mode. Sign in to create or manage organizations.\n          </AlertDescription>\n        </Alert>\n      )}\n\n      <Tabs defaultValue=\"all\" className=\"space-y-4\">\n        <TabsList>\n          <TabsTrigger value=\"all\">All Organizations</TabsTrigger>\n          {isAuthenticated && <TabsTrigger value=\"my-orgs\">My Organizations</TabsTrigger>}\n        </TabsList>\n        <TabsContent value=\"all\" className=\"space-y-4\">\n          <OrganizationsList organizations={organizations || []} isLoading={isLoading} />\n        </TabsContent>\n        {isAuthenticated && (\n          <TabsContent value=\"my-orgs\" className=\"space-y-4\">\n            <OrganizationsList organizations={userOrganizations || []} isLoading={isLoading} />\n          </TabsContent>\n        )}\n      </Tabs>\n    </div>\n  );\n}\n"],"names":["OrganizationsList","organizations","isLoading","jsx","i","jsxs","Card","CardHeader","Skeleton","CardContent","CardFooter","Building","org","CardTitle","Badge","CardDescription","Calendar","format","Users","Button","Link","OrganizationsPage","userOrganizations","isAuthenticated","createOrganization","useOrganizations","session","useAuth","toast","useToast","open","setOpen","useState","newOrg","setNewOrg","isSubmitting","setIsSubmitting","selectedOrgId","setSelectedOrgId","useEffect","handleCreateOrganization","e","error","handleNameChange","name","Dialog","isOpen","DialogTrigger","Plus","DialogContent","DialogHeader","DialogTitle","DialogDescription","Label","Input","Textarea","DialogFooter","Alert","Shield","AlertTitle","AlertDescription","Tabs","TabsList","TabsTrigger","TabsContent"],"mappings":"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"}