import{r as j,t as w,x as C,j as e,L as I}from"./react-vendor-D9Z7L--9.js";import{B as c}from"./button-DyydDRsx.js";import{C as F,a as N,b as P,c as v,d as D}from"./card-j9p50iY2.js";import{I as S}from"./input-C9MDm0T4.js";import{T as _}from"./textarea-CWRfT5sV.js";import{F as k,a as p,b as f,c as h,d as x,e as g,f as b}from"./form-DOOl_B3Y.js";import{u as z,d as a,g as E,s as T}from"./index-AU1k0GBq.js";import{A}from"./arrow-left-CoG1BIxl.js";import"./ui-components-CC8ri8vc.js";import"./label-Cq7s04FH.js";import"./supabase-BVXwAj-b.js";import"./utils-DVqAV-fM.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new t.Error().stack;o&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[o]="0a33051c-f8f2-4d31-8cc2-c200089c5326",t._sentryDebugIdIdentifier="sentry-dbid-0a33051c-f8f2-4d31-8cc2-c200089c5326")}catch{}function L(){const[t,o]=j.useState(!1),n=w(),{session:l}=z(),s=C({defaultValues:{name:"",description:"",status:"Development",tags:[]}});j.useEffect(()=>{const r=localStorage.getItem("selectedOrganizationId");r&&s.setValue("organization_id",r)},[s]);const y=async r=>{if(!l.user){a.error("You need to be logged in to create a project");return}const d=localStorage.getItem("selectedOrganizationId");if(!d){a.error("Please select an organization from the top navigation bar");return}o(!0);try{const i=E(r.name),{data:m,error:u}=await T.from("projects").insert({name:r.name,slug:i,description:r.description,status:r.status,tags:r.tags,user_id:l.user.id,organization_id:d}).select().single();if(u)throw u;a.success("Project created successfully"),n(m?`/projects/${m.slug}`:"/projects")}catch(i){console.error("Error creating project:",i),a.error("Failed to create project")}finally{o(!1)}};return e.jsx(k,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(y),className:"space-y-6",children:[e.jsx(p,{control:s.control,name:"name",render:({field:r})=>e.jsxs(f,{children:[e.jsx(h,{children:"Project Name"}),e.jsx(x,{children:e.jsx(S,{placeholder:"Enter project name",...r})}),e.jsx(g,{children:"The name of your project."}),e.jsx(b,{})]})}),e.jsx(p,{control:s.control,name:"description",render:({field:r})=>e.jsxs(f,{children:[e.jsx(h,{children:"Description"}),e.jsx(x,{children:e.jsx(_,{placeholder:"Describe your project",className:"min-h-[120px]",...r})}),e.jsx(g,{children:"A brief description of what this project is about."}),e.jsx(b,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>n("/projects"),children:"Cancel"}),e.jsx(c,{type:"submit",disabled:t,children:t?"Creating...":"Create Project"})]})]})})}function Q(){return e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx(c,{variant:"ghost",asChild:!0,children:e.jsxs(I,{to:"/projects",children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Back to Projects"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Project"}),e.jsx("p",{className:"text-muted-foreground",children:"Set up a new project workspace for your team"})]}),e.jsxs(F,{children:[e.jsxs(N,{children:[e.jsx(P,{children:"Project Details"}),e.jsx(v,{children:"Fill in the details to create your new project"})]}),e.jsx(D,{children:e.jsx(L,{})})]})]})}export{Q as default};
//# sourceMappingURL=NewProjectPage-CKLUnULa.js.map
