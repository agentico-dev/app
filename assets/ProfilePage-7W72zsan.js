import{o as D,r as F,x as E,j as e,O as v}from"./react-vendor-D9Z7L--9.js";import{u as P,s as U,f as L,d as _}from"./index-AU1k0GBq.js";import{C as d,a as c,b as m,c as u,d as N}from"./card-j9p50iY2.js";import{A as k,b as B,a as O}from"./avatar-gyXOaXmo.js";import{B as x}from"./button-DyydDRsx.js";import{I as n}from"./input-C9MDm0T4.js";import{L as o}from"./label-Cq7s04FH.js";import{T as R,a as V,b as w,c as C}from"./tabs-1TreP9X3.js";import"./supabase-BVXwAj-b.js";import"./ui-components-CC8ri8vc.js";import"./utils-DVqAV-fM.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new t.Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="b315eff1-c8a9-4f70-a795-c11a67356925",t._sentryDebugIdIdentifier="sentry-dbid-b315eff1-c8a9-4f70-a795-c11a67356925")}catch{}const ee=()=>{var j,p,b,g;const t=D(),{user:a,profile:s,loading:I}=P(),[h,f]=F.useState(!1),{register:l,handleSubmit:S,formState:{errors:H}}=E({defaultValues:{full_name:(s==null?void 0:s.full_name)||((j=a==null?void 0:a.user_metadata)==null?void 0:j.full_name)||"",job_title:(s==null?void 0:s.job_title)||"",company:(s==null?void 0:s.company)||"",bio:(s==null?void 0:s.bio)||""}}),T=async r=>{if(a){f(!0);try{const{error:i}=await U.auth.updateUser({data:{full_name:r.full_name}});if(i)throw i;const{error:y}=await L("profiles").upsert({id:a.id,full_name:r.full_name,job_title:r.job_title,company:r.company,bio:r.bio,updated_at:new Date().toISOString()});if(y)throw y;_.success("Profile updated successfully")}catch(i){console.error("Error updating profile:",i),_.error(`Failed to update profile: ${i.message||"Unknown error"}`)}finally{f(!1)}}};if(t.pathname!=="/profile"&&t.pathname!=="/settings")return e.jsx(v,{});if(I)return e.jsx("div",{className:"flex items-center justify-center p-8",children:"Loading profile..."});if(!a)return e.jsx(d,{className:"max-w-md mx-auto my-8",children:e.jsxs(c,{children:[e.jsx(m,{children:"Profile Not Available"}),e.jsx(u,{children:"You need to be logged in to view your profile."})]})});const A=((s==null?void 0:s.full_name)||((p=a.user_metadata)==null?void 0:p.full_name)||a.email||"").split(" ").map(r=>r[0]).join("").toUpperCase();return e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs(R,{defaultValue:"profile",className:"w-full max-w-4xl mx-auto",children:[e.jsxs(V,{className:"grid w-full grid-cols-2",children:[e.jsx(w,{value:"profile",children:"Profile"}),e.jsx(w,{value:"settings",children:"Account Settings"})]}),e.jsx(C,{value:"profile",children:e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(k,{className:"h-16 w-16",children:[e.jsx(B,{src:(b=a.user_metadata)==null?void 0:b.avatar_url}),e.jsx(O,{children:A})]}),e.jsxs("div",{children:[e.jsx(m,{children:(s==null?void 0:s.full_name)||((g=a.user_metadata)==null?void 0:g.full_name)||a.email}),e.jsx(u,{children:a.email})]})]})}),e.jsx(N,{children:e.jsxs("form",{onSubmit:S(T),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"full_name",children:"Full Name"}),e.jsx(n,{id:"full_name",...l("full_name")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"job_title",children:"Job Title"}),e.jsx(n,{id:"job_title",...l("job_title")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"company",children:"Company"}),e.jsx(n,{id:"company",...l("company")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"bio",children:"Bio"}),e.jsx(n,{id:"bio",...l("bio")})]})]}),e.jsx(x,{type:"submit",disabled:h,children:h?"Saving...":"Save Changes"})]})})]})}),e.jsx(C,{value:"settings",children:e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(m,{children:"Account Settings"}),e.jsx(u,{children:"Manage your account settings and preferences."})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.email})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Change Password"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Update your password to improve account security."}),e.jsx(x,{variant:"outline",children:"Change Password"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-destructive",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Delete your account and all associated data."}),e.jsx(x,{variant:"destructive",children:"Delete Account"})]})]})})]})})]}),e.jsx(v,{})]})};export{ee as default};
//# sourceMappingURL=ProfilePage-7W72zsan.js.map
