import{r as u,l as y,o as F,j as e,L as w}from"./react-vendor-BIgZFnT2.js";import{B as i}from"./button-BwNwf_Dd.js";import{C as N,a as P,b as v,c as I,d as S}from"./card-V8-Ke11t.js";import{I as z}from"./input-BLgNcvcB.js";import{T as D}from"./textarea-Bzd9kmtz.js";import{F as k,a as p,b as x,c as h,d as f,e as g,f as b}from"./form-CwII6-SG.js";import{u as E,d as t,g as A,s as L}from"./index-CCNkFhSt.js";import{A as T}from"./arrow-left-DQ-A3jIw.js";import"./data-management-CvhHSD84.js";import"./ui-components-CeV64dF6.js";import"./label-DmJGSaxI.js";import"./utils-CP2dCvBX.js";function B(){const[n,c]=u.useState(!1),o=y(),{session:l}=E(),s=F({defaultValues:{name:"",description:"",status:"Development",tags:[]}});u.useEffect(()=>{const r=localStorage.getItem("selectedOrganizationId");r&&s.setValue("organization_id",r)},[s]);const C=async r=>{if(!l.user){t.error("You need to be logged in to create a project");return}const d=localStorage.getItem("selectedOrganizationId");if(!d){t.error("Please select an organization from the top navigation bar");return}c(!0);try{const a=A(r.name),{data:m,error:j}=await L.from("projects").insert({name:r.name,slug:a,description:r.description,status:r.status,tags:r.tags,user_id:l.user.id,organization_id:d}).select().single();if(j)throw j;t.success("Project created successfully"),o(m?`/projects/${m.slug}`:"/projects")}catch(a){console.error("Error creating project:",a),t.error("Failed to create project")}finally{c(!1)}};return e.jsx(k,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(C),className:"space-y-6",children:[e.jsx(p,{control:s.control,name:"name",render:({field:r})=>e.jsxs(x,{children:[e.jsx(h,{children:"Project Name"}),e.jsx(f,{children:e.jsx(z,{placeholder:"Enter project name",...r})}),e.jsx(g,{children:"The name of your project."}),e.jsx(b,{})]})}),e.jsx(p,{control:s.control,name:"description",render:({field:r})=>e.jsxs(x,{children:[e.jsx(h,{children:"Description"}),e.jsx(f,{children:e.jsx(D,{placeholder:"Describe your project",className:"min-h-[120px]",...r})}),e.jsx(g,{children:"A brief description of what this project is about."}),e.jsx(b,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>o("/projects"),children:"Cancel"}),e.jsx(i,{type:"submit",disabled:n,children:n?"Creating...":"Create Project"})]})]})})}function Q(){return e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx(i,{variant:"ghost",asChild:!0,children:e.jsxs(w,{to:"/projects",children:[e.jsx(T,{className:"mr-2 h-4 w-4"})," Back to Projects"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Project"}),e.jsx("p",{className:"text-muted-foreground",children:"Set up a new project workspace for your team"})]}),e.jsxs(N,{children:[e.jsxs(P,{children:[e.jsx(v,{children:"Project Details"}),e.jsx(I,{children:"Fill in the details to create your new project"})]}),e.jsx(S,{children:e.jsx(B,{})})]})]})}export{Q as default};
