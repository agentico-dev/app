import{j as e,L as b,r as x}from"./react-vendor-D9Z7L--9.js";import{T as k,a as I,b as v,c as w}from"./tabs-1TreP9X3.js";import{A as L,b as M,a as E}from"./alert-B5yO3tQn.js";import{u as $,s as B,d as C}from"./index-AU1k0GBq.js";import{B as p}from"./button-DyydDRsx.js";import{I as R}from"./input-C9MDm0T4.js";import{D as V,a as Y,b as z,c as G,d as H,e as j}from"./dropdown-menu-vu4DTcgk.js";import{P as Q}from"./plus-9bUF_s5A.js";import{S as W}from"./search-DW8VQmka.js";import{F as q}from"./filter-CmYZIYFF.js";import{B as P}from"./badge-DQslapAQ.js";import{C as y,a as S,b as J,c as K,d as D,e as A}from"./card-j9p50iY2.js";import{S as F}from"./star-DSolPrZb.js";import{C as O}from"./circuit-board-CDaRFIRg.js";import{A as U}from"./app-window-C_29jRGv.js";import{S as X}from"./server-BMkKp4mD.js";import{S as m}from"./skeleton-BpBTDtqW.js";import{F as Z}from"./folder-B8ksawWf.js";import{S as ee}from"./shield-D6OKR2KR.js";import"./ui-components-CC8ri8vc.js";import"./supabase-BVXwAj-b.js";import"./utils-DVqAV-fM.js";import"./chevron-right-B6yav54R.js";import"./check-B_vNfbYE.js";import"./circle-Bd03-FbO.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new s.Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="d3f39ea7-0710-4fe4-8308-1a0b54703d83",s._sentryDebugIdIdentifier="sentry-dbid-d3f39ea7-0710-4fe4-8308-1a0b54703d83")}catch{}function se({searchQuery:s,setSearchQuery:t,setActiveFilter:r,isAuthenticated:l}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Projects"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your AI project workspaces"})]}),e.jsx(p,{asChild:!0,children:e.jsxs(b,{to:l?"/projects/new":"/login",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"New Project"]})})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(W,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(R,{type:"search",placeholder:"Search projects...",className:"pl-8 w-full md:max-w-xs",value:s,onChange:o=>t(o.target.value)})]}),e.jsxs(V,{children:[e.jsx(Y,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"ml-auto",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Filter"]})}),e.jsxs(z,{align:"end",children:[e.jsx(G,{children:"Filter by"}),e.jsx(H,{}),e.jsx(j,{onClick:()=>r(null),children:"All Projects"}),e.jsx(j,{onClick:()=>r("favorite"),children:"Favorites"}),e.jsx(j,{onClick:()=>r("active"),children:"Active Projects"}),e.jsx(j,{onClick:()=>r("development"),children:"In Development"})]})]})]})]})}function re({project:s}){return e.jsxs(y,{className:"overflow-hidden card-hover",children:[e.jsx(S,{className:"p-4 pb-0 flex justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(J,{className:"text-lg",children:s.name}),s.favorite&&e.jsx(F,{className:"h-4 w-4 fill-yellow-400 text-yellow-400 ml-2"})]}),e.jsx(K,{className:"mt-1",children:s.description||"No description available"})]})}),e.jsxs(D,{className:"p-4 pt-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags&&s.tags.map(t=>e.jsx(P,{variant:"secondary",className:"text-xs",children:t},t))}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[s.tools_count||s.toolsCount||0," tools"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[s.applications_count||s.applicationsCount||0," apps"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[s.servers_count||s.serversCount||0," servers"]})]})]})]}),e.jsxs(A,{className:"p-4 pt-0 flex justify-between",children:[e.jsx(P,{className:`
          ${s.status==="Active"?"tag-green":""}
          ${s.status==="Development"?"tag-purple":""}
          ${s.status==="Maintenance"?"tag-yellow":""}
          ${s.status==="Archived"?"tag-red":""}
        `,children:s.status}),e.jsx(p,{asChild:!0,children:e.jsx(b,{to:`/projects/${s.slug}`,children:"View Details"})})]})]})}function te({count:s=3}){return e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:s}).map((t,r)=>e.jsxs(y,{className:"overflow-hidden",children:[e.jsxs(S,{className:"p-4",children:[e.jsx(m,{className:"h-6 w-3/4 mb-2"}),e.jsx(m,{className:"h-4 w-full"})]}),e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{className:"h-4 w-full"}),e.jsx(m,{className:"h-4 w-3/4"})]})}),e.jsxs(A,{className:"p-4 flex justify-between",children:[e.jsx(m,{className:"h-9 w-20"}),e.jsx(m,{className:"h-9 w-24"})]})]},r))})}function ae({type:s,searchQuery:t,isAuthenticated:r}){let l="No projects found",o=e.jsx(Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),i="There are no projects available yet. Create your first project to get started.";return s==="favorites"?(l="No favorite projects",o=e.jsx(F,{className:"h-12 w-12 text-muted-foreground mb-4"}),i="You haven't marked any projects as favorites yet."):s==="search"&&t&&(i="No projects match your search criteria. Try adjusting your filters."),e.jsxs(y,{className:"p-8 flex flex-col items-center justify-center",children:[o,e.jsx("h3",{className:"text-xl font-semibold mb-2",children:l}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md mb-4",children:i}),r&&s!=="search"&&e.jsx(p,{asChild:!0,children:e.jsx(b,{to:"/projects/new",children:"Create Project"})})]})}function N({projects:s,isLoading:t,type:r,searchQuery:l,isAuthenticated:o}){if(t)return e.jsx(te,{count:r==="all"?3:2});const i=r==="recent"?s.slice(0,3):s,d=r==="favorites"?i.filter(n=>n.favorite):i;return d.length===0?e.jsx(ae,{type:r==="favorites"?"favorites":l?"search":"all",searchQuery:l,isAuthenticated:o}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.map(n=>e.jsx(re,{project:n},n.id))})}function Te(){const[s,t]=x.useState(""),[r,l]=x.useState(null),[o,i]=x.useState([]),[d,n]=x.useState(!0),{session:T}=$(),u=!!T.user;x.useEffect(()=>{(async()=>{n(!0);try{console.log("Fetching projects from public schema");const{data:a,error:f}=await B.from("projects").select("*").order("created_at",{ascending:!1});if(f)throw console.error("Error fetching projects:",f),C.error(`Failed to load projects: ${f.message}`),f;console.log("Fetched projects:",a);const _=a.map(h=>({...h,toolsCount:h.tools_count||0,applicationsCount:h.applications_count||0,serversCount:h.servers_count||0}));i(_)}catch(a){console.error("Error fetching projects:",a),C.error("Failed to load projects")}finally{n(!1)}})()},[]);const g=o.filter(c=>{const a=c.name.toLowerCase().includes(s.toLowerCase())||c.description&&c.description.toLowerCase().includes(s.toLowerCase());return r?r==="favorite"?a&&c.favorite:r==="active"?a&&c.status==="Active":r==="development"?a&&c.status==="Development":a:a});return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx(se,{searchQuery:s,setSearchQuery:t,setActiveFilter:l,isAuthenticated:u}),!u&&e.jsxs(L,{variant:"default",className:"bg-amber-50 border-amber-200",children:[e.jsx(ee,{className:"h-4 w-4 text-amber-500"}),e.jsx(M,{children:"Limited Access Mode"}),e.jsx(E,{children:"You're browsing in read-only mode. Sign in to create or manage projects."})]}),e.jsxs(k,{defaultValue:"all",children:[e.jsxs(I,{children:[e.jsx(v,{value:"all",children:"All Projects"}),e.jsx(v,{value:"favorites",children:"Favorites"}),e.jsx(v,{value:"recent",children:"Recent"})]}),e.jsx(w,{value:"all",className:"mt-6",children:e.jsx(N,{projects:g,isLoading:d,type:"all",searchQuery:s,isAuthenticated:u})}),e.jsx(w,{value:"favorites",className:"mt-6",children:e.jsx(N,{projects:g,isLoading:d,type:"favorites",searchQuery:s,isAuthenticated:u})}),e.jsx(w,{value:"recent",className:"mt-6",children:e.jsx(N,{projects:g,isLoading:d,type:"recent",searchQuery:s,isAuthenticated:u})})]})]})}export{Te as ProjectsPage,Te as default};
//# sourceMappingURL=ProjectsPage-C6xthFL4.js.map
