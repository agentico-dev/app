import{j as e,L as b,r as d,u as L}from"./react-vendor-TyuC8qxg.js";import{B as w}from"./button-CrjcO5GY.js";import{T as I,a as F,b as j,c as v}from"./tabs-CrlmdC9I.js";import{u as S,s as O,t as E}from"./index-D5uhiMQB.js";import{F as P}from"./FilterControls-CucXZNt6.js";import{A as k}from"./ApplicationCard-D6j3G0U9.js";import{A as B,a as M}from"./alert-CHHnXdcp.js";import{P as Q}from"./plus-Cp1aOaD9.js";import{S as q}from"./shield-C_069MtE.js";import"./ui-components-CAmpQbeX.js";import"./supabase-DLYUZSEu.js";import"./utils-DVqAV-fM.js";import"./input-DR-AxXjG.js";import"./select-BTYSfX8Z.js";import"./chevron-down-Bdv2PV_A.js";import"./check-CG9NCPd3.js";import"./chevron-up-DyG2CS1O.js";import"./popover-CnfoHWxe.js";import"./dialog-uiTA_umQ.js";import"./search-BR1MFiIH.js";import"./badge-bpxx3q91.js";import"./separator-Be9YcOHX.js";import"./filter-9wtyw57Y.js";import"./card-DAAmTFtc.js";import"./star-sfp0mj0X.js";import"./tag-y-CCJCIb.js";import"./app-window-BtmSL7uK.js";import"./circuit-board-URXJjArR.js";try{let a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new a.Error().stack;n&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[n]="66f6999d-3164-408c-a889-663021b2cdfc",a._sentryDebugIdIdentifier="sentry-dbid-66f6999d-3164-408c-a889-663021b2cdfc")}catch{}function u({type:a}){const{session:n}=S(),r=!!n.user;switch(a){case"loading":return e.jsx("div",{className:"flex justify-center p-8",children:e.jsx("p",{children:"Loading applications..."})});case"error":return e.jsx("div",{className:"flex justify-center p-8",children:e.jsx("p",{className:"text-red-500",children:"Failed to load applications"})});case"no-applications":return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("p",{className:"mb-4 text-muted-foreground",children:"No applications found"}),e.jsx(w,{asChild:!0,children:e.jsx(b,{to:r?"/applications/new":"/login",children:"Create your first application"})})]});case"no-favorites":return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("p",{className:"mb-4 text-muted-foreground",children:"No favorite applications found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark applications as favorites to see them here"})]});default:return null}}function y({isLoading:a,error:n,applications:r,tabValue:l}){const c=l==="recent"?[...r].sort((o,m)=>new Date(m.updated_at).getTime()-new Date(o.updated_at).getTime()).slice(0,6):l==="favorites"?r.filter(o=>o.favorite):r;return a?e.jsx(u,{type:"loading"}):n?e.jsx(u,{type:"error"}):c.length===0?l==="favorites"?e.jsx(u,{type:"no-favorites"}):e.jsx(u,{type:"no-applications"}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:c.map(o=>e.jsx(k,{application:o},o.id))})}function ge(){const[a,n]=d.useState(""),[r,l]=d.useState(null),[c,o]=d.useState("all"),[m,N]=d.useState([]),{session:A,signOut:z}=S(),p=!!A.user,{data:f=[],isLoading:x,error:g}=L({queryKey:["applications"],queryFn:async()=>{try{const{data:t,error:i}=await O.from("applications").select("*").order("created_at",{ascending:!1});if(i)throw new Error(i.message);return t.map(s=>({id:s.id,name:s.name,description:s.description||"",category:s.category||"Other",status:(s.status||"active").toLowerCase(),favorite:s.favorite||!1,endpoints_count:s.endpoints_count||0,tools_count:s.tools_count||0,tags:s.tags||[],created_at:s.created_at||new Date().toISOString(),updated_at:s.updated_at||new Date().toISOString(),slug:s.slug||s.name.toLowerCase().replace(/\s+/g,"-"),organization_id:s.organization_id||""}))}catch(t){return console.error("Unexpected error fetching applications:",t),E({title:"Unexpected error",description:"Failed to load applications. Please try again later.",variant:"destructive"}),[]}},enabled:p}),_=Array.from(new Set(f.flatMap(t=>t.tags||[]).filter(Boolean))).map(t=>({id:t,name:t,created_at:new Date().toISOString()})),T=[{value:"all",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"draft",label:"Draft"}],C=t=>{o(t)},D=t=>{N(t)},h=f.filter(t=>{const i=t.name.toLowerCase().includes(a.toLowerCase())||t.description.toLowerCase().includes(a.toLowerCase());return r?r==="favorite"?i&&t.favorite:r==="active"?i&&t.status==="active":r==="category"?i&&t.category===r:i:i});return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-accent-500 bg-clip-text text-transparent",children:"Applications"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your external API interfaces and applications"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(w,{asChild:!0,children:e.jsxs(b,{to:p?"/applications/new":"/login",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"New Application"]})})})]}),!p&&e.jsxs(B,{variant:"default",className:"bg-amber-50 border-amber-200",children:[e.jsx(q,{className:"h-4 w-4 text-amber-500"}),e.jsx(M,{children:"You are currently in limited access mode. Some features may be restricted."})]}),e.jsx(P,{searchQuery:a,setSearchQuery:n,activeFilter:r,setActiveFilter:l,applications:f,statusOptions:T,selectedStatus:c,onStatusChange:C,tags:_,selectedTags:m,onTagsChange:D}),e.jsxs(I,{defaultValue:"all",children:[e.jsxs(F,{children:[e.jsx(j,{value:"all",children:"All Applications"}),e.jsx(j,{value:"favorites",children:"Favorites"}),e.jsx(j,{value:"recent",children:"Recent"})]}),e.jsx(v,{value:"all",className:"mt-6",children:e.jsx(y,{isLoading:x,error:g,applications:h,tabValue:"all"})}),e.jsx(v,{value:"favorites",className:"mt-6",children:e.jsx(y,{isLoading:x,error:g,applications:h.filter(t=>t.favorite),tabValue:"favorites"})}),e.jsx(v,{value:"recent",className:"mt-6",children:e.jsx(y,{isLoading:x,error:g,applications:[...h].sort((t,i)=>new Date(i.updated_at).getTime()-new Date(t.updated_at).getTime()).slice(0,6),tabValue:"recent"})})]})]})}export{ge as ApplicationsPage,ge as default};
//# sourceMappingURL=ApplicationsPage-WoizklNW.js.map
