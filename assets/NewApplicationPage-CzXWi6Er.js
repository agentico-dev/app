import{r as A,t as F,x as I,j as e,L as D}from"./react-vendor-D9Z7L--9.js";import{B as x}from"./button-DyydDRsx.js";import{C as N,a as v,b as S,c as z,d as k}from"./card-j9p50iY2.js";import{I as y}from"./input-C9MDm0T4.js";import{T}from"./textarea-CWRfT5sV.js";import{F as E,a as d,b as p,c as m,d as u,e as g,f as h}from"./form-DOOl_B3Y.js";import{u as _,d as l,s as w}from"./index-AU1k0GBq.js";import{A as L}from"./arrow-left-CoG1BIxl.js";import"./ui-components-CC8ri8vc.js";import"./label-Cq7s04FH.js";import"./supabase-BVXwAj-b.js";import"./utils-DVqAV-fM.js";try{let r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new r.Error().stack;s&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[s]="d26002d6-54ad-4c32-8885-0e0084bd48e9",r._sentryDebugIdIdentifier="sentry-dbid-d26002d6-54ad-4c32-8885-0e0084bd48e9")}catch{}function $(r){let s=r.toLowerCase();return s=s.replace(/\s+/g,"-"),s=s.replace(/[^a-z0-9-]/g,""),/^[a-z]/.test(s)||(s="a-"+s),/[a-z0-9]$/.test(s)||(s=s+"0"),s=s.slice(0,63),s}function B(){const[r,s]=A.useState(!1),o=F(),{session:n}=_(),i=I({defaultValues:{name:"",description:"",category:"Web",status:"Development",tags:[]}}),C=async t=>{if(!(n!=null&&n.user)){l.error("You need to be logged in to create an application");return}s(!0);try{const a=localStorage.getItem("selectedOrganizationId");if(!a){l.error("Please select an organization from the top navigation bar"),s(!1);return}const f=$(t.name),{data:j,error:c}=await w.from("applications").insert({name:t.name,slug:f,description:t.description,category:t.category,status:t.status,tags:t.tags,user_id:n.user.id,organization_id:a}).select().single();if(c)throw console.error("Error creating application:",c),c;if(l.success("Application created successfully"),j){const{data:b}=await w.from("organizations").select("slug").eq("id",a).single();o(b?`/apps/${b.slug}@${f}`:`/apps/${j.id}`)}else o("/applications")}catch(a){console.error("Error creating application:",a),l.error(`Failed to create application: ${a.message||"Unknown error"}`)}finally{s(!1)}};return e.jsx(E,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(C),className:"space-y-6",children:[e.jsx(d,{control:i.control,name:"name",render:({field:t})=>e.jsxs(p,{children:[e.jsx(m,{children:"Application Name"}),e.jsx(u,{children:e.jsx(y,{placeholder:"Enter application name",...t})}),e.jsx(g,{children:"The name of your application."}),e.jsx(h,{})]})}),e.jsx(d,{control:i.control,name:"description",render:({field:t})=>e.jsxs(p,{children:[e.jsx(m,{children:"Description"}),e.jsx(u,{children:e.jsx(T,{placeholder:"Describe your application",className:"min-h-[120px]",...t})}),e.jsx(g,{children:"A brief description of what this application does."}),e.jsx(h,{})]})}),e.jsx(d,{control:i.control,name:"category",render:({field:t})=>e.jsxs(p,{children:[e.jsx(m,{children:"Category"}),e.jsx(u,{children:e.jsx(y,{placeholder:"e.g., Web, Mobile, Desktop",...t})}),e.jsx(g,{children:"The category this application belongs to."}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>o("/applications"),children:"Cancel"}),e.jsx(x,{type:"submit",disabled:r,children:r?"Creating...":"Create Application"})]})]})})}function K(){return e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx(x,{variant:"ghost",asChild:!0,children:e.jsxs(D,{to:"/applications",children:[e.jsx(L,{className:"mr-2 h-4 w-4"})," Back to Applications"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Application"}),e.jsx("p",{className:"text-muted-foreground",children:"Set up a new application in your AI ecosystem"})]}),e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Application Details"}),e.jsx(z,{children:"Fill in the details to create your new application"})]}),e.jsx(k,{children:e.jsx(B,{})})]})]})}export{K as default};
//# sourceMappingURL=NewApplicationPage-CzXWi6Er.js.map
