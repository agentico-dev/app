import{j as e,m as D,t as A,r as d}from"./react-vendor-pyaEZ1K4.js";import{e as C,s as m,d as n}from"./index-CcMg1OWm.js";import{R as I,a as P,D as B,b as E}from"./ResourceTabs-Doma72gu.js";import{C as v}from"./circuit-board-DfSKitmh.js";import{A as h}from"./app-window-Dn0yrFOX.js";import{S as R}from"./server-p7lls_R4.js";import{T as F}from"./tag-CaTyM1z0.js";import{C as p}from"./calendar-upK1r45r.js";import{a as g}from"./utils-CP2dCvBX.js";import{B as x}from"./button-DgiK2e7X.js";import{B as f}from"./badge-BUdM99C2.js";import"./supabase-lLY5SY09.js";import"./ui-components-C95S_aop.js";import"./skeleton-M0Bsayo2.js";import"./arrow-left-7XQ4XEQi.js";import"./alert-dialog-JOSxnyD4.js";import"./star-BAQKbNG7.js";import"./card-ByfXnz1U.js";import"./tabs--csU1GM2.js";function L({server:r}){return e.jsx(I,{cards:[{title:"Resources",items:[{icon:e.jsx(v,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"AI Tools",value:0},{icon:e.jsx(h,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Applications",value:0}]},{title:"Server Details",items:[{icon:e.jsx(R,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Type:",value:r.type},{icon:e.jsx(F,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Tags:",value:r.tags.length}]},{title:"Timeline",items:[{icon:e.jsx(p,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Created:",value:r.created_at?g(new Date(r.created_at),"PPP"):"Unknown"},{icon:e.jsx(p,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Updated:",value:r.updated_at?g(new Date(r.updated_at),"PPP"):"Unknown"}]}]})}function U({server:r}){return e.jsx(P,{defaultTab:"ai-tools",tabs:[{value:"overview",label:"Overview",description:"Detailed information about this server",content:e.jsx("p",{className:"text-muted-foreground",children:r.description||"No detailed description available for this server."})},{value:"applications",label:"Applications",description:"Applications associated with this server",content:e.jsxs("div",{className:"text-center p-6",children:[e.jsx(h,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Applications"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"There are no applications associated with this server yet."}),e.jsx(x,{children:"Deploy Application"})]})},{value:"ai-tools",label:"AI Tools",description:"AI tools deployed on this server",content:e.jsxs("div",{className:"text-center p-6",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No AI Tools"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"There are no AI tools deployed on this server yet."}),e.jsx(x,{children:"Deploy AI Tool"})]})},{value:"logs",label:"Logs",description:"System logs and monitoring",content:e.jsx("div",{className:"text-center p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Log monitoring is not available for this server."})})}]})}function se(){const{id:r}=D(),l=A(),[t,b]=d.useState(null),[y,c]=d.useState(!0),{tags:j}=C();d.useEffect(()=>{(async()=>{if(r){c(!0);try{console.log("Fetching server details for ID/slug:",r);let a=m.from("servers").select("*");/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(r)?a=a.eq("id",r):a=a.eq("slug",r);const{data:i,error:o}=await a.single();if(o)throw console.error("Error fetching server details:",o),n.error(`Failed to load server: ${o.message}`),o;console.log("Fetched server details:",i),b(i)}catch(a){console.error("Error in server fetch:",a),n.error("Failed to load server details")}finally{c(!1)}}})()},[r]);const w=()=>{l(-1)},N=()=>{t&&l(`/servers/${t.slug}/edit`)},k=async()=>{if(t)try{const{error:s}=await m.from("servers").delete().eq("id",t.id);if(s)throw s;n.success("Server deleted successfully"),l("/servers")}catch(s){console.error("Error deleting server:",s),n.error(`Failed to delete server: ${s.message}`)}},S=s=>{switch(s.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"development":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"maintenance":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"deprecated":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"planning":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"inactive":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},T=()=>{var s;return(s=t.tags)==null?void 0:s.map(a=>{var i;const u=((i=j.find(o=>o.id===a))==null?void 0:i.name)||"Unknown";return e.jsx(f,{variant:"secondary",children:u},a)})};return e.jsx(B,{isLoading:y,resource:t,resourceType:"Server",onGoBack:w,renderResource:()=>e.jsxs(e.Fragment,{children:[e.jsx(E,{title:t.name,description:t.description,isFavorite:t.favorite,status:t.status,tags:[e.jsx(f,{variant:"outline",children:t.type},"type"),...T()],statusColorClass:S(t.status),onEdit:N,onDelete:k,resourceId:t.id,resourceType:"Server"}),e.jsx(L,{server:t}),e.jsx(U,{server:t})]})})}export{se as default};
