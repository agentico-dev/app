import{r as A,t as F,w as I,j as e,L as D}from"./react-vendor-TyuC8qxg.js";import{B as h}from"./button-CrjcO5GY.js";import{C as N,a as v,b as S,d as z,c as k}from"./card-DAAmTFtc.js";import{I as y}from"./input-DR-AxXjG.js";import{T}from"./textarea-CzliNkd6.js";import{F as E,a as p,b as d,c as m,d as u,e as g,f}from"./form-Cq2_NWTX.js";import{u as _,g as c,s as w}from"./index-D5uhiMQB.js";import{A as L}from"./arrow-left-B-jkszN4.js";import"./ui-components-CAmpQbeX.js";import"./label-ppAVubx0.js";import"./supabase-DLYUZSEu.js";import"./utils-DVqAV-fM.js";try{let r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new r.Error().stack;s&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[s]="2fd7ed3f-5ac5-4062-980e-c9d77563b652",r._sentryDebugIdIdentifier="sentry-dbid-2fd7ed3f-5ac5-4062-980e-c9d77563b652")}catch{}function $(r){let s=r.toLowerCase();return s=s.replace(/\s+/g,"-"),s=s.replace(/[^a-z0-9-]/g,""),/^[a-z]/.test(s)||(s="a-"+s),/[a-z0-9]$/.test(s)||(s=s+"0"),s=s.slice(0,63),s}function B(){const[r,s]=A.useState(!1),o=F(),{session:n}=_(),i=I({defaultValues:{name:"",description:"",category:"Web",status:"Development",tags:[]}}),C=async t=>{if(!(n!=null&&n.user)){c.error("You need to be logged in to create an application");return}s(!0);try{const a=localStorage.getItem("selectedOrganizationId");if(!a){c.error("Please select an organization from the top navigation bar"),s(!1);return}const x=$(t.name),{data:j,error:l}=await w.from("applications").insert({name:t.name,slug:x,description:t.description,category:t.category,status:t.status,tags:t.tags,user_id:n.user.id,organization_id:a}).select().single();if(l)throw console.error("Error creating application:",l),l;if(c.success("Application created successfully"),j){const{data:b}=await w.from("organizations").select("slug").eq("id",a).single();o(b?`/apps/${b.slug}@${x}`:`/apps/${j.id}`)}else o("/applications")}catch(a){console.error("Error creating application:",a),c.error(`Failed to create application: ${a.message||"Unknown error"}`)}finally{s(!1)}};return e.jsx(E,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(C),className:"space-y-6",children:[e.jsx(p,{control:i.control,name:"name",render:({field:t})=>e.jsxs(d,{children:[e.jsx(m,{children:"Application Name"}),e.jsx(u,{children:e.jsx(y,{placeholder:"Enter application name",...t})}),e.jsx(g,{children:"The name of your application."}),e.jsx(f,{})]})}),e.jsx(p,{control:i.control,name:"description",render:({field:t})=>e.jsxs(d,{children:[e.jsx(m,{children:"Description"}),e.jsx(u,{children:e.jsx(T,{placeholder:"Describe your application",className:"min-h-[120px]",...t})}),e.jsx(g,{children:"A brief description of what this application does."}),e.jsx(f,{})]})}),e.jsx(p,{control:i.control,name:"category",render:({field:t})=>e.jsxs(d,{children:[e.jsx(m,{children:"Category"}),e.jsx(u,{children:e.jsx(y,{placeholder:"e.g., Web, Mobile, Desktop",...t})}),e.jsx(g,{children:"The category this application belongs to."}),e.jsx(f,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>o("/applications"),children:"Cancel"}),e.jsx(h,{type:"submit",disabled:r,children:r?"Creating...":"Create Application"})]})]})})}function K(){return e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx(h,{variant:"ghost",asChild:!0,children:e.jsxs(D,{to:"/applications",children:[e.jsx(L,{className:"mr-2 h-4 w-4"})," Back to Applications"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Application"}),e.jsx("p",{className:"text-muted-foreground",children:"Set up a new application in your AI ecosystem"})]}),e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Application Details"}),e.jsx(z,{children:"Fill in the details to create your new application"})]}),e.jsx(k,{children:e.jsx(B,{})})]})]})}export{K as default};
//# sourceMappingURL=NewApplicationPage-CaVTlaCz.js.map
