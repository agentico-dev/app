import{R as D,j as e,r as A,u as q,L as J,m as W,t as X}from"./react-vendor-TyuC8qxg.js";import{c as w,f as ee,s as M,u as se}from"./index-D5uhiMQB.js";import{T as ae,a as re,b as C,c as k}from"./tabs-CrlmdC9I.js";import{C as j,a as p,b as y,d as b,c as g,e as ie}from"./card-DAAmTFtc.js";import{B as l}from"./button-CrjcO5GY.js";import{A as B,b as E,a as O}from"./alert-CHHnXdcp.js";import{S as v}from"./skeleton-DgsA2FIA.js";import{a as _}from"./useOrganizations-BiQcvcEU.js";import{A as te,a as ne}from"./avatar-BaIhr9EP.js";import{D as U,a as V,b as H,c as R,d as Y,e as Z,f as K}from"./dialog-uiTA_umQ.js";import{I as Q}from"./input-DR-AxXjG.js";import{L as N}from"./label-ppAVubx0.js";import{S as le,a as ce,b as de,c as oe,d as S}from"./select-BTYSfX8Z.js";import{C as me}from"./circle-plus-BAxS78JD.js";import{B as $}from"./badge-bpxx3q91.js";import{Z as P}from"./zap-J7eR3ESZ.js";import{C as he}from"./circle-alert-BjO_ybi6.js";import{T as xe}from"./textarea-CzliNkd6.js";import{F as G}from"./folder-BD33vTSM.js";import{a as je}from"./utils-DVqAV-fM.js";import{A as F}from"./arrow-left-B-jkszN4.js";import{S as ue}from"./shield-C_069MtE.js";import{U as pe}from"./users-BFvKAdN_.js";import"./supabase-DLYUZSEu.js";import"./ui-components-CAmpQbeX.js";import"./chevron-down-Bdv2PV_A.js";import"./check-CG9NCPd3.js";import"./chevron-up-DyG2CS1O.js";try{let r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new r.Error().stack;t&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[t]="4852f24a-d68e-494c-a0be-4c22fce8d904",r._sentryDebugIdIdentifier="sentry-dbid-4852f24a-d68e-494c-a0be-4c22fce8d904")}catch{}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=w("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=w("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=w("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=w("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function fe({organization:r,members:t,isLoading:d,isAuthenticated:c,isOrgMember:i}){const{addMember:m}=_(r.id),[n,h]=D.useState(!1),[o,x]=D.useState({email:"",role:"member"}),f=async s=>{s.preventDefault();try{await m.mutateAsync(o),h(!1),x({email:"",role:"member"})}catch(a){console.error("Error adding member:",a)}};return d?e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(y,{children:"Team Members"}),e.jsx(b,{children:"Manage your organization's team members."})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-5 w-32 bg-muted rounded"}),e.jsx("div",{className:"h-4 w-24 bg-muted rounded"})]})]},s))})})]}):e.jsxs(j,{children:[e.jsxs(p,{className:"flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Team Members"}),e.jsx(b,{children:"Manage your organization's team members."})]}),e.jsxs(U,{open:n,onOpenChange:h,children:[e.jsx(V,{asChild:!0,children:e.jsxs(l,{disabled:!c||!i,children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Invite Member"]})}),e.jsxs(H,{children:[e.jsxs(R,{children:[e.jsx(Y,{children:"Invite team member"}),e.jsx(Z,{children:"Add a new member to your organization. They will receive an email invitation."})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"email",children:"Email"}),e.jsx(Q,{id:"email",type:"email",value:o.email,onChange:s=>x({...o,email:s.target.value}),placeholder:"coworker@example.com",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"role",children:"Role"}),e.jsxs(le,{value:o.role,onValueChange:s=>x({...o,role:s}),children:[e.jsx(ce,{id:"role",children:e.jsx(de,{placeholder:"Select a role"})}),e.jsxs(oe,{children:[e.jsx(S,{value:"admin",children:"Admin"}),e.jsx(S,{value:"member",children:"Member"})]})]})]})]}),e.jsx(K,{children:e.jsx(l,{type:"submit",disabled:m.isPending,children:m.isPending?"Inviting...":"Invite Member"})})]})]})]})]}),e.jsx(g,{children:t.length===0?e.jsxs("div",{className:"text-center p-6",children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No team members yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Invite team members to collaborate with you in this organization."}),c&&i&&e.jsxs(l,{onClick:()=>h(!0),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Invite Member"]})]}):e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(te,{children:e.jsx(ne,{children:s.user_id.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.user_id}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:s.role})]})]}),c&&i&&s.role!=="owner"&&e.jsx(l,{variant:"outline",size:"sm",disabled:!i,children:"Remove"})]},s.id))})})]})}function ye({organization:r,isAuthenticated:t,isOrgMember:d}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(y,{children:"Current Plan"}),e.jsx(b,{children:"Manage your subscription and billing information."})]}),e.jsxs(g,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Free Plan"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Basic features for small organizations"})]}),e.jsx($,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100",children:"Current Plan"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-green-500"}),e.jsx("span",{children:"Up to 3 team members"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-green-500"}),e.jsx("span",{children:"5 projects"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-green-500"}),e.jsx("span",{children:"Basic analytics"})]})]})]}),e.jsx(ie,{children:e.jsxs(l,{disabled:!t||!d,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Upgrade Plan"]})})]}),e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(y,{children:"Payment Methods"}),e.jsx(b,{children:"Manage your payment methods and billing history."})]}),e.jsx(g,{children:!t||!d?e.jsxs(B,{children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx(E,{children:"Access restricted"}),e.jsx(O,{children:"You need to sign in and be a member of this organization to view payment methods."})]}):e.jsxs("div",{className:"text-center p-6",children:[e.jsx(z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No payment methods"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't added any payment methods yet."}),e.jsx(l,{children:"Add Payment Method"})]})})]})]})}function be({organization:r,isAuthenticated:t,isOrgMember:d}){const{toast:c}=ee(),[i,m]=A.useState(!1),[n,h]=A.useState({name:"",description:""}),{data:o,isLoading:x,refetch:f}=q({queryKey:["organization-projects",r.id],queryFn:async()=>{console.log("Fetching projects for organization:",r.id);const{data:a,error:u}=await M.from("projects").select("*").eq("organization_id",r.id);if(u)throw console.error("Error fetching projects:",u),c({title:"Error fetching projects",description:u.message,variant:"destructive"}),u;return console.log("Fetched projects:",a),a}}),s=async a=>{a.preventDefault();try{const{data:u,error:T}=await M.from("projects").insert({name:n.name,description:n.description,organization_id:r.id,status:"active"}).select();if(T)throw T;c({title:"Project created",description:"Your new project has been created successfully."}),m(!1),h({name:"",description:""}),f()}catch(u){console.error("Error creating project:",u),c({title:"Error creating project",description:u.message,variant:"destructive"})}};return x?e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(y,{children:"Projects"}),e.jsx(b,{children:"Projects in this organization."})]}),e.jsx(g,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2,3,4].map(a=>e.jsxs(j,{children:[e.jsxs(p,{className:"p-4",children:[e.jsx(v,{className:"h-5 w-3/4"}),e.jsx(v,{className:"h-4 w-1/2 mt-2"})]}),e.jsx(g,{className:"p-4 pt-0",children:e.jsx(v,{className:"h-4 w-full"})})]},a))})})]}):e.jsxs(j,{children:[e.jsxs(p,{className:"flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Projects"}),e.jsx(b,{children:"Projects in this organization."})]}),e.jsxs(U,{open:i,onOpenChange:m,children:[e.jsx(V,{asChild:!0,children:e.jsxs(l,{disabled:!t||!d,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"New Project"]})}),e.jsxs(H,{children:[e.jsxs(R,{children:[e.jsx(Y,{children:"Create a new project"}),e.jsx(Z,{children:"Add a new project to your organization."})]}),e.jsxs("form",{onSubmit:s,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"name",children:"Project Name"}),e.jsx(Q,{id:"name",value:n.name,onChange:a=>h({...n,name:a.target.value}),placeholder:"My Awesome Project",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"description",children:"Description"}),e.jsx(xe,{id:"description",value:n.description,onChange:a=>h({...n,description:a.target.value}),placeholder:"Project description",rows:3})]})]}),e.jsx(K,{children:e.jsx(l,{type:"submit",children:"Create Project"})})]})]})]})]}),e.jsx(g,{children:!o||o.length===0?e.jsxs("div",{className:"text-center p-6",children:[e.jsx(G,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No projects yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"This organization doesn't have any projects yet."}),t&&d&&e.jsxs(l,{onClick:()=>m(!0),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Create Project"]})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:o.map(a=>e.jsxs(j,{children:[e.jsxs(p,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-lg",children:a.name}),e.jsx($,{className:a.status==="active"?"bg-green-100 text-green-800":a.status==="archived"?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800",children:a.status})]}),e.jsx(b,{className:"line-clamp-2",children:a.description||"No description available"})]}),e.jsxs(g,{className:"p-4 pt-0",children:[e.jsx("div",{className:"flex items-center text-sm text-muted-foreground",children:e.jsxs("span",{children:["Created ",je(new Date(a.created_at),"MMM d, yyyy")]})}),e.jsx("div",{className:"mt-4",children:e.jsx(l,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(J,{to:`/projects/${a.id}`,children:"View Project"})})})]})]},a.id))})})]})}function $e(){const{slug:r}=W(),t=X(),{session:d}=se(),c=!!d.user,{data:i,isLoading:m}=q({queryKey:["organization",r],queryFn:async()=>{if(!r)throw new Error("Organization slug is required");const{data:f,error:s}=await M.from("organizations").select("*").eq("slug",r).single();if(s)throw s;return f},enabled:!!r}),{members:n,isLoading:h}=_(i==null?void 0:i.id),x=!!(n==null?void 0:n.find(f=>{var s;return f.user_id===((s=d.user)==null?void 0:s.id)}));return m?e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx(v,{className:"h-8 w-1/3"}),e.jsx(v,{className:"h-4 w-1/4"}),e.jsx(v,{className:"h-64 w-full"})]}):i?e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsxs(l,{variant:"ghost",onClick:()=>t("/orgs"),children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Back to Organizations"]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:i.name}),e.jsx("p",{className:"text-muted-foreground",children:i.description||"No description available"})]})}),!c&&e.jsxs(B,{variant:"default",className:"bg-amber-50 border-amber-200",children:[e.jsx(ue,{className:"h-4 w-4 text-amber-500"}),e.jsx(E,{children:"Limited Access Mode"}),e.jsx(O,{children:"You're browsing in read-only mode. Sign in to manage this organization."})]}),e.jsxs(ae,{defaultValue:"teams",className:"space-y-4",children:[e.jsxs(re,{children:[e.jsxs(C,{value:"teams",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Teams"]}),e.jsxs(C,{value:"billing",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Billing"]}),e.jsxs(C,{value:"projects",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Projects"]})]}),e.jsx(k,{value:"teams",children:e.jsx(fe,{organization:i,members:n||[],isLoading:h,isAuthenticated:c,isOrgMember:x})}),e.jsx(k,{value:"billing",children:e.jsx(ye,{organization:i,isAuthenticated:c,isOrgMember:x})}),e.jsx(k,{value:"projects",children:e.jsx(be,{organization:i,isAuthenticated:c,isOrgMember:x})})]})]}):e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsxs(l,{variant:"ghost",onClick:()=>t("/orgs"),children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Back to Organizations"]}),e.jsxs(j,{className:"p-8 flex flex-col items-center justify-center",children:[e.jsx(ge,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Organization not found"}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md mb-4",children:"The organization you're looking for doesn't exist or you don't have permission to view it."}),e.jsx(l,{onClick:()=>t("/orgs"),children:"View All Organizations"})]})]})}export{$e as default};
//# sourceMappingURL=OrganizationDetailPage-CTi4VeHS.js.map
