import{j as e,L as b,r as u}from"./react-vendor-BIgZFnT2.js";import{T as k,a as M,b as g,c as N}from"./tabs-CN0fFsYQ.js";import{A as _,b as E,a as I}from"./alert-C8MQOhFk.js";import{u as $,s as B,d as y}from"./index-CXZKCkms.js";import{B as p}from"./button-kXSeDcDx.js";import{I as R}from"./input-BTxwilxg.js";import{D as V,a as Y,b as z,c as G,d as H,e as j}from"./dropdown-menu-ZuwzZCzM.js";import{P as Q}from"./plus-k4r-E7oI.js";import{S as W}from"./search-Bc2BGA1_.js";import{F as q}from"./filter-BKYiddMw.js";import{B as P}from"./badge-DR5nUtuV.js";import{C,a as S,b as J,c as K,d as A,e as F}from"./card-Nfi7rt9A.js";import{S as D}from"./star-CSFe5NNz.js";import{C as O}from"./circuit-board-C5aOSnNh.js";import{A as U}from"./app-window-BkgzxvZf.js";import{S as X}from"./server-B4Rvpcms.js";import{S as m}from"./skeleton-D3W9Prr0.js";import{F as Z}from"./folder-DAcdpxAq.js";import{S as ee}from"./shield-Y79D7Co8.js";import"./data-management-CvhHSD84.js";import"./ui-components-CeV64dF6.js";import"./utils-CP2dCvBX.js";import"./chevron-right-DA0uhEYm.js";import"./check-DggwCmCB.js";import"./circle-BMOyQHMR.js";function se({searchQuery:s,setSearchQuery:t,setActiveFilter:r,isAuthenticated:l}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Projects"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your AI project workspaces"})]}),e.jsx(p,{asChild:!0,children:e.jsxs(b,{to:l?"/projects/new":"/login",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"New Project"]})})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(W,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(R,{type:"search",placeholder:"Search projects...",className:"pl-8 w-full md:max-w-xs",value:s,onChange:o=>t(o.target.value)})]}),e.jsxs(V,{children:[e.jsx(Y,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"ml-auto",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Filter"]})}),e.jsxs(z,{align:"end",children:[e.jsx(G,{children:"Filter by"}),e.jsx(H,{}),e.jsx(j,{onClick:()=>r(null),children:"All Projects"}),e.jsx(j,{onClick:()=>r("favorite"),children:"Favorites"}),e.jsx(j,{onClick:()=>r("active"),children:"Active Projects"}),e.jsx(j,{onClick:()=>r("development"),children:"In Development"})]})]})]})]})}function re({project:s}){return e.jsxs(C,{className:"overflow-hidden card-hover",children:[e.jsx(S,{className:"p-4 pb-0 flex justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(J,{className:"text-lg",children:s.name}),s.favorite&&e.jsx(D,{className:"h-4 w-4 fill-yellow-400 text-yellow-400 ml-2"})]}),e.jsx(K,{className:"mt-1",children:s.description||"No description available"})]})}),e.jsxs(A,{className:"p-4 pt-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags&&s.tags.map(t=>e.jsx(P,{variant:"secondary",className:"text-xs",children:t},t))}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[s.tools_count||s.toolsCount||0," tools"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[s.applications_count||s.applicationsCount||0," apps"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[s.servers_count||s.serversCount||0," servers"]})]})]})]}),e.jsxs(F,{className:"p-4 pt-0 flex justify-between",children:[e.jsx(P,{className:`
          ${s.status==="Active"?"tag-green":""}
          ${s.status==="Development"?"tag-purple":""}
          ${s.status==="Maintenance"?"tag-yellow":""}
          ${s.status==="Archived"?"tag-red":""}
        `,children:s.status}),e.jsx(p,{asChild:!0,children:e.jsx(b,{to:`/projects/${s.slug}`,children:"View Details"})})]})]})}function te({count:s=3}){return e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:s}).map((t,r)=>e.jsxs(C,{className:"overflow-hidden",children:[e.jsxs(S,{className:"p-4",children:[e.jsx(m,{className:"h-6 w-3/4 mb-2"}),e.jsx(m,{className:"h-4 w-full"})]}),e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{className:"h-4 w-full"}),e.jsx(m,{className:"h-4 w-3/4"})]})}),e.jsxs(F,{className:"p-4 flex justify-between",children:[e.jsx(m,{className:"h-9 w-20"}),e.jsx(m,{className:"h-9 w-24"})]})]},r))})}function ae({type:s,searchQuery:t,isAuthenticated:r}){let l="No projects found",o=e.jsx(Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),i="There are no projects available yet. Create your first project to get started.";return s==="favorites"?(l="No favorite projects",o=e.jsx(D,{className:"h-12 w-12 text-muted-foreground mb-4"}),i="You haven't marked any projects as favorites yet."):s==="search"&&t&&(i="No projects match your search criteria. Try adjusting your filters."),e.jsxs(C,{className:"p-8 flex flex-col items-center justify-center",children:[o,e.jsx("h3",{className:"text-xl font-semibold mb-2",children:l}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md mb-4",children:i}),r&&s!=="search"&&e.jsx(p,{asChild:!0,children:e.jsx(b,{to:"/projects/new",children:"Create Project"})})]})}function w({projects:s,isLoading:t,type:r,searchQuery:l,isAuthenticated:o}){if(t)return e.jsx(te,{count:r==="all"?3:2});const i=r==="recent"?s.slice(0,3):s,d=r==="favorites"?i.filter(n=>n.favorite):i;return d.length===0?e.jsx(ae,{type:r==="favorites"?"favorites":l?"search":"all",searchQuery:l,isAuthenticated:o}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.map(n=>e.jsx(re,{project:n},n.id))})}function Le(){const[s,t]=u.useState(""),[r,l]=u.useState(null),[o,i]=u.useState([]),[d,n]=u.useState(!0),{session:L}=$(),x=!!L.user;u.useEffect(()=>{(async()=>{n(!0);try{console.log("Fetching projects from public schema");const{data:a,error:h}=await B.from("projects").select("*").order("created_at",{ascending:!1});if(h)throw console.error("Error fetching projects:",h),y.error(`Failed to load projects: ${h.message}`),h;console.log("Fetched projects:",a);const T=a.map(f=>({...f,toolsCount:f.tools_count||0,applicationsCount:f.applications_count||0,serversCount:f.servers_count||0}));i(T)}catch(a){console.error("Error fetching projects:",a),y.error("Failed to load projects")}finally{n(!1)}})()},[]);const v=o.filter(c=>{const a=c.name.toLowerCase().includes(s.toLowerCase())||c.description&&c.description.toLowerCase().includes(s.toLowerCase());return r?r==="favorite"?a&&c.favorite:r==="active"?a&&c.status==="Active":r==="development"?a&&c.status==="Development":a:a});return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx(se,{searchQuery:s,setSearchQuery:t,setActiveFilter:l,isAuthenticated:x}),!x&&e.jsxs(_,{variant:"default",className:"bg-amber-50 border-amber-200",children:[e.jsx(ee,{className:"h-4 w-4 text-amber-500"}),e.jsx(E,{children:"Limited Access Mode"}),e.jsx(I,{children:"You're browsing in read-only mode. Sign in to create or manage projects."})]}),e.jsxs(k,{defaultValue:"all",children:[e.jsxs(M,{children:[e.jsx(g,{value:"all",children:"All Projects"}),e.jsx(g,{value:"favorites",children:"Favorites"}),e.jsx(g,{value:"recent",children:"Recent"})]}),e.jsx(N,{value:"all",className:"mt-6",children:e.jsx(w,{projects:v,isLoading:d,type:"all",searchQuery:s,isAuthenticated:x})}),e.jsx(N,{value:"favorites",className:"mt-6",children:e.jsx(w,{projects:v,isLoading:d,type:"favorites",searchQuery:s,isAuthenticated:x})}),e.jsx(N,{value:"recent",className:"mt-6",children:e.jsx(w,{projects:v,isLoading:d,type:"recent",searchQuery:s,isAuthenticated:x})})]})]})}export{Le as ProjectsPage,Le as default};
