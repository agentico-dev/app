import{u as A,j as t,L as b}from"./react-vendor-TyuC8qxg.js";import{B as M}from"./button-CrjcO5GY.js";import{A as W,a as Y}from"./alert-CHHnXdcp.js";import{c as C,s as c,u as z}from"./index-D5uhiMQB.js";import{C as T,a as D,b as k,c as U,d as $}from"./card-DAAmTFtc.js";import{m as a}from"./proxy-B0qnXvvZ.js";import{B as q}from"./briefcase-BBeItzUj.js";import{A as B}from"./app-window-BtmSL7uK.js";import{S as F}from"./server-CWXdQjOI.js";import{W as K}from"./wrench-KjQ0gjjb.js";import{B as H}from"./badge-bpxx3q91.js";import{S as V}from"./shield-C_069MtE.js";import{U as G}from"./users-BFvKAdN_.js";import"./ui-components-CAmpQbeX.js";import"./supabase-DLYUZSEu.js";import"./utils-DVqAV-fM.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="22ec8f9a-b874-49e9-a244-de1cce5b67d5",e._sentryDebugIdIdentifier="sentry-dbid-22ec8f9a-b874-49e9-a244-de1cce5b67d5")}catch{}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=C("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=C("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=C("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),X=()=>{const e=new Date,r=e.getMonth(),s=e.getFullYear(),i=new Date(s,r,1).toISOString(),n=e.toISOString(),o=new Date(s,r-1,1).toISOString(),d=new Date(s,r,0,23,59,59,999).toISOString();return{currentMonthStart:i,currentMonthEnd:n,prevMonthStart:o,prevMonthEnd:d}};function Z(){return A({queryKey:["dashboard","metrics"],queryFn:async()=>{try{const{currentMonthStart:e,currentMonthEnd:r,prevMonthStart:s,prevMonthEnd:i}=X(),{count:n,error:o}=await c.from("projects").select("*",{count:"exact",head:!0}),{count:d,error:h}=await c.from("projects").select("*",{count:"exact",head:!0}).lt("created_at",i);if(o)throw o;if(h)throw h;const{count:p,error:x}=await c.from("applications").select("*",{count:"exact",head:!0}),{count:f,error:y}=await c.from("applications").select("*",{count:"exact",head:!0}).lt("created_at",i);if(x)throw x;if(y)throw y;const{count:u,error:l}=await c.from("servers").select("*",{count:"exact",head:!0}),{count:E,error:_}=await c.from("servers").select("*",{count:"exact",head:!0}).lt("created_at",i);if(l)throw l;if(_)throw _;const{count:w,error:I}=await c.from("ai_tools").select("*",{count:"exact",head:!0}),{count:L,error:P}=await c.from("ai_tools").select("*",{count:"exact",head:!0}).lt("created_at",i);if(I)throw I;if(P)throw P;const g=(N,S)=>{if(N===0)return{trend:"No data yet",trendUp:null};if(S===0)return N>0?{trend:"New this month",trendUp:!0}:{trend:"No change",trendUp:null};const m=N-S;if(m===0)return{trend:"No change",trendUp:null};const R=Math.round(m/S*100);return m>0?{trend:`+${m} (${R}%) this month`,trendUp:!0}:{trend:`${m} (${Math.abs(R)}%) this month`,trendUp:!1}},at=n-d,ot=p-f,nt=u-E,it=w-L;return{projects:{count:n||0,...g(n||0,d||0)},applications:{count:p||0,...g(p||0,f||0)},servers:{count:u||0,...g(u||0,E||0)},aiTools:{count:w||0,...g(w||0,L||0)}}}catch(e){throw console.error("Error fetching dashboard metrics:",e),e}},refetchInterval:5*60*1e3})}function j({title:e,value:r,description:s,icon:i,trend:n,trendUp:o}){return t.jsxs(T,{className:"overflow-hidden bg-gradient-to-br from-card to-background/80 backdrop-blur-sm border-opacity-40 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[t.jsxs(D,{className:"flex flex-row items-center justify-between pb-2",children:[t.jsx(k,{className:"text-sm font-medium",children:e}),t.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center shadow-sm",children:t.jsx(i,{className:"h-4 w-4 text-primary"})})]}),t.jsx(U,{children:t.jsxs(b,{to:`/${e.toLowerCase()}`,className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors duration-200",children:[t.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-accent-500 bg-clip-text text-transparent",children:r}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s}),n&&t.jsxs("div",{className:`mt-2 flex items-center gap-1 text-xs ${o===!0?"text-green-500":o===!1?"text-red-500":"text-muted-foreground"}`,children:[o===!0&&t.jsx(O,{className:"h-3 w-3"}),o===!1&&t.jsx(Q,{className:"h-3 w-3"}),o===null&&t.jsx(J,{className:"h-3 w-3"}),t.jsx("span",{children:n})]})]})})]})}const tt={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},v={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}};function et({metrics:e}){return t.jsxs(a.div,{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",variants:tt,initial:"hidden",animate:"show",children:[t.jsx(a.div,{variants:v,children:t.jsx(j,{title:"Projects",value:e.projects.count.toString(),description:"Total projects",icon:q,trend:e.projects.trend,trendUp:e.projects.trendUp})}),t.jsx(a.div,{variants:v,children:t.jsx(j,{title:"Applications",value:e.applications.count.toString(),description:"Deployed applications",icon:B,trend:e.applications.trend,trendUp:e.applications.trendUp})}),t.jsx(a.div,{variants:v,children:t.jsx(j,{title:"Servers",value:e.servers.count.toString(),description:"Active servers",icon:F,trend:e.servers.trend,trendUp:e.servers.trendUp})}),t.jsx(a.div,{variants:v,children:t.jsx(j,{title:"Tools",value:e.aiTools.count.toString(),description:"Total AI tools",icon:K,trend:e.aiTools.trend,trendUp:e.aiTools.trendUp})})]})}function rt({projects:e}){return t.jsxs(T,{className:"h-full bg-gradient-to-br from-card to-background/80 backdrop-blur-sm border-opacity-40 shadow-lg",children:[t.jsxs(D,{children:[t.jsx(k,{children:"Recent Projects"}),t.jsx($,{children:"Your recently updated projects"})]}),t.jsx(U,{children:t.jsx("div",{className:"space-y-4",children:e.length>0?e.map((r,s)=>t.jsxs(a.div,{className:"flex items-center justify-between space-x-4 p-2 hover:bg-background/50 rounded-md transition-all duration-300",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*s,duration:.3},children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center shadow-sm",children:t.jsx(q,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium leading-none",children:r.name}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.tools_count," tools Â· ",r.servers_count," servers"]})]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(H,{variant:"outline",className:`mr-2 ${r.status==="Active"?"bg-green-100 text-green-800 border-green-300":r.status==="Development"?"bg-blue-100 text-blue-800 border-blue-300":"bg-amber-100 text-amber-800 border-amber-300"}`,children:r.status}),t.jsx(M,{variant:"ghost",size:"icon",asChild:!0,className:"hover:bg-primary/10 transition-colors duration-300",children:t.jsxs(b,{to:`/projects/${r.slug?r.slug:r.id}`,children:[t.jsx(O,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"View project"})]})})]})]},r.id)):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-muted-foreground",children:"No projects yet"}),t.jsx(M,{variant:"outline",className:"mt-2",asChild:!0,children:t.jsx(b,{to:"/projects/new",children:"Create your first project"})})]})})})]})}function st({activities:e}){return t.jsxs(T,{className:"h-full bg-gradient-to-br from-card to-background/80 backdrop-blur-sm border-opacity-40 shadow-lg",children:[t.jsxs(D,{children:[t.jsx(k,{children:"Recent Activity"}),t.jsx($,{children:"Latest actions in your workspace"})]}),t.jsx(U,{children:t.jsx("div",{className:"space-y-4",children:e.length>0?e.map((r,s)=>t.jsxs(a.div,{className:"flex items-start gap-4 p-2 hover:bg-background/50 rounded-md transition-all duration-300",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*s,duration:.3},children:[t.jsx("div",{className:"mt-0.5 h-8 w-8 rounded-full bg-gradient-to-br from-secondary/30 to-background flex items-center justify-center shadow-sm",children:t.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm",children:r.description}),t.jsx("p",{className:"text-xs text-muted-foreground",children:r.time})]})]},s)):t.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No recent activity"})})})]})}function St(){const{session:e}=z(),r=!!e.user,{data:s,isLoading:i}=Z(),{data:n,isLoading:o}=A({queryKey:["dashboard","projects"],queryFn:async()=>{if(!r)return[];const{data:u,error:l}=await c.from("projects").select("id, name, slug, tools_count, servers_count, status").order("updated_at",{ascending:!1}).limit(4);if(l)throw console.error("Error fetching recent projects:",l),l;return u||[]},enabled:r}),{data:d,isLoading:h}=A({queryKey:["dashboard","activity"],queryFn:async()=>r?[{icon:K,description:'New AI Tool "Text Summarizer" was created',time:"2 hours ago"},{icon:F,description:'Server "NLP-Processor-01" was restarted',time:"4 hours ago"},{icon:G,description:'User "Alex Kim" was added to "Data Analysis Pipeline" project',time:"6 hours ago"},{icon:B,description:'Application "Customer Portal" deployed to production',time:"1 day ago"}]:[],enabled:r}),x=i||!s?{projects:{count:0,trend:"No data yet",trendUp:null},applications:{count:0,trend:"No data yet",trendUp:null},servers:{count:0,trend:"No data yet",trendUp:null},aiTools:{count:0,trend:"No data yet",trendUp:null}}:s,f=o||!n?[]:n,y=h||!d?[]:d;return t.jsxs(a.div,{className:"space-y-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[t.jsxs(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.5},children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-accent-500 bg-clip-text text-transparent",children:"Dashboard"}),t.jsx("p",{className:"text-muted-foreground",children:"Welcome to your AI Tools Hub dashboard"})]}),t.jsx(a.div,{className:"flex items-center gap-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3,duration:.5},children:t.jsx(M,{asChild:!0,className:"w-full sm:w-auto bg-gradient-to-r from-white to-white/90 text-primary hover:from-white/90 hover:to-white/70 shadow-lg hover:shadow-primary/25 transition-all duration-300 hover:translate-y-[-2px] font-medium",children:t.jsx(b,{to:r?"/projects/new":"/login",children:"Create new project"})})})]}),!r&&t.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:t.jsxs(W,{variant:"default",className:"bg-gradient-to-r from-amber-50 to-amber-100 border-amber-200",children:[t.jsx(V,{className:"h-4 w-4 text-amber-500"}),t.jsx(Y,{children:"You are currently in limited access mode. Some features may be restricted."})]})}),t.jsx(et,{metrics:x}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsx(a.div,{className:"col-span-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:t.jsx(rt,{projects:f})}),t.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:t.jsx(st,{activities:y})})]})]})}export{St as Dashboard,St as default};
//# sourceMappingURL=Dashboard-DrUky09D.js.map
