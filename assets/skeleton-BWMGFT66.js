import{a as E,t as b,c as p,g as S,d as V,f as H,e as U}from"./en-US-F4bQRikB.js";import{b as Q,u as q,d as z}from"./data-management-D5n4p4qF.js";import{u as j,d as G,s as Y,a as k,X as Z}from"./index-qFUq4l6H.js";import{Y as J,Z as ee,j as w,_ as te,$ as L,a0 as re,a1 as R,a2 as X,a3 as B}from"./ui-components-TzlODp5W.js";import{r as P}from"./react-vendor-h7CPgmbB.js";function M(t,e){var m,c,u,i;const r=E(),n=(e==null?void 0:e.weekStartsOn)??((c=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((i=(u=r.locale)==null?void 0:u.options)==null?void 0:i.weekStartsOn)??0,a=b(t),s=a.getDay(),d=(s<n?7:0)+s-n;return a.setDate(a.getDate()-d),a.setHours(0,0,0,0),a}function T(t){return M(t,{weekStartsOn:1})}function $(t){const e=b(t),r=e.getFullYear(),n=p(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=T(n),s=p(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const d=T(s);return e.getTime()>=a.getTime()?r+1:e.getTime()>=d.getTime()?r:r-1}function v(t){const e=b(t);return e.setHours(0,0,0,0),e}function ne(t,e){const r=v(t),n=v(e),a=+r-S(r),s=+n-S(n);return Math.round((a-s)/V)}function ae(t){const e=$(t),r=p(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),T(r)}function se(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function oe(t){if(!se(t)&&typeof t!="number")return!1;const e=b(t);return!isNaN(Number(e))}function ie(t){const e=b(t),r=p(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function ce(t){const e=b(t);return ne(e,ie(e))+1}function ue(t){const e=b(t),r=+T(e)-+ae(e);return Math.round(r/H)+1}function I(t,e){var i,f,h,y;const r=b(t),n=r.getFullYear(),a=E(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(i=e==null?void 0:e.locale)==null?void 0:i.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((y=(h=a.locale)==null?void 0:h.options)==null?void 0:y.firstWeekContainsDate)??1,d=p(t,0);d.setFullYear(n+1,0,s),d.setHours(0,0,0,0);const m=M(d,e),c=p(t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=M(c,e);return r.getTime()>=m.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function de(t,e){var m,c,u,i;const r=E(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((i=(u=r.locale)==null?void 0:u.options)==null?void 0:i.firstWeekContainsDate)??1,a=I(t,e),s=p(t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),M(s,e)}function fe(t,e){const r=b(t),n=+M(r,e)-+de(r,e);return Math.round(n/H)+1}function o(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const x={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return o(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):o(r+1,2)},d(t,e){return o(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return o(t.getHours()%12||12,e.length)},H(t,e){return o(t.getHours(),e.length)},m(t,e){return o(t.getMinutes(),e.length)},s(t,e){return o(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return o(a,e.length)}},D={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},W={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return x.y(t,e)},Y:function(t,e,r,n){const a=I(t,n),s=a>0?a:1-a;if(e==="YY"){const d=s%100;return o(d,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):o(s,e.length)},R:function(t,e){const r=$(t);return o(r,e.length)},u:function(t,e){const r=t.getFullYear();return o(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return o(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return o(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return x.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return o(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=fe(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):o(a,e.length)},I:function(t,e,r){const n=ue(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):o(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):x.d(t,e)},D:function(t,e,r){const n=ce(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):o(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return o(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return o(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return o(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=D.noon:n===0?a=D.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=D.evening:n>=12?a=D.afternoon:n>=4?a=D.morning:a=D.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return x.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):x.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):o(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):o(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):x.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):x.s(t,e)},S:function(t,e){return x.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return F(n);case"XXXX":case"XX":return O(n);case"XXXXX":case"XXX":default:return O(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return F(n);case"xxxx":case"xx":return O(n);case"xxxxx":case"xxx":default:return O(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_(n,":");case"OOOO":default:return"GMT"+O(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_(n,":");case"zzzz":default:return"GMT"+O(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return o(n,e.length)},T:function(t,e,r){const n=t.getTime();return o(n,e.length)}};function _(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+o(s,2)}function F(t,e){return t%60===0?(t>0?"-":"+")+o(Math.abs(t)/60,2):O(t,e)}function O(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=o(Math.trunc(n/60),2),s=o(n%60,2);return r+a+e+s}const C=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},K=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},le=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return C(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",C(n,e)).replace("{{time}}",K(a,e))},me={p:K,P:le},ge=/^D+$/,he=/^Y+$/,we=["D","DD","YY","YYYY"];function ye(t){return ge.test(t)}function be(t){return he.test(t)}function xe(t,e,r){const n=Oe(t,e,r);if(console.warn(n),we.includes(t))throw new RangeError(n)}function Oe(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const pe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ke=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,De=/^'([^]*?)'?$/,Ye=/''/g,Me=/[a-zA-Z]/;function Qe(t,e,r){var i,f,h,y;const n=E(),a=n.locale??U,s=n.firstWeekContainsDate??((f=(i=n.locale)==null?void 0:i.options)==null?void 0:f.firstWeekContainsDate)??1,d=n.weekStartsOn??((y=(h=n.locale)==null?void 0:h.options)==null?void 0:y.weekStartsOn)??0,m=b(t);if(!oe(m))throw new RangeError("Invalid time value");let c=e.match(ke).map(l=>{const g=l[0];if(g==="p"||g==="P"){const N=me[g];return N(l,a.formatLong)}return l}).join("").match(pe).map(l=>{if(l==="''")return{isToken:!1,value:"'"};const g=l[0];if(g==="'")return{isToken:!1,value:Te(l)};if(W[g])return{isToken:!0,value:l};if(g.match(Me))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:l}});a.localize.preprocessor&&(c=a.localize.preprocessor(m,c));const u={firstWeekContainsDate:s,weekStartsOn:d,locale:a};return c.map(l=>{if(!l.isToken)return l.value;const g=l.value;(be(g)||ye(g))&&xe(g,e,String(t));const N=W[g[0]];return N(m,g,a.localize,u)}).join("")}function Te(t){const e=t.match(De);return e?e[1].replace(Ye,"'"):t}function ze(){var u;const t=Q(),{session:e}=j(),{toast:r}=G(),n=!!e.user,{data:a,isLoading:s,error:d}=q({queryKey:["organizations"],queryFn:async()=>{const{data:i,error:f}=await Y.from("organizations").select("*").order("name");if(f)throw f;return i}}),{data:m}=q({queryKey:["userOrganizations",(u=e.user)==null?void 0:u.id],queryFn:async()=>{if(!e.user)return[];const{data:i,error:f}=await Y.from("organization_members").select(`
          *,
          organizations:organization_id(*)
        `).eq("user_id",e.user.id);if(f)throw f;return i.map(h=>({...h.organizations,role:h.role}))},enabled:n}),c=z({mutationFn:async i=>{var l;if(!e.user)throw new Error("Authentication required");const{data:f,error:h}=await Y.from("organizations").insert({name:i.name,slug:i.slug||((l=i.name)==null?void 0:l.toLowerCase().replace(/\s+/g,"-")),description:i.description||null,logo_url:i.logo_url||null}).select().single();if(h)throw h;const{error:y}=await Y.from("organization_members").insert({organization_id:f.id,user_id:e.user.id,role:"owner"});if(y)throw y;return f},onSuccess:()=>{t.invalidateQueries({queryKey:["organizations"]}),t.invalidateQueries({queryKey:["userOrganizations"]}),r({title:"Organization created",description:"Your new organization has been created successfully."})},onError:i=>{r({title:"Error creating organization",description:i.message,variant:"destructive"})}});return{organizations:a,userOrganizations:m,isLoading:s,error:d,isAuthenticated:n,createOrganization:c}}function je(t){const{session:e}=j(),{toast:r}=G(),n=Q(),a=!!e.user,{data:s,isLoading:d,error:m}=q({queryKey:["organization-members",t],queryFn:async()=>{if(!t)return[];const{data:u,error:i}=await Y.from("organization_members").select("*").eq("organization_id",t);if(i)throw i;return u},enabled:!!t}),c=z({mutationFn:async({email:u,role:i})=>{if(!e.user)throw new Error("Authentication required");if(!t)throw new Error("Organization ID is required");const f="mock-user-id",{data:h,error:y}=await Y.from("organization_members").insert({organization_id:t,user_id:f,role:i}).select();if(y)throw y;return h[0]},onSuccess:()=>{n.invalidateQueries({queryKey:["organization-members"]}),r({title:"Member added",description:"The member has been added to the organization."})},onError:u=>{r({title:"Error adding member",description:u.message,variant:"destructive"})}});return{members:s,isLoading:d,error:m,isAuthenticated:a,addMember:c}}const Ge=J,Le=ee,Ee=te,A=P.forwardRef(({className:t,...e},r)=>w.jsx(B,{ref:r,className:k("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));A.displayName=B.displayName;const Pe=P.forwardRef(({className:t,children:e,...r},n)=>w.jsxs(Ee,{children:[w.jsx(A,{}),w.jsxs(L,{ref:n,className:k("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,w.jsxs(re,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[w.jsx(Z,{className:"h-4 w-4"}),w.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pe.displayName=L.displayName;const Ne=({className:t,...e})=>w.jsx("div",{className:k("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ne.displayName="DialogHeader";const qe=({className:t,...e})=>w.jsx("div",{className:k("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});qe.displayName="DialogFooter";const Se=P.forwardRef(({className:t,...e},r)=>w.jsx(R,{ref:r,className:k("text-lg font-semibold leading-none tracking-tight",t),...e}));Se.displayName=R.displayName;const ve=P.forwardRef(({className:t,...e},r)=>w.jsx(X,{ref:r,className:k("text-sm text-muted-foreground",t),...e}));ve.displayName=X.displayName;function Re({className:t,...e}){return w.jsx("div",{className:k("animate-pulse rounded-md bg-muted",t),...e})}export{Ge as D,Re as S,Le as a,Pe as b,Ne as c,Se as d,ve as e,Qe as f,qe as g,je as h,ze as u};
