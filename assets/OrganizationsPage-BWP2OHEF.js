import{j as e,L,r as c}from"./react-vendor-D9Z7L--9.js";import{u as P}from"./useOrganizations-BnYDjl5b.js";import{T as M,a as B,b,c as y}from"./tabs-1TreP9X3.js";import{B as h}from"./button-DyydDRsx.js";import{I as v}from"./input-C9MDm0T4.js";import{L as u}from"./label-Cq7s04FH.js";import{u as F,b as E}from"./index-AU1k0GBq.js";import{D as _,a as k,b as U,c as q,d as R,e as H,f as V}from"./dialog-D_FN0Fk6.js";import{T as Y}from"./textarea-CWRfT5sV.js";import{C as x,a as w,d as z,e as C,b as $,c as G}from"./card-j9p50iY2.js";import{B as J}from"./badge-DQslapAQ.js";import{S as l}from"./skeleton-BpBTDtqW.js";import{B as K}from"./building-D7T097oO.js";import{C as Q}from"./calendar-BUdYTaMy.js";import{U as W}from"./users-BSXnnyhN.js";import{a as X}from"./utils-DVqAV-fM.js";import{A as Z,b as ee,a as se}from"./alert-B5yO3tQn.js";import{P as ae}from"./plus-9bUF_s5A.js";import{S as ie}from"./shield-D6OKR2KR.js";import"./ui-components-CC8ri8vc.js";import"./supabase-BVXwAj-b.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new s.Error().stack;r&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[r]="60829cb4-7e9a-4978-95af-936313ee83e6",s._sentryDebugIdIdentifier="sentry-dbid-60829cb4-7e9a-4978-95af-936313ee83e6")}catch{}function D({organizations:s,isLoading:r}){return r?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>e.jsxs(x,{className:"overflow-hidden",children:[e.jsxs(w,{className:"p-4",children:[e.jsx(l,{className:"h-5 w-3/4"}),e.jsx(l,{className:"h-4 w-1/2 mt-2"})]}),e.jsxs(z,{className:"p-4",children:[e.jsx(l,{className:"h-4 w-full mb-2"}),e.jsx(l,{className:"h-4 w-3/4"})]}),e.jsxs(C,{className:"p-4 flex justify-between",children:[e.jsx(l,{className:"h-4 w-1/4"}),e.jsx(l,{className:"h-9 w-1/4"})]})]},a))}):s.length===0?e.jsxs(x,{className:"p-8 flex flex-col items-center justify-center",children:[e.jsx(K,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No organizations found"}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md mb-4",children:s.length===0?"There are no organizations available yet. Create your first organization to get started.":"You're not a member of any organizations yet."})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(a=>e.jsxs(x,{className:"overflow-hidden",children:[e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{className:"text-lg",children:a.name}),a.role&&e.jsx(J,{variant:"outline",className:"ml-2",children:a.role})]}),e.jsx(G,{className:"line-clamp-2",children:a.description||"No description available"})]}),e.jsx(z,{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Created ",X(new Date(a.created_at),"MMM d, yyyy")]})}),e.jsxs(C,{className:"p-4 flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Members"})]}),e.jsx(h,{asChild:!0,children:e.jsx(L,{to:`/orgs/${a.slug}`,children:"View"})})]})]},a.id))})}function Ce(){const{organizations:s,userOrganizations:r,isLoading:a,isAuthenticated:d,createOrganization:g}=P(),{session:O}=F(),{toast:m}=E(),[S,p]=c.useState(!1),[i,o]=c.useState({name:"",slug:"",description:""}),[f,j]=c.useState(!1),[N,T]=c.useState("");c.useEffect(()=>{r&&r.length>0&&!N&&T(r[0].id)},[r,N]);const A=async t=>{if(t.preventDefault(),!O.user){m({title:"Authentication required",description:"Please sign in to create an organization.",variant:"destructive"});return}if(!i.name){m({title:"Required field missing",description:"Please provide a name for the organization.",variant:"destructive"});return}j(!0);try{console.log("Starting organization creation...",i),await g.mutateAsync(i),m({title:"Success!",description:`Organization "${i.name}" was created successfully.`}),p(!1),o({name:"",slug:"",description:""})}catch(n){console.error("Error creating organization:",n),m({title:"Failed to create organization",description:(n==null?void 0:n.message)||"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{j(!1)}},I=t=>{const n=t.target.value;o({...i,name:n,slug:n.toLowerCase().replace(/\s+/g,"-")})};return e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Organizations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your organizations, teams and projects."})]}),e.jsxs(_,{open:S,onOpenChange:t=>{t||o({name:"",slug:"",description:""}),p(t)},children:[e.jsx(k,{asChild:!0,children:e.jsxs(h,{disabled:!d,children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"New Organization"]})}),e.jsxs(U,{children:[e.jsxs(q,{children:[e.jsx(R,{children:"Create new organization"}),e.jsx(H,{children:"Add a new organization to manage teams, projects, and billing."})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"name",children:"Name"}),e.jsx(v,{id:"name",value:i.name,onChange:I,placeholder:"Acme Inc.",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"slug",children:"Slug"}),e.jsx(v,{id:"slug",value:i.slug,onChange:t=>o({...i,slug:t.target.value}),placeholder:"acme-inc"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Used in URLs: app.agentico.dev/org/",i.slug||"your-slug"]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"description",children:"Description"}),e.jsx(Y,{id:"description",value:i.description,onChange:t=>o({...i,description:t.target.value}),placeholder:"A short description of your organization"})]})]}),e.jsx(V,{children:e.jsx(h,{type:"submit",disabled:f||g.isPending,children:f||g.isPending?"Creating...":"Create Organization"})})]})]})]})]}),!d&&e.jsxs(Z,{variant:"default",className:"bg-amber-50 border-amber-200",children:[e.jsx(ie,{className:"h-4 w-4 text-amber-500"}),e.jsx(ee,{children:"Limited Access Mode"}),e.jsx(se,{children:"You're browsing in read-only mode. Sign in to create or manage organizations."})]}),e.jsxs(M,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(B,{children:[e.jsx(b,{value:"all",children:"All Organizations"}),d&&e.jsx(b,{value:"my-orgs",children:"My Organizations"})]}),e.jsx(y,{value:"all",className:"space-y-4",children:e.jsx(D,{organizations:s||[],isLoading:a})}),d&&e.jsx(y,{value:"my-orgs",className:"space-y-4",children:e.jsx(D,{organizations:r||[],isLoading:a})})]})]})}export{Ce as default};
//# sourceMappingURL=OrganizationsPage-BWP2OHEF.js.map
