import{t as N,j as e,r as v}from"./react-vendor-TyuC8qxg.js";import{B as b}from"./button-CrjcO5GY.js";import{u as P}from"./useServers-CDZfCJte.js";import{j as B}from"./index-D5uhiMQB.js";import{F as R}from"./FilterControls-CucXZNt6.js";import{C as h,a as x,b as w,d as T,c as p,e as y}from"./card-DAAmTFtc.js";import{T as Q}from"./TagBadge-BJN7YXIb.js";import{S as C}from"./star-sfp0mj0X.js";import{S as L}from"./server-CWXdQjOI.js";import{C as k}from"./circle-plus-BAxS78JD.js";import"./ui-components-CAmpQbeX.js";import"./supabase-DLYUZSEu.js";import"./utils-DVqAV-fM.js";import"./input-DR-AxXjG.js";import"./select-BTYSfX8Z.js";import"./chevron-down-Bdv2PV_A.js";import"./check-CG9NCPd3.js";import"./chevron-up-DyG2CS1O.js";import"./popover-CnfoHWxe.js";import"./dialog-uiTA_umQ.js";import"./search-BR1MFiIH.js";import"./badge-bpxx3q91.js";import"./separator-Be9YcOHX.js";import"./filter-9wtyw57Y.js";import"./tag-y-CCJCIb.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new s.Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="481d13f8-026b-4677-b837-3721a8fc3c7e",s._sentryDebugIdIdentifier="sentry-dbid-481d13f8-026b-4677-b837-3721a8fc3c7e")}catch{}const V={active:"bg-green-500",inactive:"bg-red-500",maintenance:"bg-yellow-500",development:"bg-blue-500",deprecated:"bg-gray-500",planning:"bg-purple-500"};function Y({server:s,onToggleFavorite:t,tags:r}){const n=N(),d=()=>{n(`/servers/${s.id}`)},i=async l=>{l.stopPropagation(),await t(s.id,s.favorite)};return e.jsx(h,{className:"overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:d,children:e.jsxs("div",{className:"relative",children:[e.jsxs(x,{className:"pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${V[s.status.toLowerCase()]||"bg-gray-500"}`}),e.jsx(w,{className:"text-lg",children:s.name})]}),e.jsx("button",{onClick:i,className:"text-muted-foreground hover:text-yellow-400 transition-colors","aria-label":s.favorite?"Remove from favorites":"Add to favorites",children:s.favorite?e.jsx(C,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}):e.jsx(C,{className:"h-5 w-5"})})]}),e.jsx(T,{className:"line-clamp-2",children:s.description||"No description available"})]}),e.jsxs(p,{className:"pt-4",children:[e.jsx("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:e.jsxs("div",{className:"flex items-center mr-4",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:s.type})]})}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[s.tags.slice(0,3).map(l=>{var a;return e.jsx(Q,{name:((a=r.find(m=>m.id===l))==null?void 0:a.name)||"Unknown"},l)}),s.tags.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",s.tags.length-3," more"]})]})]}),e.jsxs(y,{className:"pt-0 text-xs text-muted-foreground",children:["Created ",new Date(s.created_at).toLocaleDateString()]})]})},s.id)}function $({count:s=6}){return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:s}).map((t,r)=>e.jsxs(h,{className:"animate-pulse",children:[e.jsx(x,{className:"h-24 bg-muted"}),e.jsxs(p,{className:"py-4",children:[e.jsx("div",{className:"h-5 bg-muted rounded mb-2 w-3/4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),e.jsx(y,{children:e.jsx("div",{className:"h-4 bg-muted rounded w-full"})})]},r))})}function H({hasServers:s,isFiltered:t,searchQuery:r}){const n=N();return e.jsxs(h,{className:"mt-8",children:[e.jsxs(x,{children:[e.jsx(w,{className:"text-xl",children:"No Servers Found"}),e.jsx(T,{children:s&&t?"No servers match your current filters. Try changing your search criteria.":"You haven't created any servers yet. Click 'New Server' to get started."})]}),e.jsxs(p,{className:"flex flex-col items-center justify-center p-8",children:[e.jsx(L,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsxs(b,{onClick:()=>n("/servers/new"),className:"mt-4",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Create Your First Server"]})]})]})}function M({servers:s,filteredServers:t,isLoading:r,toggleFavorite:n,tags:d,searchValue:i,selectedStatus:l,selectedTags:a}){if(r)return e.jsx($,{});const m=i!==""||l!==null||a.length>0,o=s&&s.length>0;return t.length===0?e.jsx(H,{hasServers:o,isFiltered:m,searchQuery:i}):e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:t.map(g=>e.jsx(Y,{server:g,onToggleFavorite:n,tags:d},g.id))})}function xe(){const s=N(),{servers:t,isLoading:r,error:n,toggleFavorite:d}=P(),{tags:i,isLoading:l}=B(),[a,m]=v.useState(""),[o,g]=v.useState(null),[u,F]=v.useState([]),D=(t||[]).filter(c=>{var S;const f=a===""||c.name.toLowerCase().includes(a.toLowerCase())||((S=c.description)==null?void 0:S.toLowerCase().includes(a.toLowerCase())),j=o===null||c.status.toLowerCase()===o.toLowerCase(),A=u.length===0||u.every(I=>c.tags.includes(I));return f&&j&&A}),E=async(c,f)=>{try{await d.mutateAsync({id:c,favorite:!f})}catch(j){console.error("Error toggling favorite:",j)}},_=[{label:"All Statuses",value:null},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Maintenance",value:"maintenance"},{label:"Development",value:"development"},{label:"Deprecated",value:"deprecated"},{label:"Planning",value:"planning"}];return n?e.jsx("div",{className:"container py-8",children:e.jsxs(h,{className:"border-destructive",children:[e.jsx(x,{children:e.jsx(w,{className:"text-destructive",children:"Error Loading Servers"})}),e.jsxs(p,{children:[e.jsx("p",{children:"There was an error loading the servers. Please try again later."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:n.message})]}),e.jsx(y,{children:e.jsx(b,{onClick:()=>window.location.reload(),children:"Retry"})})]})}):e.jsxs("div",{className:"container py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-accent-500 bg-clip-text text-transparent",children:"Servers"}),e.jsxs(b,{onClick:()=>s("/servers/new"),children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"New Server"]})]}),e.jsx(R,{searchValue:a,onSearchValueChange:m,statusOptions:_,selectedStatus:o,onStatusChange:g,tags:i,selectedTags:u,onTagsChange:F}),e.jsx(M,{servers:t||[],filteredServers:D,isLoading:r||l,toggleFavorite:E,tags:i,searchValue:a,selectedStatus:o,selectedTags:u})]})}export{xe as default};
//# sourceMappingURL=ServersPage-C_SsrnkL.js.map
