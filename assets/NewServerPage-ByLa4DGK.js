import{r as y,t as S,w,j as e,L as C}from"./react-vendor-TyuC8qxg.js";import{B as h}from"./button-CrjcO5GY.js";import{C as F,a as I,b as N,d as D,c as T}from"./card-DAAmTFtc.js";import{I as g}from"./input-DR-AxXjG.js";import{T as k}from"./textarea-CzliNkd6.js";import{F as _,a as l,b as c,c as d,d as m,e as u,f}from"./form-Cq2_NWTX.js";import{u as A,g as i,i as E,s as z}from"./index-D5uhiMQB.js";import{A as L}from"./arrow-left-B-jkszN4.js";import"./ui-components-CAmpQbeX.js";import"./label-ppAVubx0.js";import"./supabase-DLYUZSEu.js";import"./utils-DVqAV-fM.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new s.Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="b7c0afb2-aa3b-4023-91c5-d6815171555b",s._sentryDebugIdIdentifier="sentry-dbid-b7c0afb2-aa3b-4023-91c5-d6815171555b")}catch{}function B(){const[s,t]=y.useState(!1),o=S(),{session:p}=A(),n=w({defaultValues:{name:"",description:"",type:"Virtual",status:"Offline"}}),b=async r=>{if(!p.user){i.error("You need to be logged in to create a server");return}t(!0);try{const a=localStorage.getItem("selectedOrganizationId");if(!a){i.error("Please select an organization from the top navigation bar"),t(!1);return}const v=E(r.name),{data:x,error:j}=await z.from("servers").insert({name:r.name,slug:v,description:r.description,type:r.type,status:r.status,user_id:p.user.id,organization_id:a}).select().single();if(j)throw j;i.success("Server created successfully"),o(x?`/servers/${x.slug}`:"/servers")}catch(a){console.error("Error creating server:",a),i.error(`Failed to create server: ${a.message||"Unknown error"}`)}finally{t(!1)}};return e.jsx(_,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(b),className:"space-y-6",children:[e.jsx(l,{control:n.control,name:"name",render:({field:r})=>e.jsxs(c,{children:[e.jsx(d,{children:"Server Name"}),e.jsx(m,{children:e.jsx(g,{placeholder:"Enter server name",...r})}),e.jsx(u,{children:"The name of your server."}),e.jsx(f,{})]})}),e.jsx(l,{control:n.control,name:"description",render:({field:r})=>e.jsxs(c,{children:[e.jsx(d,{children:"Description"}),e.jsx(m,{children:e.jsx(k,{placeholder:"Describe your server",className:"min-h-[120px]",...r})}),e.jsx(u,{children:"A brief description of what this server is for."}),e.jsx(f,{})]})}),e.jsx(l,{control:n.control,name:"type",render:({field:r})=>e.jsxs(c,{children:[e.jsx(d,{children:"Server Type"}),e.jsx(m,{children:e.jsx(g,{placeholder:"e.g., Virtual, Physical, Cloud",...r})}),e.jsx(u,{children:"The type of server."}),e.jsx(f,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>o("/servers"),children:"Cancel"}),e.jsx(h,{type:"submit",disabled:s,children:s?"Creating...":"Create Server"})]})]})})}function K(){return e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx(h,{variant:"ghost",asChild:!0,children:e.jsxs(C,{to:"/servers",children:[e.jsx(L,{className:"mr-2 h-4 w-4"})," Back to Servers"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Server"}),e.jsx("p",{className:"text-muted-foreground",children:"Set up a new server for your AI applications"})]}),e.jsxs(F,{children:[e.jsxs(I,{children:[e.jsx(N,{children:"Server Details"}),e.jsx(D,{children:"Fill in the details to create your new server"})]}),e.jsx(T,{children:e.jsx(B,{})})]})]})}export{K as default};
//# sourceMappingURL=NewServerPage-ByLa4DGK.js.map
