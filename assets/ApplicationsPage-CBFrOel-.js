import{j as e,L as w,r as u,u as k}from"./react-vendor-D9Z7L--9.js";import{B as b}from"./button-DyydDRsx.js";import{T as F,a as O,b as j,c as v}from"./tabs-1TreP9X3.js";import{c as E,u as S,s as P,t as M}from"./index-AU1k0GBq.js";import{F as z}from"./FilterControls-CYc6oIE5.js";import{A as B}from"./ApplicationCard-CHw7hYap.js";import{A as Q,a as V}from"./alert-B5yO3tQn.js";import{P as q}from"./plus-9bUF_s5A.js";import{S as R}from"./shield-D6OKR2KR.js";import"./ui-components-CC8ri8vc.js";import"./supabase-BVXwAj-b.js";import"./utils-DVqAV-fM.js";import"./input-C9MDm0T4.js";import"./select-DduSmGHa.js";import"./chevron-down-lRykjHmp.js";import"./check-B_vNfbYE.js";import"./chevron-up-6oX-8_Pk.js";import"./popover-BldgfOD1.js";import"./dialog-D_FN0Fk6.js";import"./search-DW8VQmka.js";import"./badge-DQslapAQ.js";import"./filter-CmYZIYFF.js";import"./card-j9p50iY2.js";import"./star-DSolPrZb.js";import"./tag-DrRrhomQ.js";import"./app-window-C_29jRGv.js";import"./circuit-board-CDaRFIRg.js";try{let a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new a.Error().stack;n&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[n]="19c8376d-e832-4858-b28d-aeae7e61ee5d",a._sentryDebugIdIdentifier="sentry-dbid-19c8376d-e832-4858-b28d-aeae7e61ee5d")}catch{}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=E("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function m({type:a}){const{session:n}=S(),r=!!n.user;switch(a){case"loading":return e.jsx("div",{className:"flex justify-center p-8",children:e.jsx("p",{children:"Loading applications..."})});case"error":return e.jsx("div",{className:"flex justify-center p-8",children:e.jsx("p",{className:"text-red-500",children:"Failed to load applications"})});case"no-applications":return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("p",{className:"mb-4 text-muted-foreground",children:"No applications found"}),e.jsx(b,{asChild:!0,children:e.jsx(w,{to:r?"/applications/new":"/login",children:"Create your first application"})})]});case"no-favorites":return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("p",{className:"mb-4 text-muted-foreground",children:"No favorite applications found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark applications as favorites to see them here"})]});default:return null}}function y({isLoading:a,error:n,applications:r,tabValue:l}){const c=l==="recent"?[...r].sort((o,p)=>new Date(p.updated_at).getTime()-new Date(o.updated_at).getTime()).slice(0,6):l==="favorites"?r.filter(o=>o.favorite):r;return a?e.jsx(m,{type:"loading"}):n?e.jsx(m,{type:"error"}):c.length===0?l==="favorites"?e.jsx(m,{type:"no-favorites"}):e.jsx(m,{type:"no-applications"}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:c.map(o=>e.jsx(B,{application:o},o.id))})}function je(){const[a,n]=u.useState(""),[r,l]=u.useState(null),[c,o]=u.useState("all"),[p,N]=u.useState([]),{session:A,signOut:_}=S(),d=!!A.user,{data:f=[],isLoading:x,error:g}=k({queryKey:["applications"],queryFn:async()=>{try{const{data:t,error:i}=await P.from("applications").select("*").order("created_at",{ascending:!1});if(i)throw new Error(i.message);return t.map(s=>({id:s.id,name:s.name,description:s.description||"",category:s.category||"Other",status:(s.status||"active").toLowerCase(),favorite:s.favorite||!1,endpoints_count:s.endpoints_count||0,tools_count:s.tools_count||0,tags:s.tags||[],created_at:s.created_at||new Date().toISOString(),updated_at:s.updated_at||new Date().toISOString(),slug:s.slug||s.name.toLowerCase().replace(/\s+/g,"-"),organization_id:s.organization_id||""}))}catch(t){return console.error("Unexpected error fetching applications:",t),M({title:"Unexpected error",description:"Failed to load applications. Please try again later.",variant:"destructive"}),[]}},enabled:d}),C=Array.from(new Set(f.flatMap(t=>t.tags||[]).filter(Boolean))).map(t=>({id:t,name:t,created_at:new Date().toISOString()})),T=[{value:"all",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"draft",label:"Draft"}],L=t=>{o(t)},D=t=>{N(t)},h=f.filter(t=>{const i=t.name.toLowerCase().includes(a.toLowerCase())||t.description.toLowerCase().includes(a.toLowerCase());return r?r==="favorite"?i&&t.favorite:r==="active"?i&&t.status==="active":r==="category"?i&&t.category===r:i:i}),I=async()=>{await _()};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Applications"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your external API interfaces and applications"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{asChild:!0,children:e.jsxs(w,{to:d?"/applications/new":"/login",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"New Application"]})}),d&&e.jsxs(b,{variant:"outline",onClick:I,children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]}),!d&&e.jsxs(Q,{variant:"default",className:"bg-amber-50 border-amber-200",children:[e.jsx(R,{className:"h-4 w-4 text-amber-500"}),e.jsx(V,{children:"You are currently in limited access mode. Some features may be restricted."})]}),e.jsx(z,{searchQuery:a,setSearchQuery:n,activeFilter:r,setActiveFilter:l,applications:f,statusOptions:T,selectedStatus:c,onStatusChange:L,tags:C,selectedTags:p,onTagsChange:D}),e.jsxs(F,{defaultValue:"all",children:[e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All Applications"}),e.jsx(j,{value:"favorites",children:"Favorites"}),e.jsx(j,{value:"recent",children:"Recent"})]}),e.jsx(v,{value:"all",className:"mt-6",children:e.jsx(y,{isLoading:x,error:g,applications:h,tabValue:"all"})}),e.jsx(v,{value:"favorites",className:"mt-6",children:e.jsx(y,{isLoading:x,error:g,applications:h.filter(t=>t.favorite),tabValue:"favorites"})}),e.jsx(v,{value:"recent",className:"mt-6",children:e.jsx(y,{isLoading:x,error:g,applications:[...h].sort((t,i)=>new Date(i.updated_at).getTime()-new Date(t.updated_at).getTime()).slice(0,6),tabValue:"recent"})})]})]})}export{je as ApplicationsPage,je as default};
//# sourceMappingURL=ApplicationsPage-CBFrOel-.js.map
