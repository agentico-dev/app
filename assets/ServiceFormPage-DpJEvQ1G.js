import{m as D,t as T,r as y,w as A,j as e}from"./react-vendor-TyuC8qxg.js";import{B as x}from"./button-CrjcO5GY.js";import{I as j}from"./input-DR-AxXjG.js";import{T as _}from"./textarea-CzliNkd6.js";import{F as E,a as c,b as o,c as l,d,f as p,e as u}from"./form-Cq2_NWTX.js";import{S as k,a as B,b as L,c as V,d as v}from"./select-BTYSfX8Z.js";import{C as M,a as P,b as U,d as $,c as z}from"./card-DAAmTFtc.js";import{a as H,u as R}from"./useApplicationServices-Ydf5DmBi.js";import{g as f}from"./index-D5uhiMQB.js";import{A as q}from"./arrow-left-B-jkszN4.js";import"./ui-components-CAmpQbeX.js";import"./label-ppAVubx0.js";import"./chevron-down-Bdv2PV_A.js";import"./check-CG9NCPd3.js";import"./chevron-up-DyG2CS1O.js";import"./supabase-DLYUZSEu.js";import"./utils-DVqAV-fM.js";try{let r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new r.Error().stack;a&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[a]="d8d79bb8-d5be-4fbd-b096-55123aa4d3ba",r._sentryDebugIdIdentifier="sentry-dbid-d8d79bb8-d5be-4fbd-b096-55123aa4d3ba")}catch{}function le(){const{applicationId:r,serviceId:a}=D(),h=T(),t=!a,{data:n,isLoading:G}=H(a),{createService:S,updateService:C}=R(r),[g,b]=y.useState(!1),i=A({defaultValues:{name:"",description:"",status:"active",service_type:"",tags:[]}});y.useEffect(()=>{n&&!t&&i.reset({name:n.name,description:n.description,status:n.status,service_type:n.service_type,tags:n.tags})},[n,i,t]);const w=async s=>{if(r){b(!0);try{t?(await S.mutateAsync({...s,application_id:r}),f.success("Service created successfully")):a&&(await C.mutateAsync({...s,id:a}),f.success("Service updated successfully")),h(`/applications/${r}`)}catch(m){console.error("Error saving service:",m),f.error("Failed to save service")}finally{b(!1)}}};return e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx(x,{variant:"ghost",asChild:!0,children:e.jsxs("div",{onClick:()=>h(`/applications/${r}`),children:[e.jsx(q,{className:"mr-2 h-4 w-4"})," Back to Application"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t?"Create New Service":"Edit Service"}),e.jsx("p",{className:"text-muted-foreground",children:t?"Define a new service for your application":"Update the service details"})]}),e.jsxs(M,{children:[e.jsxs(P,{children:[e.jsx(U,{children:"Service Details"}),e.jsx($,{children:"Fill in the details of your service"})]}),e.jsx(z,{children:e.jsx(E,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(w),className:"space-y-6",children:[e.jsx(c,{control:i.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Service Name"}),e.jsx(d,{children:e.jsx(j,{placeholder:"Enter service name",...s})}),e.jsx(p,{})]})}),e.jsx(c,{control:i.control,name:"description",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Description"}),e.jsx(d,{children:e.jsx(_,{placeholder:"Describe your service",className:"min-h-[120px]",...s})}),e.jsx(u,{children:"Provide a brief description of what this service does."}),e.jsx(p,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c,{control:i.control,name:"status",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Status"}),e.jsxs(k,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(d,{children:e.jsx(B,{children:e.jsx(L,{placeholder:"Select a status"})})}),e.jsxs(V,{children:[e.jsx(v,{value:"active",children:"Active"}),e.jsx(v,{value:"inactive",children:"Inactive"}),e.jsx(v,{value:"maintenance",children:"Maintenance"})]})]}),e.jsx(u,{children:"The current status of this service."}),e.jsx(p,{})]})}),e.jsx(c,{control:i.control,name:"service_type",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Service Type"}),e.jsx(d,{children:e.jsx(j,{placeholder:"e.g., Microservice, Database, AI",...s})}),e.jsx(u,{children:"The type of this service."}),e.jsx(p,{})]})})]}),e.jsx(c,{control:i.control,name:"tags",render:({field:s})=>{var m;return e.jsxs(o,{children:[e.jsx(l,{children:"Tags"}),e.jsx(d,{children:e.jsx(j,{placeholder:"Enter tags separated by commas",value:((m=s.value)==null?void 0:m.join(", "))||"",onChange:I=>{const F=I.target.value.split(",").map(N=>N.trim()).filter(Boolean);s.onChange(F)}})}),e.jsx(u,{children:"Tags help categorize and find your services."}),e.jsx(p,{})]})}}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>h(`/applications/${r}`),children:"Cancel"}),e.jsx(x,{type:"submit",disabled:g,children:g?t?"Creating...":"Updating...":t?"Create Service":"Update Service"})]})]})})})]})]})}export{le as default};
//# sourceMappingURL=ServiceFormPage-DpJEvQ1G.js.map
