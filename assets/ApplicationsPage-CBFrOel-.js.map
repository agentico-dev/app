{"version":3,"file":"ApplicationsPage-CBFrOel-.js","sources":["../../node_modules/lucide-react/dist/esm/icons/log-out.js","../../src/components/applications/EmptyStates.tsx","../../src/components/applications/ApplicationsTabContent.tsx","../../src/pages/ApplicationsPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LogOut = createLucideIcon(\"LogOut\", [\n  [\"path\", { d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\", key: \"1uf3rs\" }],\n  [\"polyline\", { points: \"16 17 21 12 16 7\", key: \"1gabdz\" }],\n  [\"line\", { x1: \"21\", x2: \"9\", y1: \"12\", y2: \"12\", key: \"1uyos4\" }]\n]);\n\nexport { LogOut as default };\n//# sourceMappingURL=log-out.js.map\n","\nimport React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Link } from 'react-router';\nimport { useAuth } from '@/hooks/useAuth';\n\ninterface EmptyStateProps {\n  type: 'loading' | 'error' | 'no-applications' | 'no-favorites';\n}\n\nexport function EmptyState({ type }: EmptyStateProps) {\n  const { session } = useAuth();\n  const isAuthenticated = !!session.user;\n  switch (type) {\n    case 'loading':\n      return (\n        <div className=\"flex justify-center p-8\">\n          <p>Loading applications...</p>\n        </div>\n      );\n    case 'error':\n      return (\n        <div className=\"flex justify-center p-8\">\n          <p className=\"text-red-500\">Failed to load applications</p>\n        </div>\n      );\n    case 'no-applications':\n      return (\n        <div className=\"flex flex-col items-center justify-center p-8 text-center\">\n          <p className=\"mb-4 text-muted-foreground\">No applications found</p>\n          <Button asChild>\n            <Link to={isAuthenticated ? \"/applications/new\" : \"/login\"}>Create your first application</Link>\n          </Button>\n        </div>\n      );\n    case 'no-favorites':\n      return (\n        <div className=\"flex flex-col items-center justify-center p-8 text-center\">\n          <p className=\"mb-4 text-muted-foreground\">No favorite applications found</p>\n          <p className=\"text-sm text-muted-foreground\">Mark applications as favorites to see them here</p>\n        </div>\n      );\n    default:\n      return null;\n  }\n}\n\nexport default EmptyState;\n","\nimport React from 'react';\nimport { Application } from '@/types/application';\nimport { ApplicationCard } from './ApplicationCard';\nimport { EmptyState } from './EmptyStates';\n\ninterface ApplicationsTabContentProps {\n  isLoading: boolean;\n  error: unknown;\n  applications: Application[];\n  tabValue: string;\n}\n\nexport function ApplicationsTabContent({ \n  isLoading, \n  error, \n  applications, \n  tabValue \n}: ApplicationsTabContentProps) {\n  // For the \"recent\" tab, sort by updated_at date\n  const displayedApplications = tabValue === 'recent' \n    ? [...applications].sort((a, b) => new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime()).slice(0, 6)\n    : tabValue === 'favorites'\n    ? applications.filter(a => a.favorite)\n    : applications;\n\n  if (isLoading) {\n    return <EmptyState type=\"loading\" />;\n  }\n\n  if (error) {\n    return <EmptyState type=\"error\" />;\n  }\n\n  if (displayedApplications.length === 0) {\n    if (tabValue === 'favorites') {\n      return <EmptyState type=\"no-favorites\" />;\n    }\n    return <EmptyState type=\"no-applications\" />;\n  }\n\n  return (\n    <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n      {displayedApplications.map((app) => (\n        <ApplicationCard key={app.id} application={app} />\n      ))}\n    </div>\n  );\n}\n\nexport default ApplicationsTabContent;\n","\nimport { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Link } from 'react-router';\nimport { Plus, Shield, LogOut } from 'lucide-react';\nimport { toast } from '@/components/ui/use-toast';\nimport { Application, ApplicationStatus, Tag } from '@/types/application';\nimport { FilterControls } from '@/components/applications/FilterControls';\nimport { ApplicationsTabContent } from '@/components/applications/ApplicationsTabContent';\nimport { useAuth } from '@/hooks/useAuth';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { supabase } from '@/integrations/supabase/client';\n\nexport function ApplicationsPage() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [activeFilter, setActiveFilter] = useState<string | null>(null);\n  const [selectedStatus, setSelectedStatus] = useState<string>('all');\n  const [selectedTags, setSelectedTags] = useState<string[]>([]);\n  const { session, signOut } = useAuth();\n  const isAuthenticated = !!session.user;\n\n  // Query to fetch applications from Supabase\n  const { data: applications = [], isLoading, error } = useQuery({\n    queryKey: ['applications'],\n    queryFn: async () => {\n      try {\n        const { data, error } = await supabase\n          .from('applications')\n          .select('*')\n          .order('created_at', { ascending: false });\n\n        if (error) {\n          throw new Error(error.message);\n        }\n\n        return data.map((app) => ({\n          id: app.id,\n          name: app.name,\n          description: app.description || '',\n          category: app.category || 'Other',\n          status: (app.status || 'active').toLowerCase() as ApplicationStatus,\n          favorite: app.favorite || false,\n          endpoints_count: app.endpoints_count || 0,\n          tools_count: app.tools_count || 0,\n          tags: app.tags || [],\n          created_at: app.created_at || new Date().toISOString(),\n          updated_at: app.updated_at || new Date().toISOString(),\n          slug: app.slug || app.name.toLowerCase().replace(/\\s+/g, '-'),\n          organization_id: app.organization_id || '' // Add the missing organization_id\n        })) as Application[];\n      } catch (err) {\n        console.error('Unexpected error fetching applications:', err);\n        toast({\n          title: 'Unexpected error',\n          description: 'Failed to load applications. Please try again later.',\n          variant: 'destructive',\n        });\n        return [];\n      }\n    },\n    enabled: isAuthenticated\n  });\n\n  // Extract unique tags from all applications\n  const allTags: Tag[] = Array.from(\n    new Set(\n      applications.flatMap(app => app.tags || [])\n        .filter(Boolean)\n    )\n  ).map(tagName => ({ id: tagName, name: tagName, created_at: new Date().toISOString() }));\n\n  // Status options for filtering\n  const statusOptions = [\n    { value: 'all', label: 'All Statuses' },\n    { value: 'active', label: 'Active' },\n    { value: 'inactive', label: 'Inactive' },\n    { value: 'draft', label: 'Draft' }\n  ];\n\n  // Handler for status change\n  const handleStatusChange = (status: string) => {\n    setSelectedStatus(status);\n  };\n\n  // Handler for tag selection\n  const handleTagChange = (tags: string[]) => {\n    setSelectedTags(tags);\n  };\n\n  // Filter applications based on search query and active filter\n  const filteredApplications = applications.filter(app => {\n    const matchesSearch = app.name.toLowerCase().includes(searchQuery.toLowerCase()) || \n                          app.description.toLowerCase().includes(searchQuery.toLowerCase());\n    \n    if (!activeFilter) return matchesSearch;\n    \n    if (activeFilter === 'favorite') return matchesSearch && app.favorite;\n    if (activeFilter === 'active') return matchesSearch && app.status === 'active';\n    if (activeFilter === 'category') return matchesSearch && app.category === activeFilter;\n    \n    return matchesSearch;\n  });\n\n  const handleLogout = async () => {\n    await signOut();\n  };\n\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n        <div>\n          <h2 className=\"text-3xl font-bold tracking-tight\">Applications</h2>\n          <p className=\"text-muted-foreground\">\n            Manage your external API interfaces and applications\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button asChild>\n            <Link to={isAuthenticated ? \"/applications/new\" : \"/login\"}>\n              <Plus className=\"mr-2 h-4 w-4\" />\n              New Application\n            </Link>\n          </Button>\n          {isAuthenticated && (\n            <Button variant=\"outline\" onClick={handleLogout}>\n              <LogOut className=\"mr-2 h-4 w-4\" />\n              Log out\n            </Button>\n          )}\n        </div>\n      </div>\n      \n      {!isAuthenticated && (\n        <Alert variant=\"default\" className=\"bg-amber-50 border-amber-200\">\n          <Shield className=\"h-4 w-4 text-amber-500\" />\n          <AlertDescription>\n            You are currently in limited access mode. Some features may be restricted.\n          </AlertDescription>\n        </Alert>\n      )}\n\n      <FilterControls \n        searchQuery={searchQuery}\n        setSearchQuery={setSearchQuery}\n        activeFilter={activeFilter}\n        setActiveFilter={setActiveFilter}\n        applications={applications}\n        statusOptions={statusOptions}\n        selectedStatus={selectedStatus}\n        onStatusChange={handleStatusChange}\n        tags={allTags}\n        selectedTags={selectedTags}\n        onTagsChange={handleTagChange}\n      />\n\n      <Tabs defaultValue=\"all\">\n        <TabsList>\n          <TabsTrigger value=\"all\">All Applications</TabsTrigger>\n          <TabsTrigger value=\"favorites\">Favorites</TabsTrigger>\n          <TabsTrigger value=\"recent\">Recent</TabsTrigger>\n        </TabsList>\n        <TabsContent value=\"all\" className=\"mt-6\">\n          <ApplicationsTabContent \n            isLoading={isLoading}\n            error={error}\n            applications={filteredApplications}\n            tabValue=\"all\"\n          />\n        </TabsContent>\n        <TabsContent value=\"favorites\" className=\"mt-6\">\n          <ApplicationsTabContent \n            isLoading={isLoading}\n            error={error}\n            applications={filteredApplications.filter(a => a.favorite)}\n            tabValue=\"favorites\"\n          />\n        </TabsContent>\n        <TabsContent value=\"recent\" className=\"mt-6\">\n          <ApplicationsTabContent \n            isLoading={isLoading}\n            error={error}\n            applications={[...filteredApplications].sort((a, b) => \n              new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime()\n            ).slice(0, 6)}\n            tabValue=\"recent\"\n          />\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\nexport default ApplicationsPage;\n"],"names":["LogOut","createLucideIcon","EmptyState","type","session","useAuth","isAuthenticated","jsx","jsxs","Button","Link","ApplicationsTabContent","isLoading","error","applications","tabValue","displayedApplications","a","b","app","ApplicationCard","ApplicationsPage","searchQuery","setSearchQuery","useState","activeFilter","setActiveFilter","selectedStatus","setSelectedStatus","selectedTags","setSelectedTags","signOut","useQuery","data","supabase","err","toast","allTags","tagName","statusOptions","handleStatusChange","status","handleTagChange","tags","filteredApplications","matchesSearch","handleLogout","Plus","Alert","Shield","AlertDescription","FilterControls","Tabs","TabsList","TabsTrigger","TabsContent"],"mappings":"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","x_google_ignoreList":[0]}