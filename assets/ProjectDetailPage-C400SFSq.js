import{j as a,r as v,L as Ye,p as it,u as oe,q as Je,R,v as Qr,P as wo,_ as Yr,e as Do,d as Jr,t as Fe,w as So,m as jo}from"./react-vendor-TyuC8qxg.js";import{s as _,g as L,a as K,X as No,h as Co,u as Io,i as Ao}from"./index-D5uhiMQB.js";import{T as Xr,a as Zr,b as Ae,c as te,d as en,e as Z,S as tn,U as Eo,A as mt,f as gt,g as Po,R as Ro,D as To,h as Oo,F as Lo,i as Bo}from"./index-Dj4SeaZv.js";import{C as Nt,a as rn,b as nn,c as on}from"./card-DAAmTFtc.js";import{a as ur}from"./utils-DVqAV-fM.js";import{C as _o}from"./circuit-board-URXJjArR.js";import{A as Mo}from"./app-window-BtmSL7uK.js";import{S as fe}from"./server-CWXdQjOI.js";import{U as Fo}from"./user-BuEUrPAo.js";import{C as pr}from"./calendar-DU3hSJ4t.js";import{I as Ee}from"./input-DR-AxXjG.js";import{S as re}from"./skeleton-DgsA2FIA.js";import{C as sn}from"./chevron-down-Bdv2PV_A.js";import{C as an}from"./chevron-right-CBt-y2ls.js";import{W as ln}from"./wrench-KjQ0gjjb.js";import{S as Xe}from"./search-BR1MFiIH.js";import{A as Go}from"./ApplicationCard-D6j3G0U9.js";import{B as se,b as $o}from"./button-CrjcO5GY.js";import{u as ko}from"./useServers-CDZfCJte.js";import{S as Wo}from"./star-sfp0mj0X.js";import{E as Vo}from"./external-link-CnM8C7kZ.js";import{C as qo}from"./chevron-up-DyG2CS1O.js";import{e as Ho,f as Uo,g as cn,h as zo,i as dn,j as un,O as pn}from"./ui-components-CAmpQbeX.js";import{T as Ko}from"./textarea-CzliNkd6.js";import{S as Ct,a as It,b as At,c as Et,d as ne}from"./select-BTYSfX8Z.js";import{F as Qo,a as ye,b as we,c as De,d as Ve,e as qe,f as He}from"./form-Cq2_NWTX.js";import{C as Yo}from"./chevron-left-CemVi7Q2.js";import{C as Jo}from"./circle-plus-BAxS78JD.js";import{B as Xo}from"./badge-bpxx3q91.js";import{L as Zo}from"./label-ppAVubx0.js";import{F as es}from"./folder-BD33vTSM.js";import"./supabase-DLYUZSEu.js";import"./arrow-left-B-jkszN4.js";import"./alert-dialog-CNFa5Ywa.js";import"./collapsible-FhUTsrjs.js";import"./code-CWvNPmcu.js";import"./tabs-CrlmdC9I.js";import"./tag-y-CCJCIb.js";import"./check-CG9NCPd3.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b85eeff9-0672-423a-a0b3-45ea2ba2e2a7",e._sentryDebugIdIdentifier="sentry-dbid-b85eeff9-0672-423a-a0b3-45ea2ba2e2a7")}catch{}function ts({title:e,items:t}){return a.jsxs(Nt,{children:[a.jsx(rn,{className:"pb-2",children:a.jsx(nn,{className:"text-sm font-medium",children:e})}),a.jsx(on,{children:a.jsx("div",{className:"space-y-2",children:t.map((r,n)=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center",children:[r.icon,a.jsx("span",{children:r.label})]}),a.jsx("span",{className:"font-medium",children:r.value})]},n))})})]})}function rs({cards:e}){return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.map((t,r)=>a.jsx(ts,{title:t.title,items:t.items},r))})}function ns({project:e}){const[t,r]=v.useState(e.tools_count||0),[n,o]=v.useState(e.applications_count||0),[s,i]=v.useState(e.servers_count||0),[l,c]=v.useState(e.user_email||"Unknown user"),[p,f]=v.useState(!1);return v.useEffect(()=>{(async()=>{f(!0);try{const{data:u,error:m}=await _.rpc("count_project_ai_tools",{project_id:e.id}).single();if(m)throw m;const{data:g,error:h}=await _.rpc("count_project_applications",{project_id:e.id}).single();if(h)throw h;const{data:b,error:x}=await _.rpc("count_project_servers",{project_id:e.id}).single();if(x)throw x;if(!e.user_email&&e.created_by){const{data:y,error:S}=await _.from("profiles").select("full_name").eq("id",e.created_by).single();!S&&y&&c(y.full_name||"Unknown user")}r((u==null?void 0:u.count)||0),o(g.count||0),i(b.count||0)}catch(u){console.error("Error fetching resource counts:",u),L.error("Failed to load resource information")}finally{f(!1)}})()},[e.id,e.created_by,e.user_email]),a.jsx(rs,{cards:[{title:"Resources",items:[{icon:a.jsx(_o,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"AI Tools",value:p?"...":t},{icon:a.jsx(Mo,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Applications",value:p?"...":n},{icon:a.jsx(fe,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Servers",value:p?"...":s}]},{title:"Created By",items:[{icon:a.jsx(Fo,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"",value:l}]},{title:"Timeline",items:[{icon:a.jsx(pr,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Created:",value:e.created_at?ur(new Date(e.created_at),"PPP"):"Unknown"},{icon:a.jsx(pr,{className:"h-4 w-4 mr-2 text-muted-foreground"}),label:"Updated:",value:e.updated_at?ur(new Date(e.updated_at),"PPP"):"Unknown"}]}]})}function os({server:e,tools:t,isLoading:r,level:n=0,expanded:o=!1}){const[s,i]=v.useState(o),l=d=>{d.preventDefault(),i(!s)},c=d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),i(!s))},p=(d,u=30)=>d?d.length>u?`${d.substring(0,u)}...`:d:"",f=d=>{switch(d.toLowerCase()){case"active":return"bg-green-500";case"development":return"bg-blue-500";case"suspended":return"bg-yellow-500";case"offline":return"bg-gray-500";default:return"bg-gray-400"}};return r?a.jsx(ss,{level:n}):a.jsxs("div",{className:"w-full",role:"row",children:[a.jsxs("div",{className:K("flex items-center w-full p-2 hover:bg-muted/50 rounded-md",n===0?"font-medium":""),children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 cursor-pointer",onClick:l,onKeyDown:c,tabIndex:0,role:"button","aria-expanded":s,"aria-label":s?"Collapse":"Expand",children:t.length>0?s?a.jsx(sn,{className:"h-4 w-4"}):a.jsx(an,{className:"h-4 w-4"}):a.jsx("span",{className:"w-4"})}),a.jsxs("div",{className:"grid grid-cols-12 flex-grow gap-2 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 col-span-4",children:[a.jsx(fe,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Ye,{to:`/servers/${e.id}`,className:"hover:underline truncate",children:e.name})]}),a.jsx("div",{className:"col-span-4 text-muted-foreground truncate",children:p(e.description)}),a.jsx("div",{className:"col-span-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${f(e.status)}`}),a.jsx("span",{className:"capitalize",children:e.status})]})}),a.jsx("div",{className:"col-span-2 text-muted-foreground",children:e.type||"Standard"})]})]}),s&&t.length>0&&a.jsxs("div",{className:"pl-6 border-l border-muted ml-3 mt-1 mb-2",role:"rowgroup",children:[a.jsxs("div",{className:"text-sm text-muted-foreground font-medium p-2",children:["Associated Tools (",t.length,")"]}),t.map(d=>{var u;return a.jsxs("div",{className:"flex items-center p-2 hover:bg-muted/50 rounded-md",role:"row",children:[a.jsx("div",{className:"w-6"}),a.jsxs("div",{className:"grid grid-cols-12 flex-grow gap-2 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 col-span-4",children:[a.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Ye,{to:`/tools/${d.id}`,className:"hover:underline truncate",children:d.name})]}),a.jsx("div",{className:"col-span-4 text-muted-foreground truncate",children:p(d.description)}),a.jsx("div",{className:"col-span-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${d.status==="active"?"bg-green-500":d.status==="development"?"bg-blue-500":d.status==="maintenance"?"bg-yellow-500":d.status==="archived"?"bg-gray-500":"bg-gray-400"}`}),a.jsx("span",{className:"capitalize",children:d.status})]})}),a.jsx("div",{className:"col-span-2 text-muted-foreground",children:((u=d.application_service)==null?void 0:u.name)||"-"})]})]},d.id)})]})]})}function ss({level:e=0}){return a.jsx("div",{className:"w-full",children:a.jsxs("div",{className:K("flex items-center w-full p-2",e===0?"font-medium":""),children:[a.jsx("div",{className:"w-6 mr-2",children:a.jsx(re,{className:"h-4 w-4"})}),a.jsxs("div",{className:"grid grid-cols-12 flex-grow gap-2",children:[a.jsx("div",{className:"col-span-4",children:a.jsx(re,{className:"h-5 w-full"})}),a.jsx("div",{className:"col-span-4",children:a.jsx(re,{className:"h-5 w-full"})}),a.jsx("div",{className:"col-span-2",children:a.jsx(re,{className:"h-5 w-full"})}),a.jsx("div",{className:"col-span-2",children:a.jsx(re,{className:"h-5 w-full"})})]})]})})}function is({servers:e,isLoading:t}){const[r,n]=v.useState(""),o=e.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.description&&s.description.toLowerCase().includes(r.toLowerCase()));return t?a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"relative w-full mb-4",children:[a.jsx(Xe,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{type:"search",placeholder:"Search servers...",className:"pl-8",disabled:!0})]}),a.jsxs("div",{className:"w-full border rounded-md p-2",children:[a.jsxs("div",{className:"grid grid-cols-12 p-2 font-medium text-sm border-b",children:[a.jsx("div",{className:"col-span-4",children:"Name"}),a.jsx("div",{className:"col-span-4",children:"Description"}),a.jsx("div",{className:"col-span-2",children:"Status"}),a.jsx("div",{className:"col-span-2",children:"Type"})]}),[1,2,3].map(s=>a.jsx(as,{},s))]})]}):!e||e.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-12 border rounded-lg bg-muted/10",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsx(fe,{className:"text-muted-foreground"})}),a.jsx("h3",{className:"text-lg font-medium mt-4 mb-2",children:"No servers associated with this project"}),a.jsx("p",{className:"text-muted-foreground",children:"Add servers to this project to visualize them here"})]}):a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"relative w-full mb-4",children:[a.jsx(Xe,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{type:"search",placeholder:"Search servers...",className:"pl-8",value:r,onChange:s=>n(s.target.value)})]}),a.jsxs("div",{className:"w-full border rounded-md p-2",role:"treegrid","aria-label":"Project Servers",children:[a.jsxs("div",{className:"grid grid-cols-12 p-2 font-medium text-sm border-b",role:"row",children:[a.jsx("div",{className:"col-span-4",role:"columnheader",children:"Name"}),a.jsx("div",{className:"col-span-4",role:"columnheader",children:"Description"}),a.jsx("div",{className:"col-span-2",role:"columnheader",children:"Status"}),a.jsx("div",{className:"col-span-2",role:"columnheader",children:"Type"})]}),o.length>0?a.jsx("div",{role:"rowgroup",children:o.map(s=>a.jsx(os,{server:s,tools:s.tools||[],isLoading:!1,expanded:!0},s.id))}):a.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No servers match your search criteria"})]})]})}function as(){return a.jsx("div",{className:"w-full p-2",role:"row",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(re,{className:"h-4 w-4 mr-2"}),a.jsxs("div",{className:"grid grid-cols-12 flex-grow gap-2",children:[a.jsx("div",{className:"col-span-4",children:a.jsx(re,{className:"h-5 w-full"})}),a.jsx("div",{className:"col-span-4",children:a.jsx(re,{className:"h-5 w-full"})}),a.jsx("div",{className:"col-span-2",children:a.jsx(re,{className:"h-5 w-full"})}),a.jsx("div",{className:"col-span-2",children:a.jsx(re,{className:"h-5 w-full"})})]})]})})}function $t(e){const t=it(),{data:r,isLoading:n}=oe({queryKey:["project-servers",e],queryFn:async()=>{if(!e)return[];const{data:c,error:p}=await _.from("project_servers").select("*, server:server_id(*)").eq("project_id",e);if(p)throw p;return c.map(f=>({...f,server:f.server}))},enabled:!!e}),o=Je({mutationFn:async({serverId:c})=>{t.setQueryData(["project-servers",e],d=>{var g;if(!d)return[];if(d.find(h=>h.server_id===c))return d;const m=(g=t.getQueryData(["servers"]))==null?void 0:g.find(h=>h.id===c);return m?[...d,{id:`temp-${Date.now()}`,project_id:e,server_id:c,created_at:new Date().toISOString(),server:m}]:d});const{data:p,error:f}=await _.from("project_servers").insert({project_id:e,server_id:c}).select();if(f)throw f;return p},onSuccess:()=>{t.invalidateQueries({queryKey:["project-servers",e]}),L.success("Server associated with project")},onError:c=>{t.invalidateQueries({queryKey:["project-servers",e]}),console.error("Error associating server:",c),L.error("Failed to associate server with project")}}),s=Je({mutationFn:async({serverId:c})=>{t.setQueryData(["project-servers",e],d=>d?d.filter(u=>u.server_id!==c):[]);const{data:p,error:f}=await _.from("project_servers").delete().eq("project_id",e).eq("server_id",c).select();if(f)throw f;return p},onSuccess:()=>{t.invalidateQueries({queryKey:["project-servers",e]}),L.success("Server removed from project")},onError:c=>{t.invalidateQueries({queryKey:["project-servers",e]}),console.error("Error removing server:",c),L.error("Failed to remove server from project")}}),i=()=>{t.invalidateQueries({queryKey:["project-servers",e]})},l=r&&r.length>0;return{associatedServers:r,isLoadingAssociatedServers:n,hasAssociatedServers:l,associateServer:o,disassociateServer:s,mutateAssociatedServers:i}}function fn(e){const[t,r]=v.useState([]),[n,o]=v.useState(!0),{associatedServers:s,isLoadingAssociatedServers:i}=$t(e),l=(s==null?void 0:s.map(f=>f.server_id))||[],{data:c,isLoading:p}=oe({queryKey:["server-tools-all",l],queryFn:async()=>{if(!l.length)return{};const{data:f,error:d}=await _.from("server_tools").select("server_id, ai_tool:ai_tool_id(*)").in("server_id",l);if(d)throw d;const u={};return f.forEach(m=>{if(u[m.server_id]||(u[m.server_id]=[]),m.ai_tool){const g=m.ai_tool,h={id:g.id,name:g.name,slug:g.slug,description:g.description||"",category:g.category||"",status:g.status,favorite:g.favorite,applications_count:g.applications_count||0,servers_count:g.servers_count||0,agents_count:g.agents_count||0,tags:g.tags||[],organization_id:g.organization_id,organization_slug:g.organization_slug,user_id:g.user_id,server_id:g.server_id,server_slug:g.server_slug,application_service_id:g.application_service_id,created_at:g.created_at,updated_at:g.updated_at,associated:!0};u[m.server_id].push(h)}}),u},enabled:l.length>0});return v.useEffect(()=>{if(s&&c&&!i&&!p){const f=s.map(d=>({...d.server,tools:c[d.server_id]||[]}));r(f),o(!1)}},[s,c,i,p]),{serversWithTools:t,isLoading:i||p||n}}function ls({description:e,projectId:t}){const{serversWithTools:r,isLoading:n}=fn(t);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("p",{className:"text-muted-foreground mb-6",children:e||"No detailed description available for this project."}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Project Resources"}),a.jsx(is,{servers:r,isLoading:n})]})]})}function cs(e){const t=it(),[r,n]=v.useState([]),[o,s]=v.useState([]),{data:i,isLoading:l}=oe({queryKey:["applications"],queryFn:async()=>{const{data:g,error:h}=await _.from("applications").select("*");if(h)throw h;return g}}),{data:c,isLoading:p}=oe({queryKey:["project-applications-join",e],queryFn:async()=>{const{data:g,error:h}=await _.from("project_applications").select("*").eq("project_id",e);if(h)throw h;return g},enabled:!!e}),{data:f,isLoading:d}=oe({queryKey:["project-applications",e],queryFn:async()=>{if(!c||c.length===0)return[];const g=c.map(x=>x.application_id),{data:h,error:b}=await _.from("applications").select("*").in("id",g);if(b)throw b;return h},enabled:!!e&&!!c}),{mutateAsync:u}=Je({mutationFn:async({applicationId:g,action:h})=>{if(h==="associate"){const{error:b}=await _.from("project_applications").insert({project_id:e,application_id:g});if(b)throw b}else{const{error:b}=await _.from("project_applications").delete().match({project_id:e,application_id:g});if(b)throw b}},onSuccess:()=>{t.invalidateQueries({queryKey:["project-applications-join",e]}),t.invalidateQueries({queryKey:["project-applications",e]}),t.invalidateQueries({queryKey:["project",e]})},onError:g=>{console.error("Error updating association:",g),L.error("Failed to update application association")}});return v.useEffect(()=>{if(i&&f){const g=f||[],h=g.map(b=>b.id);n(i.filter(b=>!h.includes(b.id))),s(g)}},[i,f]),{availableApplications:r,associatedApplications:o,isLoading:l||d||p,handleMoveApplication:async(g,h,b)=>{try{if(h==="available"&&b==="associated"){if(await u({applicationId:g,action:"associate"}),i){const x=r.find(y=>y.id===g);x&&(n(y=>y.filter(S=>S.id!==g)),s(y=>[...y,x]))}}else if(h==="associated"&&b==="available"){await u({applicationId:g,action:"disassociate"});const x=o.find(y=>y.id===g);x&&(s(y=>y.filter(S=>S.id!==g)),n(y=>[...y,x]))}}catch(x){console.error("Error in handleMoveApplication:",x),t.invalidateQueries({queryKey:["project-applications-join",e]}),t.invalidateQueries({queryKey:["project-applications",e]})}}}}function Pe(e){"@babel/helpers - typeof";return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(e)}function ds(e,t){if(Pe(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function us(e){var t=ds(e,"string");return Pe(t)=="symbol"?t:t+""}function ps(e,t,r){return(t=us(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fr(Object(r),!0).forEach(function(n){ps(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var gr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),hr=function(){return Math.random().toString(36).substring(7).split("").join(".")},br={INIT:"@@redux/INIT"+hr(),REPLACE:"@@redux/REPLACE"+hr()};function fs(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function mn(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(V(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(V(1));return r(mn)(e,t)}if(typeof e!="function")throw new Error(V(2));var o=e,s=t,i=[],l=i,c=!1;function p(){l===i&&(l=i.slice())}function f(){if(c)throw new Error(V(3));return s}function d(h){if(typeof h!="function")throw new Error(V(4));if(c)throw new Error(V(5));var b=!0;return p(),l.push(h),function(){if(b){if(c)throw new Error(V(6));b=!1,p();var y=l.indexOf(h);l.splice(y,1),i=null}}}function u(h){if(!fs(h))throw new Error(V(7));if(typeof h.type>"u")throw new Error(V(8));if(c)throw new Error(V(9));try{c=!0,s=o(s,h)}finally{c=!1}for(var b=i=l,x=0;x<b.length;x++){var y=b[x];y()}return h}function m(h){if(typeof h!="function")throw new Error(V(10));o=h,u({type:br.REPLACE})}function g(){var h,b=d;return h={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(V(11));function S(){y.next&&y.next(f())}S();var D=b(S);return{unsubscribe:D}}},h[gr]=function(){return this},h}return u({type:br.INIT}),n={dispatch:u,subscribe:d,getState:f,replaceReducer:m},n[gr]=g,n}function vr(e,t){return function(){return t(e.apply(this,arguments))}}function xr(e,t){if(typeof e=="function")return vr(e,t);if(typeof e!="object"||e===null)throw new Error(V(16));var r={};for(var n in e){var o=e[n];typeof o=="function"&&(r[n]=vr(o,t))}return r}function gn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,o){return function(){return n(o.apply(void 0,arguments))}})}function ms(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var o=n.apply(void 0,arguments),s=function(){throw new Error(V(15))},i={getState:o.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(c){return c(i)});return s=gn.apply(void 0,l)(o.dispatch),mr(mr({},o),{},{dispatch:s})}}}function gs(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function hn(e,t){var r=v.useState(function(){return{inputs:t,result:e()}})[0],n=v.useRef(!0),o=v.useRef(r),s=n.current||!!(t&&o.current.inputs&&gs(t,o.current.inputs)),i=s?o.current:{inputs:t,result:e()};return v.useEffect(function(){n.current=!1,o.current=i},[i]),i.result}function hs(e,t){return hn(function(){return e},t)}var A=hn,N=hs,bs="Invariant failed";function vs(e,t){throw new Error(bs)}var ee=function(t){var r=t.top,n=t.right,o=t.bottom,s=t.left,i=n-s,l=o-r,c={top:r,right:n,bottom:o,left:s,width:i,height:l,x:s,y:r,center:{x:(n+s)/2,y:(o+r)/2}};return c},kt=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},yr=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},xs=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},ht={top:0,right:0,bottom:0,left:0},Wt=function(t){var r=t.borderBox,n=t.margin,o=n===void 0?ht:n,s=t.border,i=s===void 0?ht:s,l=t.padding,c=l===void 0?ht:l,p=ee(kt(r,o)),f=ee(yr(r,i)),d=ee(yr(f,c));return{marginBox:p,borderBox:ee(r),paddingBox:f,contentBox:d,margin:o,border:i,padding:c}},Q=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var o=Number(r);return isNaN(o)&&vs(),o},ys=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ze=function(t,r){var n=t.borderBox,o=t.border,s=t.margin,i=t.padding,l=xs(n,r);return Wt({borderBox:l,border:o,margin:s,padding:i})},et=function(t,r){return r===void 0&&(r=ys()),Ze(t,r)},bn=function(t,r){var n={top:Q(r.marginTop),right:Q(r.marginRight),bottom:Q(r.marginBottom),left:Q(r.marginLeft)},o={top:Q(r.paddingTop),right:Q(r.paddingRight),bottom:Q(r.paddingBottom),left:Q(r.paddingLeft)},s={top:Q(r.borderTopWidth),right:Q(r.borderRightWidth),bottom:Q(r.borderBottomWidth),left:Q(r.borderLeftWidth)};return Wt({borderBox:t,margin:n,padding:o,border:s})},vn=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return bn(r,n)},wr=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function ws(e,t){return!!(e===t||wr(e)&&wr(t))}function Ds(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!ws(e[r],t[r]))return!1;return!0}function M(e,t){t===void 0&&(t=Ds);var r=null;function n(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];if(r&&r.lastThis===this&&t(o,r.lastArgs))return r.lastResult;var i=e.apply(this,o);return r={lastResult:i,lastArgs:o,lastThis:this},i}return n.clear=function(){r=null},n}var Re=function(t){var r=[],n=null,o=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return o.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},o};function xn(e,t){}xn.bind(null,"warn");xn.bind(null,"error");function ie(){}function Ss(e,t){return{...e,...t}}function Y(e,t,r){const n=t.map(o=>{const s=Ss(r,o.options);return e.addEventListener(o.eventName,o.fn,s),function(){e.removeEventListener(o.eventName,o.fn,s)}});return function(){n.forEach(s=>{s()})}}const js="Invariant failed";class tt extends Error{}tt.prototype.toString=function(){return this.message};function w(e,t){throw new tt(js)}class Ns extends R.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=ie,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof tt&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Y(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof tt){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Cs=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,rt=e=>e+1,Is=e=>`
  You have lifted an item in position ${rt(e.source.index)}
`,yn=(e,t)=>{const r=e.droppableId===t.droppableId,n=rt(e.index),o=rt(t.index);return r?`
      You have moved the item from position ${n}
      to position ${o}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${o}
  `},wn=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,As=e=>{const t=e.destination;if(t)return yn(e.source,t);const r=e.combine;return r?wn(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Dr=e=>`
  The item has returned to its starting position
  of ${rt(e.index)}
`,Es=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Dr(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${yn(e.source,t)}
    `:r?`
      You have dropped the item.
      ${wn(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${Dr(e.source)}
  `},Ps={dragHandleUsageInstructions:Cs,onDragStart:Is,onDragUpdate:As,onDragEnd:Es};var Qe=Ps;const F={x:0,y:0},G=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),H=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),ae=(e,t)=>e.x===t.x&&e.y===t.y,be=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),pe=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},Te=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Sr=(e,t)=>Math.min(...t.map(r=>Te(e,r))),Dn=e=>t=>({x:e(t.x),y:e(t.y)});var Rs=(e,t)=>{const r=ee({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const Ge=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),jr=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Ts={top:0,right:0,bottom:0,left:0},Os=(e,t)=>t?Ge(e,t.scroll.diff.displacement):e,Ls=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,Bs=(e,t)=>t&&t.shouldClipSubject?Rs(t.pageMarginBox,e):ee(e);var me=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const o=Os(e.marginBox,n),s=Ls(o,r,t),i=Bs(s,n);return{page:e,withPlaceholder:t,active:i}},Vt=(e,t)=>{e.frame||w();const r=e.frame,n=H(t,r.scroll.initial),o=be(n),s={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:o},max:r.scroll.max}},i=me({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s});return{...e,frame:s,subject:i}};const Sn=M(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),jn=M(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),at=M(e=>Object.values(e)),_s=M(e=>Object.values(e));var ve=M((e,t)=>_s(t).filter(n=>e===n.descriptor.droppableId).sort((n,o)=>n.descriptor.index-o.descriptor.index));function qt(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function lt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var ct=M((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),Ms=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:o})=>{if(!r.isCombineEnabled||!qt(o))return null;function i(m){const g={type:"COMBINE",combine:{draggableId:m,droppableId:r.descriptor.id}};return{...o,at:g}}const l=o.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const p=ct(t,n);if(!c){if(!p.length)return null;const m=p[p.length-1];return i(m.descriptor.id)}const f=p.findIndex(m=>m.descriptor.id===c);f===-1&&w();const d=f-1;if(d<0)return null;const u=p[d];return i(u.descriptor.id)},xe=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Nn={point:F,value:0},Oe={invisible:{},visible:{},all:[]},Fs={displaced:Oe,displacedBy:Nn,at:null};var Gs=Fs,J=(e,t)=>r=>e<=r&&r<=t,Cn=e=>{const t=J(e.top,e.bottom),r=J(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const s=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(s&&i)return!0;const c=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right;return c&&p?!0:c&&i||p&&s}},$s=e=>{const t=J(e.top,e.bottom),r=J(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const Ht={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},In={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var ks=e=>t=>{const r=J(t.top,t.bottom),n=J(t.left,t.right);return o=>e===Ht?r(o.top)&&r(o.bottom):n(o.left)&&n(o.right)};const Ws=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:F;return Ge(e,r)},Vs=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,qs=(e,t,r)=>r(t)(e),Ut=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:o})=>{const s=n?Ws(e,t):e;return Vs(s,t,o)&&qs(s,r,o)},Hs=e=>Ut({...e,isVisibleThroughFrameFn:Cn}),An=e=>Ut({...e,isVisibleThroughFrameFn:$s}),Us=e=>Ut({...e,isVisibleThroughFrameFn:ks(e.destination.axis)}),zs=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:o}=t;if(n[e])return!1;const s=o[e];return s?s.shouldAnimate:!0};function Ks(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return ee(kt(r,n))}function Le({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:o,last:s}){return e.reduce(function(l,c){const p=Ks(c,r),f=c.descriptor.id;if(l.all.push(f),!Hs({target:p,destination:t,viewport:n,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const u=zs(f,s,o),m={draggableId:f,shouldAnimate:u};return l.visible[f]=m,l},{all:[],visible:{},invisible:{}})}function Qs(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Nr({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const o=Qs(e,{inHomeList:t});return{displaced:Oe,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function nt({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:o,last:s,index:i,forceShouldAnimate:l}){const c=xe(e,r);if(i==null)return Nr({insideDestination:t,inHomeList:c,displacedBy:o,destination:r});const p=t.find(g=>g.descriptor.index===i);if(!p)return Nr({insideDestination:t,inHomeList:c,displacedBy:o,destination:r});const f=ct(e,t),d=t.indexOf(p),u=f.slice(d);return{displaced:Le({afterDragging:u,destination:r,displacedBy:o,last:s,viewport:n.frame,forceShouldAnimate:l}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function le(e,t){return!!t.effected[e]}var Ys=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const s=n.draggableId,l=r[s].descriptor.index;return le(s,o)?e?l:l-1:e?l+1:l},Js=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const o=n.index,s=e?o+1:o-1,i=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return s<i||s>c?null:s},Xs=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:o,insideDestination:s,previousImpact:i,viewport:l,afterCritical:c})=>{const p=i.at;if(p||w(),p.type==="REORDER"){const d=Js({isMovingForward:e,isInHomeList:t,location:p.destination,insideDestination:s});return d==null?null:nt({draggable:r,insideDestination:s,destination:o,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:d})}const f=Ys({isMovingForward:e,destination:o,displaced:i.displaced,draggables:n,combine:p.combine,afterCritical:c});return f==null?null:nt({draggable:r,insideDestination:s,destination:o,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:f})},Zs=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const o=!!(e.visible[r]||e.invisible[r]);return le(r,t)?o?F:be(n.point):o?n.point:F},ei=({afterCritical:e,impact:t,draggables:r})=>{const n=lt(t);n||w();const o=n.draggableId,s=r[o].page.borderBox.center,i=Zs({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return G(s,i)};const En=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,ti=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,zt=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,Cr=({axis:e,moveRelativeTo:t,isMoving:r})=>pe(e.line,t.marginBox[e.end]+En(e,r),zt(e,t.marginBox,r)),Ir=({axis:e,moveRelativeTo:t,isMoving:r})=>pe(e.line,t.marginBox[e.start]-ti(e,r),zt(e,t.marginBox,r)),ri=({axis:e,moveInto:t,isMoving:r})=>pe(e.line,t.contentBox[e.start]+En(e,r),zt(e,t.contentBox,r));var ni=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:o})=>{const s=ve(n.descriptor.id,r),i=t.page,l=n.axis;if(!s.length)return ri({axis:l,moveInto:n.page,isMoving:i});const{displaced:c,displacedBy:p}=e,f=c.all[0];if(f){const u=r[f];if(le(f,o))return Ir({axis:l,moveRelativeTo:u.page,isMoving:i});const m=Ze(u.page,p.point);return Ir({axis:l,moveRelativeTo:m,isMoving:i})}const d=s[s.length-1];if(d.descriptor.id===t.descriptor.id)return i.borderBox.center;if(le(d.descriptor.id,o)){const u=Ze(d.page,be(o.displacedBy.point));return Cr({axis:l,moveRelativeTo:u,isMoving:i})}return Cr({axis:l,moveRelativeTo:d.page,isMoving:i})},Pt=(e,t)=>{const r=e.frame;return r?G(t,r.scroll.diff.displacement):t};const oi=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:o})=>{const s=t.page.borderBox.center,i=e.at;return!r||!i?s:i.type==="REORDER"?ni({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o}):ei({impact:e,draggables:n,afterCritical:o})};var dt=e=>{const t=oi(e),r=e.droppable;return r?Pt(r,t):t},Pn=(e,t)=>{const r=H(t,e.scroll.initial),n=be(r);return{frame:ee({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function Ar(e,t){return e.map(r=>t[r])}function si(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var ii=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:o})=>{const s=Pn(t,G(t.scroll.current,o)),i=r.frame?Vt(r,G(r.frame.scroll.current,o)):r,l=e.displaced,c=Le({afterDragging:Ar(l.all,n),destination:r,displacedBy:e.displacedBy,viewport:s.frame,last:l,forceShouldAnimate:!1}),p=Le({afterDragging:Ar(l.all,n),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),f={},d={},u=[l,c,p];return l.all.forEach(g=>{const h=si(g,u);if(h){d[g]=h;return}f[g]=!0}),{...e,displaced:{all:l.all,invisible:f,visible:d}}},ai=(e,t)=>G(e.scroll.diff.displacement,t),Kt=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=ai(r,e),o=H(n,t.page.borderBox.center);return G(t.client.borderBox.center,o)},Rn=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:o,onlyOnMainAxis:s=!1})=>{const i=H(r,e.page.borderBox.center),c={target:Ge(e.page.borderBox,i),destination:t,withDroppableDisplacement:o,viewport:n};return s?Us(c):An(c)},li=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:o,viewport:s,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const p=ve(r.descriptor.id,n),f=xe(t,r),d=Ms({isMovingForward:e,draggable:t,destination:r,insideDestination:p,previousImpact:o})||Xs({isMovingForward:e,isInHomeList:f,draggable:t,draggables:n,destination:r,insideDestination:p,previousImpact:o,viewport:s,afterCritical:c});if(!d)return null;const u=dt({impact:d,draggable:t,droppable:r,draggables:n,afterCritical:c});if(Rn({draggable:t,destination:r,newPageBorderBoxCenter:u,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Kt({pageBorderBoxCenter:u,draggable:t,viewport:s}),impact:d,scrollJumpRequest:null};const g=H(u,i),h=ii({impact:d,viewport:s,destination:r,draggables:n,maxScrollChange:g});return{clientSelection:l,impact:h,scrollJumpRequest:g}};const k=e=>{const t=e.subject.active;return t||w(),t};var ci=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:o})=>{const s=r.subject.active;if(!s)return null;const i=r.axis,l=J(s[i.start],s[i.end]),c=at(n).filter(f=>f!==r).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>Cn(o.frame)(k(f))).filter(f=>{const d=k(f);return e?s[i.crossAxisEnd]<d[i.crossAxisEnd]:d[i.crossAxisStart]<s[i.crossAxisStart]}).filter(f=>{const d=k(f),u=J(d[i.start],d[i.end]);return l(d[i.start])||l(d[i.end])||u(s[i.start])||u(s[i.end])}).sort((f,d)=>{const u=k(f)[i.crossAxisStart],m=k(d)[i.crossAxisStart];return e?u-m:m-u}).filter((f,d,u)=>k(f)[i.crossAxisStart]===k(u[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const p=c.filter(f=>J(k(f)[i.start],k(f)[i.end])(t[i.line]));return p.length===1?p[0]:p.length>1?p.sort((f,d)=>k(f)[i.start]-k(d)[i.start])[0]:c.sort((f,d)=>{const u=Sr(t,jr(k(f))),m=Sr(t,jr(k(d)));return u!==m?u-m:k(f)[i.start]-k(d)[i.start]})[0]};const Er=(e,t)=>{const r=e.page.borderBox.center;return le(e.descriptor.id,t)?H(r,t.displacedBy.point):r},di=(e,t)=>{const r=e.page.borderBox;return le(e.descriptor.id,t)?Ge(r,be(t.displacedBy.point)):r};var ui=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:o})=>n.filter(i=>An({target:di(i,o),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=Te(e,Pt(r,Er(i,o))),p=Te(e,Pt(r,Er(l,o)));return c<p?-1:p<c?1:i.descriptor.index-l.descriptor.index})[0]||null,$e=M(function(t,r){const n=r[t.line];return{value:n,point:pe(t.line,n)}});const pi=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return pe(n.line,t[n.line]);const o=e.subject.page.contentBox[n.size],c=ve(e.descriptor.id,r).reduce((p,f)=>p+f.client.marginBox[n.size],0)+t[n.line]-o;return c<=0?null:pe(n.line,c)},Tn=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),On=(e,t,r)=>{const n=e.frame;xe(t,e)&&w(),e.subject.withPlaceholder&&w();const o=$e(e.axis,t.displaceBy).point,s=pi(e,o,r),i={placeholderSize:o,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const f=me({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:f}}const l=s?G(n.scroll.max,s):n.scroll.max,c=Tn(n,l),p=me({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:p,frame:c}},fi=e=>{const t=e.subject.withPlaceholder;t||w();const r=e.frame;if(!r){const i=me({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const n=t.oldFrameMaxScroll;n||w();const o=Tn(r,n),s=me({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:s,frame:o}};var mi=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:o,destination:s,viewport:i,afterCritical:l})=>{if(!t){if(r.length)return null;const d={displaced:Oe,displacedBy:Nn,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},u=dt({impact:d,draggable:n,droppable:s,draggables:o,afterCritical:l}),m=xe(n,s)?s:On(s,n,o);return Rn({draggable:n,destination:m,newPageBorderBoxCenter:u,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const c=e[s.axis.line]<=t.page.borderBox.center[s.axis.line],p=(()=>{const d=t.descriptor.index;return t.descriptor.id===n.descriptor.id||c?d:d+1})(),f=$e(s.axis,n.displaceBy);return nt({draggable:n,insideDestination:r,destination:s,viewport:i,displacedBy:f,last:Oe,index:p})},gi=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:o,droppables:s,viewport:i,afterCritical:l})=>{const c=ci({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:i});if(!c)return null;const p=ve(c.descriptor.id,o),f=ui({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:p,afterCritical:l}),d=mi({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:o,moveRelativeTo:f,insideDestination:p,viewport:i,afterCritical:l});if(!d)return null;const u=dt({impact:d,draggable:r,droppable:c,draggables:o,afterCritical:l});return{clientSelection:Kt({pageBorderBoxCenter:u,draggable:r,viewport:i}),impact:d,scrollJumpRequest:null}},U=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const hi=(e,t)=>{const r=U(e);return r?t[r]:null};var bi=({state:e,type:t})=>{const r=hi(e.impact,e.dimensions.droppables),n=!!r,o=e.dimensions.droppables[e.critical.droppable.id],s=r||o,i=s.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!n)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:d,droppables:u}=e.dimensions;return l?li({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:p,destination:s,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):gi({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:p,isOver:s,draggables:d,droppables:u,viewport:e.viewport,afterCritical:e.afterCritical})};function de(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Ln(e){const t=J(e.top,e.bottom),r=J(e.left,e.right);return function(o){return t(o.y)&&r(o.x)}}function vi(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function xi({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,o=r.map(s=>{const i=s.axis,l=pe(s.axis.line,e.center[i.line],s.page.borderBox.center[i.crossAxisLine]);return{id:s.descriptor.id,distance:Te(n,l)}}).sort((s,i)=>i.distance-s.distance);return o[0]?o[0].id:null}function yi({pageBorderBox:e,draggable:t,droppables:r}){const n=at(r).filter(o=>{if(!o.isEnabled)return!1;const s=o.subject.active;if(!s||!vi(e,s))return!1;if(Ln(s)(e.center))return!0;const i=o.axis,l=s.center[i.crossAxisLine],c=e[i.crossAxisStart],p=e[i.crossAxisEnd],f=J(s[i.crossAxisStart],s[i.crossAxisEnd]),d=f(c),u=f(p);return!d&&!u?!0:d?c<l:p>l});return n.length?n.length===1?n[0].descriptor.id:xi({pageBorderBox:e,draggable:t,candidates:n}):null}const Bn=(e,t)=>ee(Ge(e,t));var wi=(e,t)=>{const r=e.frame;return r?Bn(t,r.scroll.diff.value):t};function _n({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Di({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Si=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:o,viewport:s,afterCritical:i})=>{const l=r.axis,c=$e(r.axis,t.displaceBy),p=c.value,f=e[l.start],d=e[l.end],m=ct(t,n).find(h=>{const b=h.descriptor.id,x=h.page.borderBox.center[l.line],y=le(b,i),S=_n({displaced:o,id:b});return y?S?d<=x:f<x-p:S?d<=x+p:f<x})||null,g=Di({draggable:t,closest:m,inHomeList:xe(t,r)});return nt({draggable:t,insideDestination:n,destination:r,viewport:s,last:o,displacedBy:c,index:g})};const ji=4;var Ni=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:o,afterCritical:s})=>{if(!n.isCombineEnabled)return null;const i=n.axis,l=$e(n.axis,e.displaceBy),c=l.value,p=t[i.start],f=t[i.end],u=ct(e,o).find(g=>{const h=g.descriptor.id,b=g.page.borderBox,y=b[i.size]/ji,S=le(h,s),D=_n({displaced:r.displaced,id:h});return S?D?f>b[i.start]+y&&f<b[i.end]-y:p>b[i.start]-c+y&&p<b[i.end]-c-y:D?f>b[i.start]+c+y&&f<b[i.end]+c-y:p>b[i.start]+y&&p<b[i.end]-y});return u?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:u.descriptor.id,droppableId:n.descriptor.id}}}:null},Mn=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:o,viewport:s,afterCritical:i})=>{const l=Bn(t.page.borderBox,e),c=yi({pageBorderBox:l,draggable:t,droppables:n});if(!c)return Gs;const p=n[c],f=ve(p.descriptor.id,r),d=wi(p,l);return Ni({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:o,destination:p,insideDestination:f,afterCritical:i})||Si({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:p,insideDestination:f,last:o.displaced,viewport:s,afterCritical:i})},Qt=(e,t)=>({...e,[t.descriptor.id]:t});const Ci=({previousImpact:e,impact:t,droppables:r})=>{const n=U(e),o=U(t);if(!n||n===o)return r;const s=r[n];if(!s.subject.withPlaceholder)return r;const i=fi(s);return Qt(r,i)};var Ii=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:o})=>{const s=Ci({previousImpact:n,impact:o,droppables:r}),i=U(o);if(!i)return s;const l=r[i];if(xe(e,l)||l.subject.withPlaceholder)return s;const c=On(l,e,t);return Qt(s,c)},Ce=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:o,scrollJumpRequest:s})=>{const i=n||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,p=H(c,e.initial.client.selection),f={offset:p,selection:c,borderBoxCenter:G(e.initial.client.borderBoxCenter,p)},d={selection:G(f.selection,i.scroll.current),borderBoxCenter:G(f.borderBoxCenter,i.scroll.current),offset:G(f.offset,i.scroll.diff.value)},u={client:f,page:d};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:u};const m=l.draggables[e.critical.draggable.id],g=o||Mn({pageOffset:d.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),h=Ii({draggable:m,impact:g,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:u,dimensions:{draggables:l.draggables,droppables:h},impact:g,viewport:i,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function Ai(e,t){return e.map(r=>t[r])}var Fn=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:o})=>{const s=e.displaced,i=Ai(s.all,r),l=Le({afterDragging:i,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:s});return{...e,displaced:l}},Gn=({impact:e,draggable:t,droppable:r,draggables:n,viewport:o,afterCritical:s})=>{const i=dt({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s});return Kt({pageBorderBoxCenter:i,draggable:t,viewport:o})},$n=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&w();const n=e.impact,o=r||e.viewport,s=t||e.dimensions,{draggables:i,droppables:l}=s,c=i[e.critical.draggable.id],p=U(n);p||w();const f=l[p],d=Fn({impact:n,viewport:o,destination:f,draggables:i}),u=Gn({impact:d,draggable:c,droppable:f,draggables:i,viewport:o,afterCritical:e.afterCritical});return Ce({impact:d,clientSelection:u,state:e,dimensions:s,viewport:o})},Ei=e=>({index:e.index,droppableId:e.droppableId}),kn=({draggable:e,home:t,draggables:r,viewport:n})=>{const o=$e(t.axis,e.displaceBy),s=ve(t.descriptor.id,r),i=s.indexOf(e);i===-1&&w();const l=s.slice(i+1),c=l.reduce((u,m)=>(u[m.descriptor.id]=!0,u),{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:c};return{impact:{displaced:Le({afterDragging:l,destination:t,displacedBy:o,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:Ei(e.descriptor)}},afterCritical:p}},Pi=(e,t)=>({draggables:e.draggables,droppables:Qt(e.droppables,t)}),Ri=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=Ze(e.client,t),o=et(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:o}},Ti=e=>{const t=e.frame;return t||w(),t},Oi=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(o=>{const s=o.descriptor.droppableId,i=t[s],c=Ti(i).scroll.diff.value,p=G(n,c);return Ri({draggable:o,offset:p,initialWindowScroll:r.scroll.initial})})},Li=({state:e,published:t})=>{const r=t.modified.map(x=>{const y=e.dimensions.droppables[x.droppableId];return Vt(y,x.scroll)}),n={...e.dimensions.droppables,...Sn(r)},o=jn(Oi({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),s={...e.dimensions.draggables,...o};t.removals.forEach(x=>{delete s[x]});const i={droppables:n,draggables:s},l=U(e.impact),c=l?i.droppables[l]:null,p=i.draggables[e.critical.draggable.id],f=i.droppables[e.critical.droppable.id],{impact:d,afterCritical:u}=kn({draggable:p,home:f,draggables:s,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:d,g=Mn({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:m,viewport:e.viewport,afterCritical:u}),h={...e,phase:"DRAGGING",impact:g,onLiftImpact:d,dimensions:i,afterCritical:u,forceShouldAnimate:!1};return e.phase==="COLLECTING"?h:{...h,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Rt=e=>e.movementMode==="SNAP",bt=(e,t,r)=>{const n=Pi(e.dimensions,t);return!Rt(e)||r?Ce({state:e,dimensions:n}):$n({state:e,dimensions:n})};function vt(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Pr={phase:"IDLE",completed:null,shouldFlush:!1};var Bi=(e=Pr,t)=>{if(t.type==="FLUSH")return{...Pr,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&w();const{critical:r,clientSelection:n,viewport:o,dimensions:s,movementMode:i}=t.payload,l=s.draggables[r.draggable.id],c=s.droppables[r.droppable.id],p={selection:n,borderBoxCenter:l.client.borderBox.center,offset:F},f={client:p,page:{selection:G(p.selection,o.scroll.initial),borderBoxCenter:G(p.selection,o.scroll.initial),offset:G(p.selection,o.scroll.diff.value)}},d=at(s.droppables).every(h=>!h.isFixedOnPage),{impact:u,afterCritical:m}=kn({draggable:l,home:c,draggables:s.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:s,initial:f,current:f,isWindowScrollAllowed:d,impact:u,afterCritical:m,onLiftImpact:u,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&w(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||w(),Li({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;de(e)||w();const{client:r}=t.payload;return ae(r,e.current.client.selection)?e:Ce({state:e,clientSelection:r,impact:Rt(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return vt(e);de(e)||w();const{id:r,newScroll:n}=t.payload,o=e.dimensions.droppables[r];if(!o)return e;const s=Vt(o,n);return bt(e,s,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;de(e)||w();const{id:r,isEnabled:n}=t.payload,o=e.dimensions.droppables[r];o||w(),o.isEnabled===n&&w();const s={...o,isEnabled:n};return bt(e,s,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;de(e)||w();const{id:r,isCombineEnabled:n}=t.payload,o=e.dimensions.droppables[r];o||w(),o.isCombineEnabled===n&&w();const s={...o,isCombineEnabled:n};return bt(e,s,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;de(e)||w(),e.isWindowScrollAllowed||w();const r=t.payload.newScroll;if(ae(e.viewport.scroll.current,r))return vt(e);const n=Pn(e.viewport,r);return Rt(e)?$n({state:e,viewport:n}):Ce({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!de(e))return e;const r=t.payload.maxScroll;if(ae(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&w();const r=bi({state:e,type:t.type});return r?Ce({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&w(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:o}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||w(),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:o,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};const _i=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Mi=e=>({type:"LIFT",payload:e}),Fi=e=>({type:"INITIAL_PUBLISH",payload:e}),Gi=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),$i=()=>({type:"COLLECTION_STARTING",payload:null}),ki=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Wi=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Vi=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Wn=e=>({type:"MOVE",payload:e}),qi=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Hi=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Ui=()=>({type:"MOVE_UP",payload:null}),zi=()=>({type:"MOVE_DOWN",payload:null}),Ki=()=>({type:"MOVE_RIGHT",payload:null}),Qi=()=>({type:"MOVE_LEFT",payload:null}),Yt=()=>({type:"FLUSH",payload:null}),Yi=e=>({type:"DROP_ANIMATE",payload:e}),Jt=e=>({type:"DROP_COMPLETE",payload:e}),Vn=e=>({type:"DROP",payload:e}),Ji=e=>({type:"DROP_PENDING",payload:e}),qn=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Xi=e=>({getState:t,dispatch:r})=>n=>o=>{if(o.type!=="LIFT"){n(o);return}const{id:s,clientSelection:i,movementMode:l}=o.payload,c=t();c.phase==="DROP_ANIMATING"&&r(Jt({completed:c.completed})),t().phase!=="IDLE"&&w(),r(Yt()),r(_i({draggableId:s,movementMode:l}));const f={draggableId:s,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:d,dimensions:u,viewport:m}=e.startPublishing(f);r(Fi({critical:d,dimensions:u,clientSelection:i,movementMode:l,viewport:m}))},Zi=e=>()=>t=>r=>{r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)};const Xt={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Be={opacity:{drop:0,combining:.7},scale:{drop:.75}},Hn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ce=`${Hn.outOfTheWay}s ${Xt.outOfTheWay}`,Ie={fluid:`opacity ${ce}`,snap:`transform ${ce}, opacity ${ce}`,drop:e=>{const t=`${e}s ${Xt.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${ce}`,placeholder:`height ${ce}, width ${ce}, margin ${ce}`},Rr=e=>ae(e,F)?void 0:`translate(${e.x}px, ${e.y}px)`,Tt={moveTo:Rr,drop:(e,t)=>{const r=Rr(e);if(r)return t?`${r} scale(${Be.scale.drop})`:r}},{minDropTime:Ot,maxDropTime:Un}=Hn,ea=Un-Ot,Tr=1500,ta=.6;var ra=({current:e,destination:t,reason:r})=>{const n=Te(e,t);if(n<=0)return Ot;if(n>=Tr)return Un;const o=n/Tr,s=Ot+ea*o,i=r==="CANCEL"?s*ta:s;return Number(i.toFixed(2))},na=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:o})=>{const{draggables:s,droppables:i}=r,l=U(e),c=l?i[l]:null,p=i[t.descriptor.droppableId],f=Gn({impact:e,draggable:t,draggables:s,afterCritical:o,droppable:c||p,viewport:n});return H(f,t.client.borderBox.center)},oa=({draggables:e,reason:t,lastImpact:r,home:n,viewport:o,onLiftImpact:s})=>!r.at||t!=="DROP"?{impact:Fn({draggables:e,impact:s,destination:n,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:Oe},didDropInsideDroppable:!0};const sa=({getState:e,dispatch:t})=>r=>n=>{if(n.type!=="DROP"){r(n);return}const o=e(),s=n.payload.reason;if(o.phase==="COLLECTING"){t(Ji({reason:s}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&w(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||w();const l=o.critical,c=o.dimensions,p=c.draggables[o.critical.draggable.id],{impact:f,didDropInsideDroppable:d}=oa({reason:s,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),u=d?qt(f):null,m=d?lt(f):null,g={index:l.draggable.index,droppableId:l.droppable.id},h={draggableId:p.descriptor.id,type:p.descriptor.type,source:g,reason:s,mode:o.movementMode,destination:u,combine:m},b=na({impact:f,draggable:p,dimensions:c,viewport:o.viewport,afterCritical:o.afterCritical}),x={critical:o.critical,afterCritical:o.afterCritical,result:h,impact:f};if(!(!ae(o.current.client.offset,b)||!!h.combine)){t(Jt({completed:x}));return}const S=ra({current:o.current.client.offset,destination:b,reason:s});t(Yi({newHomeClientOffset:b,dropDuration:S,completed:x}))};var ia=sa,zn=()=>({x:window.pageXOffset,y:window.pageYOffset});function aa(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function la({onWindowScroll:e}){function t(){e(zn())}const r=Re(t),n=aa(r);let o=ie;function s(){return o!==ie}function i(){s()&&w(),o=Y(window,[n])}function l(){s()||w(),r.cancel(),o(),o=ie}return{start:i,stop:l,isActive:s}}const ca=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",da=e=>{const t=la({onWindowScroll:r=>{e.dispatch(qi({newScroll:r}))}});return r=>n=>{!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&ca(n)&&t.stop(),r(n)}};var ua=da,pa=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),o=s=>{t||r||(t=!0,e(s),clearTimeout(n))};return o.wasCalled=()=>t,o},fa=()=>{const e=[],t=o=>{const s=e.findIndex(l=>l.timerId===o);s===-1&&w();const[i]=e.splice(s,1);i.callback()};return{add:o=>{const s=setTimeout(()=>t(s)),i={timerId:s,callback:o};e.push(i)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const ma=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,ga=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,ha=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},Se=(e,t)=>{t()},Ue=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function xt(e,t,r,n){if(!e){r(n(t));return}const o=pa(r);e(t,{announce:o}),o.wasCalled()||r(n(t))}var ba=(e,t)=>{const r=fa();let n=null;const o=(d,u)=>{n&&w(),Se("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:d,mode:u})})},s=(d,u)=>{n&&w(),Se("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(Ue(d,u))})},i=(d,u)=>{n&&w();const m=Ue(d,u);n={mode:u,lastCritical:d,lastLocation:m.source,lastCombine:null},r.add(()=>{Se("onDragStart",()=>xt(e().onDragStart,m,t,Qe.onDragStart))})},l=(d,u)=>{const m=qt(u),g=lt(u);n||w();const h=!ha(d,n.lastCritical);h&&(n.lastCritical=d);const b=!ma(n.lastLocation,m);b&&(n.lastLocation=m);const x=!ga(n.lastCombine,g);if(x&&(n.lastCombine=g),!h&&!b&&!x)return;const y={...Ue(d,n.mode),combine:g,destination:m};r.add(()=>{Se("onDragUpdate",()=>xt(e().onDragUpdate,y,t,Qe.onDragUpdate))})},c=()=>{n||w(),r.flush()},p=d=>{n||w(),n=null,Se("onDragEnd",()=>xt(e().onDragEnd,d,t,Qe.onDragEnd))};return{beforeCapture:o,beforeStart:s,start:i,update:l,flush:c,drop:p,abort:()=>{if(!n)return;const d={...Ue(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};p(d)}}},va=(e,t)=>{const r=ba(e,t);return n=>o=>s=>{if(s.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){const l=s.payload.critical;r.beforeStart(l,s.payload.movementMode),o(s),r.start(l,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){const l=s.payload.completed.result;r.flush(),o(s),r.drop(l);return}if(o(s),s.type==="FLUSH"){r.abort();return}const i=n.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const xa=e=>t=>r=>{if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&w(),e.dispatch(Jt({completed:n.completed}))};var ya=xa;const wa=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return o=>s=>{if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&n(),o(s),s.type!=="DROP_ANIMATE")return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(qn())}};r=requestAnimationFrame(()=>{r=null,t=Y(window,[i])})}};var Da=wa,Sa=e=>()=>t=>r=>{(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)},ja=e=>{let t=!1;return()=>r=>n=>{if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;const o=n.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Na=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var Ca=e=>t=>r=>n=>{if(Na(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);const o=t.getState();o.phase!=="DRAGGING"&&w(),e.start(o);return}r(n),e.scroll(t.getState())};const Ia=e=>t=>r=>{if(t(r),r.type!=="PUBLISH_WHILE_DRAGGING")return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Vn({reason:n.reason})))};var Aa=Ia;const Ea=gn;var Pa=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:o,autoScroller:s})=>mn(Bi,Ea(ms(Zi(r),Sa(e),Xi(e),ia,ya,Da,Aa,Ca(s),ua,ja(t),va(n,o))));const yt=()=>({additions:{},removals:{},modified:{}});function Ra({registry:e,callbacks:t}){let r=yt(),n=null;const o=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:c,removals:p,modified:f}=r,d=Object.keys(c).map(g=>e.draggable.getById(g).getDimension(F)).sort((g,h)=>g.descriptor.index-h.descriptor.index),u=Object.keys(f).map(g=>{const b=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:b}}),m={additions:d,removals:Object.keys(p),modified:u};r=yt(),t.publish(m)}))};return{add:c=>{const p=c.descriptor.id;r.additions[p]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[p]&&delete r.removals[p],o()},remove:c=>{const p=c.descriptor;r.removals[p.id]=!0,r.modified[p.droppableId]=!0,r.additions[p.id]&&delete r.additions[p.id],o()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=yt())}}}var Kn=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const o=H({x:t,y:e},{x:n,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},Qn=()=>{const e=document.documentElement;return e||w(),e},Yn=()=>{const e=Qn();return Kn({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Ta=()=>{const e=zn(),t=Yn(),r=e.y,n=e.x,o=Qn(),s=o.clientWidth,i=o.clientHeight,l=n+s,c=r+i;return{frame:ee({top:r,left:n,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:F,displacement:F}}}},Oa=({critical:e,scrollOptions:t,registry:r})=>{const n=Ta(),o=n.scroll.current,s=e.droppable,i=r.droppable.getAllByType(s.type).map(f=>f.callbacks.getDimensionAndWatchScroll(o,t)),l=r.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(o));return{dimensions:{draggables:jn(l),droppables:Sn(i)},critical:e,viewport:n}};function Or(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var La=(e,t)=>{let r=null;const n=Ra({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=(u,m)=>{e.droppable.exists(u)||w(),r&&t.updateDroppableIsEnabled({id:u,isEnabled:m})},s=(u,m)=>{r&&(e.droppable.exists(u)||w(),t.updateDroppableIsCombineEnabled({id:u,isCombineEnabled:m}))},i=(u,m)=>{r&&(e.droppable.exists(u)||w(),t.updateDroppableScroll({id:u,newScroll:m}))},l=(u,m)=>{r&&e.droppable.getById(u).callbacks.scroll(m)},c=()=>{if(!r)return;n.stop();const u=r.critical.droppable;e.droppable.getAllByType(u.type).forEach(m=>m.callbacks.dragStopped()),r.unsubscribe(),r=null},p=u=>{r||w();const m=r.critical.draggable;u.type==="ADDITION"&&Or(e,m,u.value)&&n.add(u.value),u.type==="REMOVAL"&&Or(e,m,u.value)&&n.remove(u.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:s,scrollDroppable:l,updateDroppableScroll:i,startPublishing:u=>{r&&w();const m=e.draggable.getById(u.draggableId),g=e.droppable.getById(m.descriptor.droppableId),h={draggable:m.descriptor,droppable:g.descriptor},b=e.subscribe(p);return r={critical:h,unsubscribe:b},Oa({critical:h,registry:e,scrollOptions:u.scrollOptions})},stopPublishing:c}},Jn=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Ba=e=>{window.scrollBy(e.x,e.y)};const _a=M(e=>at(e).filter(t=>!(!t.isEnabled||!t.frame))),Ma=(e,t)=>_a(t).find(n=>(n.frame||w(),Ln(n.frame.pageMarginBox)(e)))||null;var Fa=({center:e,destination:t,droppables:r})=>{if(t){const o=r[t];return o.frame?o:null}return Ma(e,r)};const _e={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Ga=(e,t,r=()=>_e)=>{const n=r(),o=e[t.size]*n.startFromPercentage,s=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:s}},Xn=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},Zt=1,$a=(e,t,r=()=>_e)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return Zt;const s=1-Xn({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=n.maxPixelScroll*n.ease(s);return Math.ceil(i)},ka=(e,t,r)=>{const n=r(),o=n.durationDampening.accelerateAt,s=n.durationDampening.stopDampeningAt,i=t,l=s,p=Date.now()-i;if(p>=s)return e;if(p<o)return Zt;const f=Xn({startOfRange:o,endOfRange:l,current:p}),d=e*n.ease(f);return Math.ceil(d)},Lr=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:o})=>{const s=$a(e,t,o);return s===0?0:n?Math.max(ka(s,r,o),Zt):s},Br=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i=Ga(e,n,s);return t[n.end]<t[n.start]?Lr({distanceToEdge:t[n.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s}):-1*Lr({distanceToEdge:t[n.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s})},Wa=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,o=t.width>e.width;return!o&&!n?r:o&&n?null:{x:o?0:r.x,y:n?0:r.y}};const Va=Dn(e=>e===0?0:e);var Zn=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},l=Br({container:t,distanceToEdges:i,dragStartTime:e,axis:Ht,shouldUseTimeDampening:o,getAutoScrollerOptions:s}),c=Br({container:t,distanceToEdges:i,dragStartTime:e,axis:In,shouldUseTimeDampening:o,getAutoScrollerOptions:s}),p=Va({x:c,y:l});if(ae(p,F))return null;const f=Wa({container:t,subject:r,proposedScroll:p});return f?ae(f,F)?null:f:null};const qa=Dn(e=>e===0?0:e>0?1:-1),er=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const o=G(t,n),s={x:e(o.x,r.x),y:e(o.y,r.y)};return ae(s,F)?null:s}})(),eo=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=qa(r),s=er({max:n,current:t,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},tr=(e,t)=>eo({current:e.scroll.current,max:e.scroll.max,change:t}),Ha=(e,t)=>{if(!tr(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return er({current:n,max:r,change:t})},rr=(e,t)=>{const r=e.frame;return r?eo({current:r.scroll.current,max:r.scroll.max,change:t}):!1},Ua=(e,t)=>{const r=e.frame;return!r||!rr(e,t)?null:er({current:r.scroll.current,max:r.scroll.max,change:t})};var za=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i=Zn({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s});return i&&tr(e,i)?i:null},Ka=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i=e.frame;if(!i)return null;const l=Zn({dragStartTime:n,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s});return l&&rr(e,l)?l:null},_r=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:o,getAutoScrollerOptions:s})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const d=e.viewport,u=za({dragStartTime:t,viewport:d,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:s});if(u){n(u);return}}const p=Fa({center:i,destination:U(e.impact),droppables:e.dimensions.droppables});if(!p)return;const f=Ka({dragStartTime:t,droppable:p,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:s});f&&o(p.descriptor.id,f)},Qa=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>_e})=>{const n=Re(e),o=Re(t);let s=null;const i=p=>{s||w();const{shouldUseTimeDampening:f,dragStartTime:d}=s;_r({state:p,scrollWindow:n,scrollDroppable:o,dragStartTime:d,shouldUseTimeDampening:f,getAutoScrollerOptions:r})};return{start:p=>{s&&w();const f=Date.now();let d=!1;const u=()=>{d=!0};_r({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:u,scrollDroppable:u,getAutoScrollerOptions:r}),s={dragStartTime:f,shouldUseTimeDampening:d},d&&i(p)},stop:()=>{s&&(n.cancel(),o.cancel(),s=null)},scroll:i}},Ya=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(l,c)=>{const p=G(l.current.client.selection,c);e({client:p})},o=(l,c)=>{if(!rr(l,c))return c;const p=Ua(l,c);if(!p)return t(l.descriptor.id,c),null;const f=H(c,p);return t(l.descriptor.id,f),H(c,f)},s=(l,c,p)=>{if(!l||!tr(c,p))return p;const f=Ha(c,p);if(!f)return r(p),null;const d=H(p,f);return r(d),H(p,d)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const p=U(l.impact);p||w();const f=o(l.dimensions.droppables[p],c);if(!f)return;const d=l.viewport,u=s(l.isWindowScrollAllowed,d,f);u&&n(l,u)}},Ja=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const o=Qa({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),s=Ya({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(n().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){o.scroll(c);return}c.scrollJumpRequest&&s(c)}},start:o.start,stop:o.stop}};const ge="data-rfd",he=(()=>{const e=`${ge}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Lt=(()=>{const e=`${ge}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Xa=(()=>{const e=`${ge}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Mr={contextId:`${ge}-scroll-container-context-id`},Za=e=>t=>`[${t}="${e}"]`,je=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),el="pointer-events: none;";var tl=e=>{const t=Za(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(he.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:el,dropAnimating:l}}})(),n=(()=>{const l=`
      transition: ${Ie.outOfTheWay};
    `;return{selector:t(Lt.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),o={selector:t(Xa.contextId),styles:{always:"overflow-anchor: none;"}},i=[n,r,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:je(i,"always"),resting:je(i,"resting"),dragging:je(i,"dragging"),dropAnimating:je(i,"dropAnimating"),userCancel:je(i,"userCancel")}};const rl=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?v.useLayoutEffect:v.useEffect;var z=rl;const wt=()=>{const e=document.querySelector("head");return e||w(),e},Fr=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function nl(e,t){const r=A(()=>tl(e),[e]),n=v.useRef(null),o=v.useRef(null),s=N(M(d=>{const u=o.current;u||w(),u.textContent=d}),[]),i=N(d=>{const u=n.current;u||w(),u.textContent=d},[]);z(()=>{!n.current&&!o.current||w();const d=Fr(t),u=Fr(t);return n.current=d,o.current=u,d.setAttribute(`${ge}-always`,e),u.setAttribute(`${ge}-dynamic`,e),wt().appendChild(d),wt().appendChild(u),i(r.always),s(r.resting),()=>{const m=g=>{const h=g.current;h||w(),wt().removeChild(h),g.current=null};m(n),m(o)}},[t,i,s,r.always,r.resting,e]);const l=N(()=>s(r.dragging),[s,r.dragging]),c=N(d=>{if(d==="DROP"){s(r.dropAnimating);return}s(r.userCancel)},[s,r.dropAnimating,r.userCancel]),p=N(()=>{o.current&&s(r.resting)},[s,r.resting]);return A(()=>({dragging:l,dropping:c,resting:p}),[l,c,p])}function to(e,t){return Array.from(e.querySelectorAll(t))}var ro=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function ut(e){return e instanceof ro(e).HTMLElement}function ol(e,t){const r=`[${he.contextId}="${e}"]`,n=to(document,r);if(!n.length)return null;const o=n.find(s=>s.getAttribute(he.draggableId)===t);return!o||!ut(o)?null:o}function sl(e){const t=v.useRef({}),r=v.useRef(null),n=v.useRef(null),o=v.useRef(!1),s=N(function(u,m){const g={id:u,focus:m};return t.current[u]=g,function(){const b=t.current;b[u]!==g&&delete b[u]}},[]),i=N(function(u){const m=ol(e,u);m&&m!==document.activeElement&&m.focus()},[e]),l=N(function(u,m){r.current===u&&(r.current=m)},[]),c=N(function(){n.current||o.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const u=r.current;u&&i(u)}))},[i]),p=N(function(u){r.current=null;const m=document.activeElement;m&&m.getAttribute(he.draggableId)===u&&(r.current=u)},[]);return z(()=>(o.current=!0,function(){o.current=!1;const u=n.current;u&&cancelAnimationFrame(u)}),[]),A(()=>({register:s,tryRecordFocus:p,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[s,p,c,l])}function il(){const e={draggables:{},droppables:{}},t=[];function r(d){return t.push(d),function(){const m=t.indexOf(d);m!==-1&&t.splice(m,1)}}function n(d){t.length&&t.forEach(u=>u(d))}function o(d){return e.draggables[d]||null}function s(d){const u=o(d);return u||w(),u}const i={register:d=>{e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:(d,u)=>{const m=e.draggables[u.descriptor.id];m&&m.uniqueId===d.uniqueId&&(delete e.draggables[u.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:d=>{const u=d.descriptor.id,m=o(u);m&&d.uniqueId===m.uniqueId&&(delete e.draggables[u],e.droppables[d.descriptor.droppableId]&&n({type:"REMOVAL",value:d}))},getById:s,findById:o,exists:d=>!!o(d),getAllByType:d=>Object.values(e.draggables).filter(u=>u.descriptor.type===d)};function l(d){return e.droppables[d]||null}function c(d){const u=l(d);return u||w(),u}const p={register:d=>{e.droppables[d.descriptor.id]=d},unregister:d=>{const u=l(d.descriptor.id);u&&d.uniqueId===u.uniqueId&&delete e.droppables[d.descriptor.id]},getById:c,findById:l,exists:d=>!!l(d),getAllByType:d=>Object.values(e.droppables).filter(u=>u.descriptor.type===d)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:p,subscribe:r,clean:f}}function al(){const e=A(il,[]);return v.useEffect(()=>function(){R.version.startsWith("16")||R.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var nr=R.createContext(null),ot=()=>{const e=document.body;return e||w(),e};const ll={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var cl=ll;const dl=e=>`rfd-announcement-${e}`;function ul(e){const t=A(()=>dl(e),[e]),r=v.useRef(null);return v.useEffect(function(){const s=document.createElement("div");return r.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Yr(s.style,cl),ot().appendChild(s),function(){setTimeout(function(){const c=ot();c.contains(s)&&c.removeChild(s),s===r.current&&(r.current=null)})}},[t]),N(o=>{const s=r.current;if(s){s.textContent=o;return}},[])}let pl=0;const no={separator:"::"};function fl(e,t=no){return A(()=>`${e}${t.separator}${pl++}`,[t.separator,e])}function ml(e,t=no){const r=R.useId();return A(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}var or="useId"in R?ml:fl;function gl({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function hl({contextId:e,text:t}){const r=or("hidden-text",{separator:"-"}),n=A(()=>gl({contextId:e,uniqueId:r}),[r,e]);return v.useEffect(function(){const s=document.createElement("div");return s.id=n,s.textContent=t,s.style.display="none",ot().appendChild(s),function(){const l=ot();l.contains(s)&&l.removeChild(s)}},[n,t]),n}var pt=R.createContext(null);function oo(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),t}function bl(){let e=null;function t(){return!!e}function r(i){return i===e}function n(i){e&&w();const l={abandon:i};return e=l,l}function o(){e||w(),e=null}function s(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:r,claim:n,release:o,tryAbandon:s}}function Me(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const vl=9,xl=13,sr=27,so=32,yl=33,wl=34,Dl=35,Sl=36,jl=37,Nl=38,Cl=39,Il=40,Al={[xl]:!0,[vl]:!0};var io=e=>{Al[e.keyCode]&&e.preventDefault()};const El=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})();var ft=El;const ao=0,Gr=5;function Pl(e,t){return Math.abs(t.x-e.x)>=Gr||Math.abs(t.y-e.y)>=Gr}const $r={type:"IDLE"};function Rl({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:o=>{const{button:s,clientX:i,clientY:l}=o;if(s!==ao)return;const c={x:i,y:l},p=r();if(p.type==="DRAGGING"){o.preventDefault(),p.actions.move(c);return}p.type!=="PENDING"&&w();const f=p.point;if(!Pl(f,c))return;o.preventDefault();const d=p.actions.fluidLift(c);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:o=>{const s=r();if(s.type!=="DRAGGING"){e();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:o=>{r().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(r().type==="PENDING"){e();return}if(o.keyCode===sr){o.preventDefault(),e();return}io(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const s=r();if(s.type==="IDLE"&&w(),s.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:ft,fn:e}]}function Tl(e){const t=v.useRef($r),r=v.useRef(ie),n=A(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==ao||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const u=e.findClosestDraggableId(d);if(!u)return;const m=e.tryGetLock(u,i,{sourceEvent:d});if(!m)return;d.preventDefault();const g={x:d.clientX,y:d.clientY};r.current(),p(m,g)}}),[e]),o=A(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const d=e.findClosestDraggableId(f);if(!d)return;const u=e.findOptionsForDraggable(d);u&&(u.shouldRespectForcePress||e.canGetLock(d)&&f.preventDefault())}}),[e]),s=N(function(){const d={passive:!1,capture:!0};r.current=Y(window,[o,n],d)},[o,n]),i=N(()=>{t.current.type!=="IDLE"&&(t.current=$r,r.current(),s())},[s]),l=N(()=>{const f=t.current;i(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[i]),c=N(function(){const d={capture:!0,passive:!1},u=Rl({cancel:l,completed:i,getPhase:()=>t.current,setPhase:m=>{t.current=m}});r.current=Y(window,u,d)},[l,i]),p=N(function(d,u){t.current.type!=="IDLE"&&w(),t.current={type:"PENDING",point:u,actions:d},c()},[c]);z(function(){return s(),function(){r.current()}},[s])}function Ol(){}const Ll={[wl]:!0,[yl]:!0,[Sl]:!0,[Dl]:!0};function Bl(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===sr){o.preventDefault(),r();return}if(o.keyCode===so){o.preventDefault(),n();return}if(o.keyCode===Il){o.preventDefault(),e.moveDown();return}if(o.keyCode===Nl){o.preventDefault(),e.moveUp();return}if(o.keyCode===Cl){o.preventDefault(),e.moveRight();return}if(o.keyCode===jl){o.preventDefault(),e.moveLeft();return}if(Ll[o.keyCode]){o.preventDefault();return}io(o)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:ft,fn:r}]}function _l(e){const t=v.useRef(Ol),r=A(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==so)return;const i=e.findClosestDraggableId(s);if(!i)return;const l=e.tryGetLock(i,f,{sourceEvent:s});if(!l)return;s.preventDefault();let c=!0;const p=l.snapLift();t.current();function f(){c||w(),c=!1,t.current(),n()}t.current=Y(window,Bl(p,f),{capture:!0,passive:!1})}}),[e]),n=N(function(){const s={passive:!1,capture:!0};t.current=Y(window,[r],s)},[r]);z(function(){return n(),function(){t.current()}},[n])}const Dt={type:"IDLE"},Ml=120,Fl=.15;function Gl({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===sr&&r.preventDefault(),e()}},{eventName:ft,fn:e}]}function $l({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const o=r();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:s,clientY:i}=n.touches[0],l={x:s,y:i};n.preventDefault(),o.actions.move(l)}},{eventName:"touchend",fn:n=>{const o=r();if(o.type!=="DRAGGING"){e();return}n.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const o=r();o.type==="IDLE"&&w();const s=n.touches[0];if(!s||!(s.force>=Fl))return;const l=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){l&&e();return}if(l){if(o.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:ft,fn:e}]}function kl(e){const t=v.useRef(Dt),r=v.useRef(ie),n=N(function(){return t.current},[]),o=N(function(m){t.current=m},[]),s=A(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const g=e.findClosestDraggableId(m);if(!g)return;const h=e.tryGetLock(g,l,{sourceEvent:m});if(!h)return;const b=m.touches[0],{clientX:x,clientY:y}=b,S={x,y};r.current(),d(h,S)}}),[e]),i=N(function(){const m={capture:!0,passive:!1};r.current=Y(window,[s],m)},[s]),l=N(()=>{const u=t.current;u.type!=="IDLE"&&(u.type==="PENDING"&&clearTimeout(u.longPressTimerId),o(Dt),r.current(),i())},[i,o]),c=N(()=>{const u=t.current;l(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[l]),p=N(function(){const m={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:n},h=Y(window,$l(g),m),b=Y(window,Gl(g),m);r.current=function(){h(),b()}},[c,n,l]),f=N(function(){const m=n();m.type!=="PENDING"&&w();const g=m.actions.fluidLift(m.point);o({type:"DRAGGING",actions:g,hasMoved:!1})},[n,o]),d=N(function(m,g){n().type!=="IDLE"&&w();const h=setTimeout(f,Ml);o({type:"PENDING",point:g,actions:m,longPressTimerId:h}),p()},[p,n,o,f]);z(function(){return i(),function(){r.current();const g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),o(Dt))}},[n,i,o]),z(function(){return Y(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Wl=["input","button","textarea","select","option","optgroup","video","audio"];function lo(e,t){if(t==null)return!1;if(Wl.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:lo(e,t.parentElement)}function Vl(e,t){const r=t.target;return ut(r)?lo(e,r):!1}var ql=e=>ee(e.getBoundingClientRect()).center;function Hl(e){return e instanceof ro(e).Element}const Ul=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function co(e,t){return e==null?null:e[Ul](t)?e:co(e.parentElement,t)}function zl(e,t){return e.closest?e.closest(t):co(e,t)}function Kl(e){return`[${he.contextId}="${e}"]`}function Ql(e,t){const r=t.target;if(!Hl(r))return null;const n=Kl(e),o=zl(r,n);return!o||!ut(o)?null:o}function Yl(e,t){const r=Ql(e,t);return r?r.getAttribute(he.draggableId):null}function Jl(e,t){const r=`[${Lt.contextId}="${e}"]`,o=to(document,r).find(s=>s.getAttribute(Lt.id)===t);return!o||!ut(o)?null:o}function Xl(e){e.preventDefault()}function ze({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function uo({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const o=r.draggable.findById(n);return!(!o||!o.options.isEnabled||!Jn(t.getState(),n))}function Zl({lockAPI:e,contextId:t,store:r,registry:n,draggableId:o,forceSensorStop:s,sourceEvent:i}){if(!uo({lockAPI:e,store:r,registry:n,draggableId:o}))return null;const c=n.draggable.getById(o),p=Jl(t,c.descriptor.id);if(!p||i&&!c.options.canDragInteractiveElements&&Vl(p,i))return null;const f=e.claim(s||ie);let d="PRE_DRAG";function u(){return c.options.shouldRespectForcePress}function m(){return e.isActive(f)}function g(j,C){ze({expected:j,phase:d,isLockActive:m,shouldWarn:!0})&&r.dispatch(C())}const h=g.bind(null,"DRAGGING");function b(j){function C(){e.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(C(),w()),r.dispatch(Mi(j.liftActionArgs)),d="DRAGGING";function P(E,B={shouldBlockNextClick:!1}){if(j.cleanup(),B.shouldBlockNextClick){const I=Y(window,[{eventName:"click",fn:Xl,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(I)}C(),r.dispatch(Vn({reason:E}))}return{isActive:()=>ze({expected:"DRAGGING",phase:d,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:u,drop:E=>P("DROP",E),cancel:E=>P("CANCEL",E),...j.actions}}function x(j){const C=Re(E=>{h(()=>Wn({client:E}))});return{...b({liftActionArgs:{id:o,clientSelection:j,movementMode:"FLUID"},cleanup:()=>C.cancel(),actions:{move:C}}),move:C}}function y(){const j={moveUp:()=>h(Ui),moveRight:()=>h(Ki),moveDown:()=>h(zi),moveLeft:()=>h(Qi)};return b({liftActionArgs:{id:o,clientSelection:ql(p),movementMode:"SNAP"},cleanup:ie,actions:j})}function S(){ze({expected:"PRE_DRAG",phase:d,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>ze({expected:"PRE_DRAG",phase:d,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:u,fluidLift:x,snapLift:y,abort:S}}const ec=[Tl,_l,kl];function tc({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:o}){const s=[...o?ec:[],...n||[]],i=v.useState(()=>bl())[0],l=N(function(b,x){Me(b)&&!Me(x)&&i.tryAbandon()},[i]);z(function(){let b=t.getState();return t.subscribe(()=>{const y=t.getState();l(b,y),b=y})},[i,t,l]),z(()=>i.tryAbandon,[i.tryAbandon]);const c=N(h=>uo({lockAPI:i,registry:r,store:t,draggableId:h}),[i,r,t]),p=N((h,b,x)=>Zl({lockAPI:i,registry:r,contextId:e,store:t,draggableId:h,forceSensorStop:b||null,sourceEvent:x&&x.sourceEvent?x.sourceEvent:null}),[e,i,r,t]),f=N(h=>Yl(e,h),[e]),d=N(h=>{const b=r.draggable.findById(h);return b?b.options:null},[r.draggable]),u=N(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Yt()))},[i,t]),m=N(()=>i.isClaimed(),[i]),g=A(()=>({canGetLock:c,tryGetLock:p,findClosestDraggableId:f,findOptionsForDraggable:d,tryReleaseLock:u,isLockClaimed:m}),[c,p,f,d,u,m]);for(let h=0;h<s.length;h++)s[h](g)}const rc=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};R.version.startsWith("16")||R.version.startsWith("17")?r():Jr.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),nc=e=>({..._e,...e.autoScrollerOptions,durationDampening:{..._e.durationDampening,...e.autoScrollerOptions}});function Ne(e){return e.current||w(),e.current}function oc(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:o,dragHandleUsageInstructions:s}=e,i=v.useRef(null),l=oo(e),c=N(()=>rc(l.current),[l]),p=N(()=>nc(l.current),[l]),f=ul(t),d=hl({contextId:t,text:s}),u=nl(t,o),m=N(I=>{Ne(i).dispatch(I)},[]),g=A(()=>xr({publishWhileDragging:Gi,updateDroppableScroll:ki,updateDroppableIsEnabled:Wi,updateDroppableIsCombineEnabled:Vi,collectionStarting:$i},m),[m]),h=al(),b=A(()=>La(h,g),[h,g]),x=A(()=>Ja({scrollWindow:Ba,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:p,...xr({move:Wn},m)}),[b.scrollDroppable,m,p]),y=sl(t),S=A(()=>Pa({announce:f,autoScroller:x,dimensionMarshal:b,focusMarshal:y,getResponders:c,styleMarshal:u}),[f,x,b,y,c,u]);i.current=S;const D=N(()=>{const I=Ne(i);I.getState().phase!=="IDLE"&&I.dispatch(Yt())},[]),j=N(()=>{const I=Ne(i).getState();return I.phase==="DROP_ANIMATING"?!0:I.phase==="IDLE"?!1:I.isDragging},[]),C=A(()=>({isDragging:j,tryAbort:D}),[j,D]);r(C);const P=N(I=>Jn(Ne(i).getState(),I),[]),E=N(()=>de(Ne(i).getState()),[]),B=A(()=>({marshal:b,focus:y,contextId:t,canLift:P,isMovementAllowed:E,dragHandleUsageInstructionsId:d,registry:h}),[t,b,d,y,P,E,h]);return tc({contextId:t,store:S,registry:h,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),v.useEffect(()=>D,[D]),R.createElement(pt.Provider,{value:B},R.createElement(wo,{context:nr,store:S},e.children))}let sc=0;function ic(){return A(()=>`${sc++}`,[])}function ac(){return R.useId()}var lc="useId"in R?ac:ic;function cc(e){const t=lc(),r=e.dragHandleUsageInstructions||Qe.dragHandleUsageInstructions;return R.createElement(Ns,null,n=>R.createElement(oc,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const kr={dragging:5e3,dropAnimating:4500},dc=(e,t)=>t?Ie.drop(t.duration):e?Ie.snap:Ie.fluid,uc=(e,t)=>{if(e)return t?Be.opacity.drop:Be.opacity.combining},pc=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function fc(e){const r=e.dimension.client,{offset:n,combineWith:o,dropping:s}=e,i=!!o,l=pc(e),c=!!s,p=c?Tt.drop(n,i):Tt.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:dc(l,s),transform:p,opacity:uc(i,c),zIndex:c?kr.dropAnimating:kr.dragging,pointerEvents:"none"}}function mc(e){return{transform:Tt.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function gc(e){return e.type==="DRAGGING"?fc(e):mc(e)}function hc(e,t,r=F){const n=window.getComputedStyle(t),o=t.getBoundingClientRect(),s=bn(o,n),i=et(s,r),l={client:s,tagName:t.tagName.toLowerCase(),display:n.display},c={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:s,page:i}}function bc(e){const t=or("draggable"),{descriptor:r,registry:n,getDraggableRef:o,canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:l}=e,c=A(()=>({canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:l}),[s,l,i]),p=N(m=>{const g=o();return g||w(),hc(r,g,m)},[r,o]),f=A(()=>({uniqueId:t,descriptor:r,options:c,getDimension:p}),[r,p,c,t]),d=v.useRef(f),u=v.useRef(!0);z(()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current)),[n.draggable]),z(()=>{if(u.current){u.current=!1;return}const m=d.current;d.current=f,n.draggable.update(f,m)},[f,n.draggable])}var ir=R.createContext(null);function st(e){const t=v.useContext(e);return t||w(),t}function vc(e){e.preventDefault()}const xc=e=>{const t=v.useRef(null),r=N((C=null)=>{t.current=C},[]),n=N(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:s,registry:i}=st(pt),{type:l,droppableId:c}=st(ir),p=A(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:f,draggableId:d,isEnabled:u,shouldRespectForcePress:m,canDragInteractiveElements:g,isClone:h,mapped:b,dropAnimationFinished:x}=e;if(!h){const C=A(()=>({descriptor:p,registry:i,getDraggableRef:n,canDragInteractiveElements:g,shouldRespectForcePress:m,isEnabled:u}),[p,i,n,g,m,u]);bc(C)}const y=A(()=>u?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:vc}:null,[o,s,d,u]),S=N(C=>{b.type==="DRAGGING"&&b.dropping&&C.propertyName==="transform"&&(R.version.startsWith("16")||R.version.startsWith("17")?x():Jr.flushSync(x))},[x,b]),D=A(()=>{const C=gc(b),P=b.type==="DRAGGING"&&b.dropping?S:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":d,style:C,onTransitionEnd:P},dragHandleProps:y}},[o,y,d,b,S,r]),j=A(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return R.createElement(R.Fragment,null,f(D,b.snapshot,j))};var yc=xc,po=(e,t)=>e===t,fo=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const wc=e=>e.combine?e.combine.draggableId:null,Dc=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Sc(){const e=M((o,s)=>({x:o,y:s})),t=M((o,s,i=null,l=null,c=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!c,dropAnimation:c,mode:o,draggingOver:i,combineWith:l,combineTargetFor:null})),r=M((o,s,i,l,c=null,p=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:p,mode:s,offset:o,dimension:i,forceShouldAnimate:f,snapshot:t(s,l,c,p,null)}}));return(o,s)=>{if(Me(o)){if(o.critical.draggable.id!==s.draggableId)return null;const i=o.current.client.offset,l=o.dimensions.draggables[s.draggableId],c=U(o.impact),p=Dc(o.impact),f=o.forceShouldAnimate;return r(e(i.x,i.y),o.movementMode,l,s.isClone,c,p,f)}if(o.phase==="DROP_ANIMATING"){const i=o.completed;if(i.result.draggableId!==s.draggableId)return null;const l=s.isClone,c=o.dimensions.draggables[s.draggableId],p=i.result,f=p.mode,d=fo(p),u=wc(p),g={duration:o.dropDuration,curve:Xt.drop,moveTo:o.newHomeClientOffset,opacity:u?Be.opacity.drop:null,scale:u?Be.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:c,dropping:g,draggingOver:d,combineWith:u,mode:f,forceShouldAnimate:null,snapshot:t(f,l,d,u,g)}}}return null}}function mo(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const jc={mapped:{type:"SECONDARY",offset:F,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:mo(null)}};function Nc(){const e=M((i,l)=>({x:i,y:l})),t=M(mo),r=M((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),n=i=>i?r(F,i,!0):null,o=(i,l,c,p)=>{const f=c.displaced.visible[i],d=!!(p.inVirtualList&&p.effected[i]),u=lt(c),m=u&&u.draggableId===i?l:null;if(!f){if(!d)return n(m);if(c.displaced.invisible[i])return null;const b=be(p.displacedBy.point),x=e(b.x,b.y);return r(x,m,!0)}if(d)return n(m);const g=c.displacedBy.point,h=e(g.x,g.y);return r(h,m,f.shouldAnimate)};return(i,l)=>{if(Me(i))return i.critical.draggable.id===l.draggableId?null:o(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:o(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const Cc=()=>{const e=Sc(),t=Nc();return(n,o)=>e(n,o)||t(n,o)||jc},Ic={dropAnimationFinished:qn},Ac=Qr(Cc,Ic,null,{context:nr,areStatePropsEqual:po})(yc);var Ec=Ac;function go(e){return st(ir).isUsingCloneFor===e.draggableId&&!e.isClone?null:R.createElement(Ec,e)}function Pc(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return R.createElement(go,Yr({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const ho=e=>t=>e===t,Rc=ho("scroll"),Tc=ho("auto"),Wr=(e,t)=>t(e.overflowX)||t(e.overflowY),Oc=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return Wr(r,Rc)||Wr(r,Tc)},Lc=()=>!1,bo=e=>e==null?null:e===document.body?Lc()?e:null:e===document.documentElement?null:Oc(e)?e:bo(e.parentElement);var Bt=e=>({x:e.scrollLeft,y:e.scrollTop});const vo=e=>e?window.getComputedStyle(e).position==="fixed"?!0:vo(e.parentElement):!1;var Bc=e=>{const t=bo(e),r=vo(e);return{closestScrollable:t,isFixedOnPage:r}},_c=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:o,client:s,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:u,client:m}=l,g=Kn({scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:u,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:g,diff:{value:F,displacement:F}}}})(),p=o==="vertical"?Ht:In,f=me({page:i,withPlaceholder:null,axis:p,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:p,isEnabled:t,client:s,page:i,frame:c,subject:f}};const Mc=(e,t)=>{const r=vn(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,o=r.paddingBox.left-t.scrollLeft,s=n+t.scrollHeight,i=o+t.scrollWidth,c=kt({top:n,right:i,bottom:s,left:o},r.border);return Wt({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var Fc=({ref:e,descriptor:t,env:r,windowScroll:n,direction:o,isDropDisabled:s,isCombineEnabled:i,shouldClipSubject:l})=>{const c=r.closestScrollable,p=Mc(e,c),f=et(p,n),d=(()=>{if(!c)return null;const m=vn(c),g={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:et(m,n),scroll:Bt(c),scrollSize:g,shouldClipSubject:l}})();return _c({descriptor:t,isEnabled:!s,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:o,client:p,page:f,closest:d})};const Gc={passive:!1},$c={passive:!0};var Vr=e=>e.shouldPublishImmediately?Gc:$c;const Ke=e=>e&&e.env.closestScrollable||null;function kc(e){const t=v.useRef(null),r=st(pt),n=or("droppable"),{registry:o,marshal:s}=r,i=oo(e),l=A(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=v.useRef(l),p=A(()=>M((D,j)=>{t.current||w();const C={x:D,y:j};s.updateDroppableScroll(l.id,C)}),[l.id,s]),f=N(()=>{const D=t.current;return!D||!D.env.closestScrollable?F:Bt(D.env.closestScrollable)},[]),d=N(()=>{const D=f();p(D.x,D.y)},[f,p]),u=A(()=>Re(d),[d]),m=N(()=>{const D=t.current,j=Ke(D);if(D&&j||w(),D.scrollOptions.shouldPublishImmediately){d();return}u()},[u,d]),g=N((D,j)=>{t.current&&w();const C=i.current,P=C.getDroppableRef();P||w();const E=Bc(P),B={ref:P,descriptor:l,env:E,scrollOptions:j};t.current=B;const I=Fc({ref:P,descriptor:l,env:E,windowScroll:D,direction:C.direction,isDropDisabled:C.isDropDisabled,isCombineEnabled:C.isCombineEnabled,shouldClipSubject:!C.ignoreContainerClipping}),T=E.closestScrollable;return T&&(T.setAttribute(Mr.contextId,r.contextId),T.addEventListener("scroll",m,Vr(B.scrollOptions))),I},[r.contextId,l,m,i]),h=N(()=>{const D=t.current,j=Ke(D);return D&&j||w(),Bt(j)},[]),b=N(()=>{const D=t.current;D||w();const j=Ke(D);t.current=null,j&&(u.cancel(),j.removeAttribute(Mr.contextId),j.removeEventListener("scroll",m,Vr(D.scrollOptions)))},[m,u]),x=N(D=>{const j=t.current;j||w();const C=Ke(j);C||w(),C.scrollTop+=D.y,C.scrollLeft+=D.x},[]),y=A(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:h,dragStopped:b,scroll:x}),[b,g,h,x]),S=A(()=>({uniqueId:n,descriptor:l,callbacks:y}),[y,l,n]);z(()=>(c.current=S.descriptor,o.droppable.register(S),()=>{t.current&&b(),o.droppable.unregister(S)}),[y,l,b,S,s,o.droppable]),z(()=>{t.current&&s.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),z(()=>{t.current&&s.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function St(){}const qr={width:0,height:0,margin:Ts},Wc=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?qr:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Vc=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=Wc({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Ie.placeholder:null}},qc=e=>{const t=v.useRef(null),r=N(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:o,onClose:s,contextId:i}=e,[l,c]=v.useState(e.animate==="open");v.useEffect(()=>l?n!=="open"?(r(),c(!1),St):t.current?St:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):St,[n,l,r]);const p=N(d=>{d.propertyName==="height"&&(o(),n==="close"&&s())},[n,s,o]),f=Vc({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return R.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":i,onTransitionEnd:p,ref:e.innerRef})};var Hc=R.memo(qc);class Uc extends R.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const zc=e=>{const t=v.useContext(pt);t||w();const{contextId:r,isMovementAllowed:n}=t,o=v.useRef(null),s=v.useRef(null),{children:i,droppableId:l,type:c,mode:p,direction:f,ignoreContainerClipping:d,isDropDisabled:u,isCombineEnabled:m,snapshot:g,useClone:h,updateViewportMaxScroll:b,getContainerForClone:x}=e,y=N(()=>o.current,[]),S=N((T=null)=>{o.current=T},[]);N(()=>s.current,[]);const D=N((T=null)=>{s.current=T},[]),j=N(()=>{n()&&b({maxScroll:Yn()})},[n,b]);kc({droppableId:l,type:c,mode:p,direction:f,isDropDisabled:u,isCombineEnabled:m,ignoreContainerClipping:d,getDroppableRef:y});const C=A(()=>R.createElement(Uc,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:T,data:q,animate:$})=>R.createElement(Hc,{placeholder:q,onClose:T,innerRef:D,animate:$,contextId:r,onTransitionEnd:j})),[r,j,e.placeholder,e.shouldAnimatePlaceholder,D]),P=A(()=>({innerRef:S,placeholder:C,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,C,S]),E=h?h.dragging.draggableId:null,B=A(()=>({droppableId:l,type:c,isUsingCloneFor:E}),[l,E,c]);function I(){if(!h)return null;const{dragging:T,render:q}=h,$=R.createElement(go,{draggableId:T.draggableId,index:T.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(We,O)=>q(We,O,T));return Do.createPortal($,x())}return R.createElement(ir.Provider,{value:B},i(P,g),I())};var Kc=zc;function Qc(){return document.body||w(),document.body}const Hr={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Qc},xo=e=>{let t={...e},r;for(r in Hr)e[r]===void 0&&(t={...t,[r]:Hr[r]});return t},jt=(e,t)=>e===t.droppable.type,Ur=(e,t)=>t.draggables[e.draggable.id],Yc=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=M(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),n=M((s,i,l,c,p,f)=>{const d=p.descriptor.id;if(p.descriptor.droppableId===s){const g=f?{render:f,dragging:r(p.descriptor)}:null,h={isDraggingOver:l,draggingOverWith:l?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:g}}if(!i)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(s,i)=>{const l=xo(i),c=l.droppableId,p=l.type,f=!l.isDropDisabled,d=l.renderClone;if(Me(s)){const u=s.critical;if(!jt(p,u))return t;const m=Ur(u,s.dimensions),g=U(s.impact)===c;return n(c,f,g,g,m,d)}if(s.phase==="DROP_ANIMATING"){const u=s.completed;if(!jt(p,u.critical))return t;const m=Ur(u.critical,s.dimensions);return n(c,f,fo(u.result)===c,U(u.impact)===c,m,d)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const u=s.completed;if(!jt(p,u.critical))return t;const m=U(u.impact)===c,g=!!(u.impact.at&&u.impact.at.type==="COMBINE"),h=u.critical.droppable.id===c;return m?g?e:t:h?e:t}return t}},Jc={updateViewportMaxScroll:Hi},Xc=Qr(Yc,Jc,(e,t,r)=>({...xo(r),...e,...t}),{context:nr,areStatePropsEqual:po})(Kc);var Zc=Xc;const zr=({id:e,title:t,items:r,resourceType:n,emptyMessage:o,emptyIcon:s,createButtonLabel:i,onCreateClick:l})=>a.jsxs(Nt,{className:"flex-1 min-h-[400px] max-h-[600px] overflow-hidden flex flex-col",children:[a.jsx(rn,{className:"pb-0",children:a.jsx(nn,{className:"text-lg",children:t})}),a.jsx(Zc,{droppableId:e,children:c=>a.jsxs(on,{className:"flex-1 overflow-y-auto p-4",ref:c.innerRef,...c.droppableProps,children:[r.length>0?a.jsx("div",{className:"space-y-4",children:r.map((p,f)=>a.jsx(Pc,{draggableId:p.id,index:f,children:d=>a.jsx("div",{ref:d.innerRef,...d.draggableProps,...d.dragHandleProps,className:"transition-all duration-200",children:n==="application"?a.jsx(Go,{application:p}):a.jsxs(Nt,{className:"p-4",children:[a.jsx("h3",{className:"font-medium",children:p.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:p.description})]})})},p.id))}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[s,a.jsx("h3",{className:"text-lg font-medium mt-4 mb-2",children:o}),i&&l&&a.jsx(se,{onClick:l,className:"mt-4",children:i})]}),c.placeholder]})})]}),ed=({message:e,resourceType:t,createButtonLabel:r,onCreateClick:n})=>a.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-12 border rounded-lg bg-muted/10",children:[t==="application"?a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[a.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),a.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}):a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[a.jsx("path",{d:"M18 16H6a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2Z"}),a.jsx("path",{d:"m10 10-2-2m0 0L6 6m2 2 2-2m4 2 2-2m0 0 2-2m-2 2-2-2"})]})}),a.jsx("h3",{className:"text-lg font-medium mt-4 mb-2",children:e}),r&&n&&a.jsx(se,{onClick:n,className:"mt-4",children:r})]});function td({projectId:e,availableResources:t,associatedResources:r,resourceType:n,onResourceMoved:o,createButtonLabel:s,onCreateClick:i,showEmptyState:l=!1,emptyStateMessage:c}){const[p,f]=v.useState([]),[d,u]=v.useState([]),[m,g]=v.useState(!1);v.useEffect(()=>{f(t),u(r)},[t,r]);const h=async b=>{const{source:x,destination:y,draggableId:S}=b;if(!y||x.droppableId===y.droppableId&&x.index===y.index)return;const D=x.droppableId==="available"?[...p]:[...d],j=y.droppableId==="available"?[...p]:[...d],C=D.find(B=>B.id===S);if(!C)return;const P=D.filter(B=>B.id!==S),E=[...j];E.splice(y.index,0,C),x.droppableId==="available"?f(P):u(P),y.droppableId==="available"?f(E):u(E),g(!0);try{await o(S,x.droppableId,y.droppableId),x.droppableId==="available"&&y.droppableId==="associated"?L.success(`${n==="application"?"Application":"AI Tool"} associated with project`):x.droppableId==="associated"&&y.droppableId==="available"&&L.success(`${n==="application"?"Application":"AI Tool"} removed from project`)}catch(B){console.error("Error moving resource:",B),L.error(`Failed to update ${n} association`),f(t),u(r)}finally{g(!1)}};return l?a.jsx(ed,{message:c||`No ${n==="application"?"applications":"AI tools"} available`,resourceType:n,createButtonLabel:s,onCreateClick:i}):a.jsx(cc,{onDragEnd:h,children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[a.jsx(zr,{id:"available",title:"Available",items:p,resourceType:n,emptyMessage:`No available ${n==="application"?"applications":"AI tools"}`,emptyIcon:n==="application"?a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[a.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),a.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}):a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[a.jsx("path",{d:"M18 16H6a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2Z"}),a.jsx("path",{d:"m10 10-2-2m0 0L6 6m2 2 2-2m4 2 2-2m0 0 2-2m-2 2-2-2"})]})}),createButtonLabel:s,onCreateClick:i}),a.jsx(zr,{id:"associated",title:"Associated with Project",items:d,resourceType:n,emptyMessage:`No ${n==="application"?"applications":"AI tools"} associated with this project`,emptyIcon:n==="application"?a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[a.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),a.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}):a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[a.jsx("path",{d:"M18 16H6a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2Z"}),a.jsx("path",{d:"m10 10-2-2m0 0L6 6m2 2 2-2m4 2 2-2m0 0 2-2m-2 2-2-2"})]})})})]})})}function rd({projectId:e}){const t=Fe(),{availableApplications:r,associatedApplications:n,isLoading:o,handleMoveApplication:s}=cs(e),i=()=>{t("/applications/new",{state:{projectId:e}})};return o?a.jsx("div",{className:"flex justify-center p-6",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsx(td,{projectId:e,availableResources:r,associatedResources:n,resourceType:"application",onResourceMoved:s,createButtonLabel:"Create Application",onCreateClick:i},`applications-${n.length}-${r.length}`)}function nd({servers:e,associatedServerIds:t,isLoading:r,projectId:n,onAssociationToggle:o,onSort:s,sortField:i="name",sortDirection:l="asc"}){const c=Fe(),p=u=>{c(`/servers/${u}`)},f=u=>i!==u?null:l==="asc"?a.jsx(qo,{className:"h-4 w-4"}):a.jsx(sn,{className:"h-4 w-4"}),d=u=>{s&&s(u)};return r?a.jsx("div",{className:"flex justify-center p-6",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):!e||e.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-12 border rounded-lg bg-muted/10",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsx(fe,{className:"text-muted-foreground"})}),a.jsx("h3",{className:"text-lg font-medium mt-4 mb-2",children:"No servers found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Try changing your search criteria or create a new server"})]}):a.jsxs(Xr,{children:[a.jsx(Zr,{children:a.jsxs(Ae,{children:[n&&a.jsx(te,{className:"text-center",children:"Associate"}),a.jsx(te,{className:"cursor-pointer",onClick:()=>d("name"),children:a.jsxs("div",{className:"flex items-center",children:["Name ",f("name")]})}),a.jsx(te,{className:"cursor-pointer",onClick:()=>d("status"),children:a.jsxs("div",{className:"flex items-center",children:["Status ",f("status")]})}),a.jsx(te,{className:"cursor-pointer",onClick:()=>d("type"),children:a.jsxs("div",{className:"flex items-center",children:["Type ",f("type")]})}),a.jsx(te,{className:"text-right",children:"Actions"})]})}),a.jsx(en,{children:e.map(u=>{const m=(t==null?void 0:t.has(u.id))||!1;return a.jsxs(Ae,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>p(u.id),children:[n&&a.jsx(Z,{className:"text-center",children:a.jsx(tn,{checked:m,onClick:g=>{g.stopPropagation(),o&&o(u.id,m)}})}),a.jsxs(Z,{className:"font-medium flex items-center gap-2",children:[a.jsx(fe,{className:"h-4 w-4 text-muted-foreground"}),u.name,u.favorite&&a.jsx(Wo,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"})]}),a.jsx(Z,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${u.status==="active"?"bg-green-500":u.status==="suspended"?"bg-yellow-500":u.status==="offline"?"bg-gray-500":u.status==="development"?"bg-blue-500":"bg-gray-500"}`}),a.jsx("span",{className:"capitalize",children:u.status})]})}),a.jsx(Z,{children:u.type||"Standard"}),a.jsx(Z,{className:"text-right",children:a.jsx(se,{variant:"ghost",size:"icon",onClick:g=>{g.stopPropagation(),c(`/servers/${u.id}`)},children:a.jsx(Vo,{className:"h-4 w-4"})})})]},u.id)})})]})}const Kr=Ho,od=Uo,yo=v.forwardRef(({className:e,...t},r)=>a.jsx(pn,{className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));yo.displayName=pn.displayName;const sd=Co("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_t=v.forwardRef(({side:e="right",className:t,children:r,...n},o)=>a.jsxs(od,{children:[a.jsx(yo,{}),a.jsxs(cn,{ref:o,className:K(sd({side:e}),t),...n,children:[r,a.jsxs(zo,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(No,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_t.displayName=cn.displayName;const Mt=({className:e,...t})=>a.jsx("div",{className:K("flex flex-col space-y-2 text-center sm:text-left",e),...t});Mt.displayName="SheetHeader";const Ft=v.forwardRef(({className:e,...t},r)=>a.jsx(dn,{ref:r,className:K("text-lg font-semibold text-foreground",e),...t}));Ft.displayName=dn.displayName;const Gt=v.forwardRef(({className:e,...t},r)=>a.jsx(un,{ref:r,className:K("text-sm text-muted-foreground",e),...t}));Gt.displayName=un.displayName;function id({projectId:e,onSuccess:t}){const[r,n]=v.useState(!1),{session:o}=Io(),{mutateAssociatedServers:s}=$t(e),i=So({defaultValues:{name:"",slug:"",description:"",type:"Agent",status:"development"}}),l=async c=>{if(!o.user){L.error("You need to be logged in to create a server");return}n(!0);try{const p=localStorage.getItem("selectedOrganizationId");if(!p){L.error("Please select an organization from the top navigation bar"),n(!1);return}const{data:f,error:d}=await _.from("servers").insert({name:c.name,slug:c.slug,description:c.description,type:c.type,status:c.status,user_id:o.user.id,organization_id:p}).select("*").single();if(d)throw d;if(f){const{error:u}=await _.from("project_servers").insert({project_id:e,server_id:f.id});if(u)throw u}L.success("Server created and added to project"),i.reset(),s(),t&&t()}catch(p){console.error("Error creating server:",p),L.error(`Failed to create server: ${p.message||"Unknown error"}`)}finally{n(!1)}};return a.jsx(Qo,{...i,children:a.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-6",children:[a.jsx(ye,{control:i.control,name:"name",render:({field:c})=>a.jsxs(we,{children:[a.jsx(De,{children:"Server Name"}),a.jsx(Ve,{children:a.jsx(Ee,{placeholder:"Enter server name",...c,onChange:p=>{c.onChange(p),i.setValue("slug",Ao(p.target.value))}})}),a.jsx(qe,{children:"A descriptive name for your server"}),a.jsx(He,{})]})}),a.jsx(ye,{control:i.control,name:"slug",render:({field:c})=>a.jsxs(we,{children:[a.jsx(De,{children:"Slug"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:c.value?c.value.length>35?c.value.slice(0,35)+"...":c.value:"Auto-generated from the server name"})]})}),a.jsx(ye,{control:i.control,name:"description",render:({field:c})=>a.jsxs(we,{children:[a.jsx(De,{children:"Description"}),a.jsx(Ve,{children:a.jsx(Ko,{placeholder:"Describe your server",className:"min-h-[100px]",...c})}),a.jsx(qe,{children:"A brief description of what this server is for"}),a.jsx(He,{})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ye,{control:i.control,name:"type",render:({field:c})=>a.jsxs(we,{children:[a.jsx(De,{children:"Server Type"}),a.jsxs(Ct,{onValueChange:c.onChange,defaultValue:c.value,children:[a.jsx(Ve,{children:a.jsx(It,{children:a.jsx(At,{placeholder:"Select type"})})}),a.jsxs(Et,{children:[a.jsx(ne,{value:"Agent",children:"Agent"}),a.jsx(ne,{value:"MCP",children:"MCP"})]})]}),a.jsx(qe,{children:"The type of server"}),a.jsx(He,{})]})}),a.jsx(ye,{control:i.control,name:"status",render:({field:c})=>a.jsxs(we,{children:[a.jsx(De,{children:"Status"}),a.jsxs(Ct,{onValueChange:c.onChange,defaultValue:c.value,children:[a.jsx(Ve,{children:a.jsx(It,{children:a.jsx(At,{placeholder:"Select status"})})}),a.jsxs(Et,{children:[a.jsx(ne,{value:"development",children:"Development"}),a.jsx(ne,{value:"active",children:"Active"}),a.jsx(ne,{value:"maintenance",children:"Maintenance"}),a.jsx(ne,{value:"offline",children:"Offline"})]})]}),a.jsx(qe,{children:"Current server status"}),a.jsx(He,{})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[a.jsx(se,{type:"button",variant:"outline",onClick:()=>{i.reset(),t&&t()},children:"Cancel"}),a.jsx(se,{type:"submit",disabled:r,children:r?"Creating...":"Create Server"})]})]})})}const ar=({className:e,...t})=>a.jsx("nav",{role:"navigation","aria-label":"pagination",className:K("mx-auto flex w-full justify-center",e),...t});ar.displayName="Pagination";const lr=v.forwardRef(({className:e,...t},r)=>a.jsx("ul",{ref:r,className:K("flex flex-row items-center gap-1",e),...t}));lr.displayName="PaginationContent";const ue=v.forwardRef(({className:e,...t},r)=>a.jsx("li",{ref:r,className:K("",e),...t}));ue.displayName="PaginationItem";const ke=({className:e,isActive:t,size:r="icon",...n})=>a.jsx("a",{"aria-current":t?"page":void 0,className:K($o({variant:t?"outline":"ghost",size:r}),e),...n});ke.displayName="PaginationLink";const cr=({className:e,...t})=>a.jsxs(ke,{"aria-label":"Go to previous page",size:"default",className:K("gap-1 pl-2.5",e),...t,children:[a.jsx(Yo,{className:"h-4 w-4"}),a.jsx("span",{children:"Previous"})]});cr.displayName="PaginationPrevious";const dr=({className:e,...t})=>a.jsxs(ke,{"aria-label":"Go to next page",size:"default",className:K("gap-1 pr-2.5",e),...t,children:[a.jsx("span",{children:"Next"}),a.jsx(an,{className:"h-4 w-4"})]});dr.displayName="PaginationNext";function ad({projectId:e}){Fe();const[t,r]=v.useState(!1),[n,o]=v.useState(!1),[s,i]=v.useState(""),[l,c]=v.useState("name"),[p,f]=v.useState("asc"),[d,u]=v.useState(10),[m,g]=v.useState(1),{servers:h,isLoading:b}=ko(),{associatedServers:x,isLoadingAssociatedServers:y,associateServer:S,disassociateServer:D}=$t(e),j=v.useMemo(()=>x?new Set(x.map(O=>O.server_id)):new Set,[x]),C=v.useMemo(()=>h?h.filter(O=>!s||O.name.toLowerCase().includes(s.toLowerCase())||O.description&&O.description.toLowerCase().includes(s.toLowerCase())):[],[h,s]),P=v.useMemo(()=>C?[...C].sort((O,X)=>{let W=0;return l==="name"?W=O.name.localeCompare(X.name):l==="status"?W=O.status.localeCompare(X.status):l==="type"&&(W=(O.type||"").localeCompare(X.type||"")),p==="asc"?W:-W}):[],[C,l,p]),E=v.useMemo(()=>{const O=(m-1)*d;return P.slice(O,O+d)},[P,m,d]),B=Math.ceil(P.length/d),I=async(O,X)=>{X?await D.mutateAsync({serverId:O}):await S.mutateAsync({serverId:O})},T=O=>{l===O?f(p==="asc"?"desc":"asc"):(c(O),f("asc"))},q=O=>{u(parseInt(O)),g(1)},$=O=>{g(O)},We=y||b;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Project Servers"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(se,{onClick:()=>r(!0),size:"sm",className:"flex items-center gap-1",children:[a.jsx(Jo,{className:"h-4 w-4"}),"Insert"]}),a.jsxs(se,{onClick:()=>o(!0),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[a.jsx(Eo,{className:"h-4 w-4"}),"Import from CSV"]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xe,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{placeholder:"Search servers...",className:"pl-8",value:s,onChange:O=>i(O.target.value)})]})}),a.jsx(nd,{servers:E,associatedServerIds:j,isLoading:We,projectId:e,onAssociationToggle:I,onSort:T,sortField:l,sortDirection:p}),!We&&P.length>0&&a.jsxs("div",{className:"flex items-center justify-between mt-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows per page"}),a.jsxs(Ct,{value:d.toString(),onValueChange:q,children:[a.jsx(It,{className:"w-16 h-8",children:a.jsx(At,{placeholder:"10"})}),a.jsxs(Et,{children:[a.jsx(ne,{value:"10",children:"10"}),a.jsx(ne,{value:"20",children:"20"}),a.jsx(ne,{value:"50",children:"50"})]})]})]}),a.jsx(ar,{children:a.jsxs(lr,{children:[a.jsx(ue,{children:a.jsx(cr,{onClick:()=>$(Math.max(1,m-1)),className:m===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,B)},(O,X)=>{let W;return B<=5||m<=3?W=X+1:m>=B-2?W=B-4+X:W=m-2+X,a.jsx(ue,{children:a.jsx(ke,{isActive:m===W,onClick:()=>$(W),children:W})},W)}),a.jsx(ue,{children:a.jsx(dr,{onClick:()=>$(Math.min(B,m+1)),className:m===B?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]}),a.jsx(Kr,{open:t,onOpenChange:r,children:a.jsxs(_t,{className:"w-full sm:max-w-md overflow-y-auto",children:[a.jsxs(Mt,{className:"mb-5",children:[a.jsx(Ft,{children:"Add Server to Project"}),a.jsx(Gt,{children:"Create a new server and automatically associate it with this project."})]}),a.jsx(id,{projectId:e,onSuccess:()=>r(!1)})]})}),a.jsx(Kr,{open:n,onOpenChange:o,children:a.jsxs(_t,{children:[a.jsxs(Mt,{children:[a.jsx(Ft,{children:"Import Servers from CSV"}),a.jsx(Gt,{children:"Upload a CSV file to import multiple servers at once."})]}),a.jsx("div",{className:"py-6",children:a.jsx("p",{className:"text-muted-foreground",children:"CSV import functionality is not yet implemented. Please check back later."})})]})})]})}function ld(e,t){return oe({queryKey:["application-tools",e,t],queryFn:async()=>{if(!t||t.length===0)return[];const r=t.map(i=>i.application_id),{data:n,error:o}=await _.from("applications").select(`
          id,
          name,
          slug,
          application_apis!inner (
            id,
            name,
            version,
            slug,
            application_services!inner (
              id,
              name,
              ai_tools (*)
            )
          )
        `).in("id",r);if(o)throw o;const s=[];return n==null||n.forEach(i=>{var l;(l=i.application_apis)==null||l.forEach(c=>{var p;(p=c.application_services)==null||p.forEach(f=>{f.ai_tools&&f.ai_tools.length>0&&f.ai_tools.forEach(d=>{s.push({...d,associated:!1,application:{id:i.id,name:i.name,slug:i.slug},application_api:{id:c.id,name:c.name,version:c.version,slug:c.slug},application_service:{id:f.id,name:f.name}})})})})}),s},enabled:!!e&&!!t})}function cd(e){return oe({queryKey:["project-applications-join",e],queryFn:async()=>{const{data:t,error:r}=await _.from("project_applications").select("*").eq("project_id",e);if(r)throw r;return t},enabled:!!e})}function dd(e){return oe({queryKey:["project-tools-join",e],queryFn:async()=>{const{data:t,error:r}=await _.from("project_tools").select("*").eq("project_id",e);if(r)throw r;return t},enabled:!!e})}function ud(e,t){return oe({queryKey:["project-tools",e],queryFn:async()=>{if(!t||t.length===0)return[];const r=t.map(s=>s.ai_tool_id),{data:n,error:o}=await _.from("ai_tools").select("*").in("id",r);if(o)throw o;return n},enabled:!!e&&!!t&&t.length>0})}function pd(e){const t=it(),{mutateAsync:r}=Je({mutationFn:async({toolId:n,action:o})=>{if(o==="associate"){const{error:s}=await _.from("project_tools").insert({project_id:e,ai_tool_id:n});if(s)throw s}else{const{error:s}=await _.from("project_tools").delete().match({project_id:e,ai_tool_id:n});if(s)throw s}},onSuccess:()=>{t.invalidateQueries({queryKey:["project-tools-join",e]}),t.invalidateQueries({queryKey:["project-tools",e]})},onError:n=>{console.error("Error updating association:",n),L.error("Failed to update AI tool association")}});return{updateToolAssociation:r}}function fd(e){const t=it(),[r,n]=v.useState([]),[o,s]=v.useState([]),{data:i}=cd(e),{data:l,isLoading:c}=ld(e,i),{data:p,isLoading:f}=dd(e),{data:d,isLoading:u}=ud(e,p),{updateToolAssociation:m}=pd(e);v.useEffect(()=>{if(l&&d){const b=d||[],x=b.map(j=>j.id),y=l||[],S=b.map(j=>{const C=y.find(P=>P.id===j.id);return{...j,associated:!0,application:C==null?void 0:C.application,application_api:C==null?void 0:C.application_api,application_service:C==null?void 0:C.application_service}}),D=y.filter(j=>!x.includes(j.id)).map(j=>({...j,associated:!1}));n(D),s(S)}},[l,d]);const g=async(b,x,y)=>{x==="available"&&y==="associated"?await m({toolId:b,action:"associate"}):x==="associated"&&y==="available"&&await m({toolId:b,action:"disassociate"})},h=async(b,x)=>{try{if(await m({toolId:b,action:x?"associate":"disassociate"}),L.success(`Tool ${x?"associated with":"removed from"} project`),x){const y=r.find(S=>S.id===b);y&&(n(S=>S.filter(D=>D.id!==b)),s(S=>[...S,{...y,associated:!0}]))}else{const y=o.find(S=>S.id===b);y&&(s(S=>S.filter(D=>D.id!==b)),n(S=>[...S,{...y,associated:!1}]))}}catch{t.invalidateQueries({queryKey:["project-tools-join",e]}),t.invalidateQueries({queryKey:["project-tools",e]})}};return{availableTools:r,associatedTools:o,isLoading:c||u||f,hasAssociatedApplications:i&&i.length>0,handleMoveTool:g,handleAssociationToggle:h}}function md({searchTerm:e,setSearchTerm:t}){return a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xe,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{type:"search",placeholder:"Search tools by name or description...",className:"pl-8",value:e,onChange:r=>t(r.target.value)})]})}function gd({sortField:e,sortDirection:t,handleSort:r}){return a.jsx(Zr,{children:a.jsxs(Ae,{children:[a.jsx(te,{className:"w-[80px]",children:a.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>r("associated"),children:["Associated",e==="associated"&&(t==="asc"?a.jsx(mt,{className:"ml-1 h-4 w-4"}):a.jsx(gt,{className:"ml-1 h-4 w-4"}))]})}),a.jsx(te,{children:a.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>r("name"),children:["Name",e==="name"&&(t==="asc"?a.jsx(mt,{className:"ml-1 h-4 w-4"}):a.jsx(gt,{className:"ml-1 h-4 w-4"}))]})}),a.jsx(te,{children:"Description"}),a.jsx(te,{children:a.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>r("status"),children:["Status",e==="status"&&(t==="asc"?a.jsx(mt,{className:"ml-1 h-4 w-4"}):a.jsx(gt,{className:"ml-1 h-4 w-4"}))]})}),a.jsx(te,{children:"Related Services"})]})})}function hd({tool:e,onToggleAssociation:t,isUpdating:r}){var o;const n=s=>{switch(s.toLowerCase()){case"active":return"bg-green-100 text-green-800";case"development":return"bg-blue-100 text-blue-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs(Ae,{children:[a.jsx(Z,{children:a.jsx(tn,{checked:e.associated,onCheckedChange:s=>t(e.id,s),disabled:r})}),a.jsx(Z,{className:"font-medium",children:e.name}),a.jsx(Z,{children:e.description||"No description"}),a.jsx(Z,{children:a.jsx(Xo,{variant:"outline",className:`${n(e.status)}`,children:e.status})}),a.jsx(Z,{children:a.jsxs("div",{className:"space-y-1",children:[e.application_service&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Service:"})," ",e.application_service.name]}),e.application_api&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"API:"})," ",a.jsxs(Ye,{to:`/applications/${(o=e.application)==null?void 0:o.id}/apis/${e.application_api.id}`,className:"text-primary hover:underline",children:[e.application_api.name," ",e.application_api.version]})]}),e.application&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Application:"})," ",a.jsx(Ye,{to:`/applications/${e.application.slug}`,className:"text-primary hover:underline",children:e.application.name})]})]})})]})}function bd({currentPage:e,totalPages:t,itemsPerPage:r,setCurrentPage:n,setItemsPerPage:o}){const s=()=>{if(t<=5)return Array.from({length:t},(p,f)=>f+1);const l=Math.floor(5/2),c=5-l-1;return e>t-c?Array.from({length:5},(p,f)=>t-5+f+1):e<l+1?Array.from({length:5},(p,f)=>f+1):Array.from({length:5},(p,f)=>e-l+f)};return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zo,{htmlFor:"itemsPerPage",children:"Items per page:"}),a.jsxs("select",{id:"itemsPerPage",className:"border rounded p-1",value:r,onChange:i=>{o(Number(i.target.value)),n(1)},children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:20,children:"20"}),a.jsx("option",{value:50,children:"50"})]})]}),t>1&&a.jsx(ar,{children:a.jsxs(lr,{children:[a.jsx(ue,{children:a.jsx(cr,{onClick:()=>n(Math.max(e-1,1)),className:e===1?"pointer-events-none opacity-50":"cursor-pointer"})}),s().map(i=>a.jsx(ue,{children:a.jsx(ke,{isActive:i===e,onClick:()=>n(i),children:i})},i)),a.jsx(ue,{children:a.jsx(dr,{onClick:()=>n(Math.min(e+1,t)),className:e===t?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})}function vd(){return a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}function xd(){return a.jsx(Ae,{children:a.jsx(Z,{colSpan:5,className:"h-24 text-center",children:"No tools found."})})}function yd({availableTools:e,associatedTools:t,isLoading:r,onAssociateChange:n}){const[o,s]=v.useState([]),[i,l]=v.useState(""),[c,p]=v.useState("name"),[f,d]=v.useState("asc"),[u,m]=v.useState(1),[g,h]=v.useState(10),[b,x]=v.useState(!1);v.useEffect(()=>{const I=[...e.map(T=>({...T,associated:!1})),...t.map(T=>({...T,associated:!0}))];s(I)},[e,t]);const S=[...o.filter(I=>I.name.toLowerCase().includes(i.toLowerCase())||I.description&&I.description.toLowerCase().includes(i.toLowerCase()))].sort((I,T)=>{if(c==="associated")return f==="asc"?Number(I.associated)-Number(T.associated):Number(T.associated)-Number(I.associated);const q=I[c],$=T[c];return typeof q=="string"&&typeof $=="string"?f==="asc"?q.localeCompare($):$.localeCompare(q):0}),D=u*g,j=D-g,C=S.slice(j,D),P=Math.ceil(S.length/g),E=I=>{c===I?d(f==="asc"?"desc":"asc"):(p(I),d("asc"))},B=async(I,T)=>{x(!0);try{await n(I,T),s(q=>q.map($=>$.id===I?{...$,associated:T}:$)),L.success(`Tool ${T?"associated":"disassociated"} successfully`)}catch(q){L.error("Failed to update tool association"),console.error("Error updating tool association:",q)}finally{x(!1)}};return r?a.jsx(vd,{}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(md,{searchTerm:i,setSearchTerm:l})}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(Xr,{children:[a.jsx(Po,{children:S.length===0?"No tools available for this project or its applications.":`Showing ${j+1}-${Math.min(D,S.length)} of ${S.length} tools`}),a.jsx(gd,{sortField:c,sortDirection:f,handleSort:E}),a.jsx(en,{children:C.length===0?a.jsx(xd,{}):C.map(I=>a.jsx(hd,{tool:I,onToggleAssociation:B,isUpdating:b},I.id))})]})}),a.jsx(bd,{currentPage:u,totalPages:P,itemsPerPage:g,setCurrentPage:m,setItemsPerPage:h})]})}function wd({projectId:e}){const t=Fe(),{availableTools:r,associatedTools:n,isLoading:o,hasAssociatedApplications:s,handleAssociationToggle:i}=fd(e),l=()=>{t("/tools/new",{state:{projectId:e}})};return o?a.jsx("div",{className:"flex justify-center p-6",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s?r.length===0&&n.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-12 border rounded-lg bg-muted/10",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[a.jsx("path",{d:"M18 16H6a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2Z"}),a.jsx("path",{d:"m10 10-2-2m0 0L6 6m2 2 2-2m4 2 2-2m0 0 2-2m-2 2-2-2"})]})}),a.jsx("h3",{className:"text-lg font-medium mt-4 mb-2",children:"No tools available for the associated applications"}),a.jsx(se,{onClick:l,className:"mt-4",children:"Create AI Tool"})]}):a.jsx(yd,{availableTools:r,associatedTools:n,isLoading:o,onAssociateChange:i}):a.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-12 border rounded-lg bg-muted/10",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[a.jsx("path",{d:"M18 16H6a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2Z"}),a.jsx("path",{d:"m10 10-2-2m0 0L6 6m2 2 2-2m4 2 2-2m0 0 2-2m-2 2-2-2"})]})}),a.jsx("h3",{className:"text-lg font-medium mt-4 mb-2",children:"No tools available - associate applications with this project first"}),a.jsx(se,{onClick:l,className:"mt-4",children:"Create AI Tool"})]})}function Dd({project:e}){const{serversWithTools:t}=fn(e.id),r=t.reduce((n,o)=>n+(o.tools?o.tools.length:0),0);return a.jsx(Ro,{defaultTab:"overview",tabs:[{value:"overview",label:"Overview",description:"Detailed information about this project",content:a.jsx(ls,{description:e.description,projectId:e.id})},{value:"applications",label:`Applications (${e.applications_count||0})`,description:"Applications associated with this project",icon:a.jsx(es,{className:"h-4 w-4"}),content:a.jsx(rd,{projectId:e.id})},{value:"servers",label:`Servers (${t.length||0})`,description:"Servers associated with this project",icon:a.jsx(fe,{className:"h-4 w-4"}),content:a.jsx(ad,{projectId:e.id})},{value:"tools",label:`AI Tools (${r||0})`,description:"AI tools for this project",icon:a.jsx(ln,{className:"h-4 w-4"}),content:a.jsx(wd,{projectId:e.id})}]})}function lu(){const{id:e}=jo(),t=Fe(),[r,n]=v.useState(null),[o,s]=v.useState(!0),[i,l]=v.useState(!1),[c,p]=v.useState(!1),[f,d]=v.useState("");v.useEffect(()=>{(async()=>{if(e){s(!0);try{console.log("Fetching project details for ID/slug:",e);let j=_.from("projects").select("*");/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?j=j.eq("id",e):j=j.eq("slug",e);const{data:P,error:E}=await j.single();if(E)throw console.error("Error fetching project details:",E),L.error(`Failed to load project: ${E.message}`),E;console.log("Fetched project details:",P),n(P),d(JSON.stringify({"comming soon":"project details",see_project_management_demo:"https://youtu.be/4JJ30ytn-yY",see_oas_to_mcp_demo:"https://youtu.be/kR4pP5VZgKw"},null,2))}catch(j){console.error("Error in project fetch:",j),L.error("Failed to load project details")}finally{s(!1)}}})()},[e]);const u=()=>{t(-1)},m=()=>{r&&t(`/projects/${r.slug}/edit`)},g=async()=>{if(r)try{const{error:D}=await _.from("projects").delete().eq("id",r.id);if(D)throw D;L.success("Project deleted successfully"),t("/projects")}catch(D){console.error("Error deleting project:",D),L.error(`Failed to delete project: ${D.message}`)}},h=async()=>{r&&(await new Promise(D=>setTimeout(D,2e3)),L.success("Project imported successfully"))},b=async()=>{r&&(await new Promise(D=>setTimeout(D,2e3)),L.success("Project exported successfully"))},x=async()=>{r&&(await new Promise(D=>setTimeout(D,2e3)),L.success("Project deployed successfully"))},y=async()=>{r&&(await new Promise(D=>setTimeout(D,2e3)),L.success("Project undeployed successfully"))},S=D=>{switch(D){case"Active":return"tag-green";case"Development":return"tag-purple";case"Maintenance":return"tag-yellow";case"Archived":return"tag-red";default:return""}};return a.jsx(To,{isLoading:o,resource:r,resourceType:"Project",onGoBack:u,renderResource:()=>a.jsxs(a.Fragment,{children:[a.jsx(Oo,{title:r.name,description:r.description,isFavorite:r.favorite,status:r.status,tags:r.tags,statusColorClass:S(r.status),onEdit:m,onDelete:g,resourceId:r.id,resourceType:"Project",isActionsOpen:i,setIsActionsOpen:l,showCodeView:c,setShowCodeView:p,handleImport:h,handleExport:b,handleDeploy:x,handleUndeploy:y}),a.jsx(ns,{project:r}),c?a.jsxs("div",{className:"mt-6 border rounded-md overflow-hidden",children:[a.jsxs("div",{className:"p-2 bg-muted border-b flex items-center",children:[a.jsx(Lo,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:"Project Code View"})]}),a.jsx("div",{className:"h-[500px]",children:a.jsx(Bo,{height:"100%",defaultLanguage:"json",defaultValue:f,options:{readOnly:!1,minimap:{enabled:!1},scrollBeyondLastLine:!1,automaticLayout:!0},onChange:D=>d(D||"")})})]}):a.jsx(Dd,{project:r})]})})}export{lu as default};
//# sourceMappingURL=ProjectDetailPage-C400SFSq.js.map
